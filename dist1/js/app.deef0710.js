(function(){"use strict";var e={8590:function(e,a,l){var t=l(5130),n=l(6768);const o={id:"app"};function r(e,a){const l=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(l)])}var s=l(1241);const u={},i=(0,s.A)(u,[["render",r]]);var d=i,c=l(8300),m=(l(4188),l(1387)),k=(l(4114),l(144)),p=l(4232),v=l(782),g=l(7477);const h={key:0,class:"page"},b={class:"menuWrap"},f={key:0,class:"uInfo"},y={class:"main"},F={class:"homeWrap"},_={class:"sumCards"},L={class:"cContent"},w={class:"cIcon"},R={class:"cContent"},C={class:"cIcon"},x={class:"cContent"},V={class:"cIcon"},S={class:"cContent"},I={class:"cIcon"},A={class:"qActions"},E={href:"/health-monitoring"},K={href:"/health-knowledge"},P={href:"/health-monitoring"},W={href:"/user-settings"},T={href:"/ai-consultation"},X={key:1};var D={__name:"HomePage",setup(e){const a=(0,m.rd)(),l=(0,v.Pj)(),t=(0,n.EW)((()=>l.getters.isLoggedIn)),o=(0,n.EW)((()=>l.getters.userInfo)),r=()=>{a.push("/")};return(e,a)=>{const l=(0,n.g2)("el-icon"),s=(0,n.g2)("el-menu-item"),u=(0,n.g2)("el-menu"),i=(0,n.g2)("el-avatar"),d=(0,n.g2)("el-aside"),c=(0,n.g2)("el-card"),m=(0,n.g2)("el-button");return t.value?((0,n.uX)(),(0,n.CE)("div",h,[(0,n.bF)(d,{width:"220px",class:"side"},{default:(0,n.k6)((()=>[a[7]||(a[7]=(0,n.Lk)("div",{class:"sTitle"},"Smart Home Elderly Care System",-1)),(0,n.Lk)("div",b,[(0,n.bF)(u,{"default-active":"/home",class:"el-menu-1",router:!0},{default:(0,n.k6)((()=>[(0,n.bF)(s,{index:"/home"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.ODD))])),_:1}),a[0]||(a[0]=(0,n.Lk)("span",null,"Dashboard",-1))])),_:1}),(0,n.bF)(s,{index:"/health-monitoring"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.VAG))])),_:1}),a[1]||(a[1]=(0,n.Lk)("span",null,"Health monitoring",-1))])),_:1}),(0,n.bF)(s,{index:"/health-knowledge"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.f5b))])),_:1}),a[2]||(a[2]=(0,n.Lk)("span",null,"Health Knowledge",-1))])),_:1}),(0,n.bF)(s,{index:"/user-settings"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.B5R))])),_:1}),a[3]||(a[3]=(0,n.Lk)("span",null,"User Settings",-1))])),_:1}),(0,n.bF)(s,{index:"/ai-consultation"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.wUE))])),_:1}),a[4]||(a[4]=(0,n.Lk)("span",null,"AI Consultation",-1))])),_:1}),(0,n.bF)(s,{index:"/diet-management"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.NoT))])),_:1}),a[5]||(a[5]=(0,n.Lk)("span",null,"Diet Management",-1))])),_:1}),(0,n.bF)(s,{index:"/sport-management"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.mP9))])),_:1}),a[6]||(a[6]=(0,n.Lk)("span",null,"Sports Management",-1))])),_:1})])),_:1})]),o.value?((0,n.uX)(),(0,n.CE)("div",f,[(0,n.bF)(i,{size:40,src:o.value.avatar},null,8,["src"]),(0,n.Lk)("span",null,(0,p.v_)(o.value.username),1)])):(0,n.Q3)("",!0)])),_:1}),(0,n.Lk)("div",y,[a[18]||(a[18]=(0,n.Lk)("div",{class:"pHeader"},[(0,n.Lk)("div",{class:"hTitle"},[(0,n.Lk)("h1",null,"Welcome, elderly user!"),(0,n.Lk)("span",{class:"sub-title"},"System core management entrance")])],-1)),(0,n.Lk)("div",F,[(0,n.Lk)("div",_,[(0,n.bF)(c,{class:"sumCard"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",L,[(0,n.Lk)("div",w,[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.KJW))])),_:1})]),a[8]||(a[8]=(0,n.Lk)("div",{class:"cText"},[(0,n.Lk)("div",{class:"cVal"},"135"),(0,n.Lk)("div",{class:"cLabel"},"Number of elderly users")],-1))])])),_:1}),(0,n.bF)(c,{class:"sumCard"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",R,[(0,n.Lk)("div",C,[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.KJW))])),_:1})]),a[9]||(a[9]=(0,n.Lk)("div",{class:"cText"},[(0,n.Lk)("div",{class:"cVal"},"312"),(0,n.Lk)("div",{class:"cLabel"},"Number of social workers")],-1))])])),_:1}),(0,n.bF)(c,{class:"sumCard"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",x,[(0,n.Lk)("div",V,[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.IrQ))])),_:1})]),a[10]||(a[10]=(0,n.Lk)("div",{class:"cText"},[(0,n.Lk)("div",{class:"cVal"},"5"),(0,n.Lk)("div",{class:"cLabel"},"Pending alarm")],-1))])])),_:1}),(0,n.bF)(c,{class:"sumCard"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",S,[(0,n.Lk)("div",I,[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.yoT))])),_:1})]),a[11]||(a[11]=(0,n.Lk)("div",{class:"cText"},[(0,n.Lk)("div",{class:"cVal"},"2"),(0,n.Lk)("div",{class:"cLabel"},"To Do Tasks")],-1))])])),_:1})]),(0,n.bF)(c,{class:"qaCard"},{header:(0,n.k6)((()=>a[12]||(a[12]=[(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"Quick operation")],-1)]))),default:(0,n.k6)((()=>[(0,n.Lk)("div",A,[(0,n.Lk)("a",E,[(0,n.bF)(m,{type:"primary"},{default:(0,n.k6)((()=>a[13]||(a[13]=[(0,n.eW)("View health data")]))),_:1})]),(0,n.Lk)("a",K,[(0,n.bF)(m,{type:"success"},{default:(0,n.k6)((()=>a[14]||(a[14]=[(0,n.eW)("View health knowledge")]))),_:1})]),(0,n.Lk)("a",P,[(0,n.bF)(m,{type:"info"},{default:(0,n.k6)((()=>a[15]||(a[15]=[(0,n.eW)("Overview of Health Data")]))),_:1})]),(0,n.Lk)("a",W,[(0,n.bF)(m,{type:"warning"},{default:(0,n.k6)((()=>a[16]||(a[16]=[(0,n.eW)("User Settings")]))),_:1})]),(0,n.Lk)("a",T,[(0,n.bF)(m,{type:"danger"},{default:(0,n.k6)((()=>a[17]||(a[17]=[(0,n.eW)("AI Consultation")]))),_:1})])])])),_:1})])])])):((0,n.uX)(),(0,n.CE)("div",X,[a[20]||(a[20]=(0,n.Lk)("h1",null,"Please log in first",-1)),(0,n.bF)(m,{type:"primary",onClick:r},{default:(0,n.k6)((()=>a[19]||(a[19]=[(0,n.eW)("Go login")]))),_:1})]))}}};const U=(0,s.A)(D,[["__scopeId","data-v-b1e0bbb8"]]);var H=U,B=l.p+"img/login.5a2cbbe5.png";const q={style:{display:"flex","justify-content":"center","align-items":"center",height:"100vh","background-color":"#f0f2f5"}},N={class:"login-content"},z={style:{display:"flex","justify-content":"space-between","font-size":"12px"}};function M(e,a,l,o,r,s){const u=(0,n.g2)("User"),i=(0,n.g2)("el-icon"),d=(0,n.g2)("el-input"),c=(0,n.g2)("el-form-item"),m=(0,n.g2)("Lock"),k=(0,n.g2)("el-button"),v=(0,n.g2)("el-link"),g=(0,n.g2)("el-form"),h=(0,n.g2)("RegisterForm"),b=(0,n.g2)("ForgotPasswordForm"),f=(0,n.g2)("el-card");return(0,n.uX)(),(0,n.CE)("div",q,[(0,n.bF)(f,{class:"login-card"},{header:(0,n.k6)((()=>a[6]||(a[6]=[(0,n.Lk)("div",{style:{"text-align":"left"}},[(0,n.Lk)("h2",{style:{margin:"0"}},"Welcome"),(0,n.Lk)("p",{style:{color:"#999"}},"Smart Home Elderly Care System")],-1)]))),default:(0,n.k6)((()=>[(0,n.Lk)("div",N,[a[9]||(a[9]=(0,n.Lk)("div",{class:"image-container"},[(0,n.Lk)("img",{src:B,alt:"Logo",class:"logo-image"})],-1)),"login"===e.currentForm?((0,n.uX)(),(0,n.Wv)(g,{key:0,"label-position":"top","label-width":"0",class:"login-form",onSubmit:(0,t.D$)(e.login,["prevent"])},{default:(0,n.k6)((()=>[(0,n.bF)(c,{label:"Account Number"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:e.form.username,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.username=a),placeholder:"Please enter your account"},{append:(0,n.k6)((()=>[(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.bF)(u)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(c,{label:"Password"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:e.form.password,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.password=a),type:"password",placeholder:"Please input a password","show-password":""},{append:(0,n.k6)((()=>[(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.bF)(m)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.bF)(k,{type:"primary",style:{width:"100%"},onClick:e.login,loading:e.loading},{default:(0,n.k6)((()=>[(0,n.eW)((0,p.v_)(e.loading?"Logging in":"Log on"),1)])),_:1},8,["onClick","loading"])])),_:1}),(0,n.Lk)("div",z,[(0,n.bF)(v,{type:"primary",underline:!1,onClick:a[2]||(a[2]=a=>e.currentForm="register")},{default:(0,n.k6)((()=>a[7]||(a[7]=[(0,n.eW)("Free registration")]))),_:1}),(0,n.bF)(v,{type:"primary",underline:!1,onClick:a[3]||(a[3]=a=>e.currentForm="forgotPassword")},{default:(0,n.k6)((()=>a[8]||(a[8]=[(0,n.eW)("Forgot password")]))),_:1})])])),_:1},8,["onSubmit"])):(0,n.Q3)("",!0),"register"===e.currentForm?((0,n.uX)(),(0,n.Wv)(h,{key:1,class:"login-form",onBackToLogin:a[4]||(a[4]=a=>e.currentForm="login")})):(0,n.Q3)("",!0),"forgotPassword"===e.currentForm?((0,n.uX)(),(0,n.Wv)(b,{key:2,class:"login-form",onBackToLogin:a[5]||(a[5]=a=>e.currentForm="login")})):(0,n.Q3)("",!0)])])),_:1})])}function O(e,a,l,t,o,r){const s=(0,n.g2)("el-input"),u=(0,n.g2)("el-form-item"),i=(0,n.g2)("el-option"),d=(0,n.g2)("el-select"),c=(0,n.g2)("el-button"),m=(0,n.g2)("el-link"),k=(0,n.g2)("el-form");return(0,n.uX)(),(0,n.CE)("div",null,[a[9]||(a[9]=(0,n.Lk)("h3",null,"Register",-1)),(0,n.bF)(k,{"label-position":"top","label-width":"0",model:e.registerForm,ref:"registerFormRef"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"Username",prop:"username"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{modelValue:e.registerForm.username,"onUpdate:modelValue":a[0]||(a[0]=a=>e.registerForm.username=a),placeholder:"Enter your user name"},null,8,["modelValue"])])),_:1}),(0,n.bF)(u,{label:"Email",prop:"email"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{modelValue:e.registerForm.email,"onUpdate:modelValue":a[1]||(a[1]=a=>e.registerForm.email=a),placeholder:"Please enter your email address"},null,8,["modelValue"])])),_:1}),(0,n.bF)(u,{label:"cell-phone number",prop:"phone"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{modelValue:e.registerForm.phone,"onUpdate:modelValue":a[2]||(a[2]=a=>e.registerForm.phone=a),placeholder:"Please enter your phone number"},null,8,["modelValue"])])),_:1}),(0,n.bF)(u,{label:"Role",prop:"user_type"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:e.registerForm.user_type,"onUpdate:modelValue":a[3]||(a[3]=a=>e.registerForm.user_type=a),placeholder:"Please select a role"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{label:"Elderly",value:"elderly"}),(0,n.bF)(i,{label:"Social Worker",value:"social_worker"}),(0,n.bF)(i,{label:"Admin",value:"admin"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(u,{label:"Password",prop:"password"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{type:"password",modelValue:e.registerForm.password,"onUpdate:modelValue":a[4]||(a[4]=a=>e.registerForm.password=a),placeholder:"Please input a password"},null,8,["modelValue"])])),_:1}),(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(c,{type:"primary",style:{width:"100%"},onClick:a[5]||(a[5]=a=>e.submitForm())},{default:(0,n.k6)((()=>a[7]||(a[7]=[(0,n.eW)("Register")]))),_:1})])),_:1}),(0,n.bF)(m,{type:"primary",underline:!1,onClick:a[6]||(a[6]=a=>e.emit("back-to-login"))},{default:(0,n.k6)((()=>a[8]||(a[8]=[(0,n.eW)("Return to login")]))),_:1})])),_:1},8,["model"])])}var $=l(4373),j=l(2006),Q=l(9623),G=l(3938),Y=l(2557),J=l(1219),Z=(0,n.pM)({name:"RegisterForm",components:{ElForm:j.US,ElFormItem:j.xE,ElInput:Q.WK,ElButton:G.S2,ElLink:Y.C4},emits:["back-to-login"],setup(e,{emit:a}){const l=(0,k.Kh)({username:"",password:"",email:"",phone:""}),t=async()=>{try{const e=await $.A.post("http://localhost:3060/api/homecare/register",l);console.log(e.data),(0,J.nk)({message:"Registered successfully",type:"success"}),a("back-to-login")}catch(e){console.error("Registration failed:",e),J.nk.error(e.response?.data?.message||"Registration failed, please try again")}};return{registerForm:l,submitForm:t,emit:a}}});const ee=(0,s.A)(Z,[["render",O]]);var ae=ee;function le(e,a,l,t,o,r){const s=(0,n.g2)("el-input"),u=(0,n.g2)("el-form-item"),i=(0,n.g2)("el-button"),d=(0,n.g2)("el-link"),c=(0,n.g2)("el-form");return(0,n.uX)(),(0,n.CE)("div",null,[a[3]||(a[3]=(0,n.Lk)("h3",null,"忘记密码",-1)),(0,n.bF)(c,{"label-position":"top","label-width":"0"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"邮箱"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{placeholder:"请输入注册邮箱"})])),_:1}),(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(i,{type:"primary",style:{width:"100%"}},{default:(0,n.k6)((()=>a[1]||(a[1]=[(0,n.eW)("重置密码")]))),_:1})])),_:1}),(0,n.bF)(d,{type:"primary",underline:!1,onClick:a[0]||(a[0]=a=>e.emit("back-to-login"))},{default:(0,n.k6)((()=>a[2]||(a[2]=[(0,n.eW)("返回登录")]))),_:1})])),_:1})])}var te=(0,n.pM)({name:"ForgotPasswordForm",emits:["back-to-login"],setup(e,{emit:a}){return{emit:a}}});const ne=(0,s.A)(te,[["render",le]]);var oe=ne,re=(0,n.pM)({components:{User:g.KJW,Lock:g.c_I,RegisterForm:ae,ForgotPasswordForm:oe},setup(){const e=(0,k.Kh)({username:"",password:""}),a=(0,k.KR)("login"),l=(0,m.rd)(),t=(0,v.Pj)(),n=(0,k.KR)(!1),o=async()=>{n.value=!0;try{const a=await $.A.post("http://47.250.182.201:3060/api/homecare/login",{username:e.username,password:e.password}),{token:n,user:o}=a.data;if("elderly"!==o.role)return void J.nk.error("Only elderly users can log in");t.dispatch("login",{userInfo:o,token:n}),l.push("/home"),J.nk.success("Login succeeded")}catch(a){console.error("Login failed:",a);let e="Login failed, please try again later";a.response&&a.response.data&&a.response.data.message&&(e=a.response.data.message),J.nk.error(e)}finally{n.value=!1}};return{form:e,currentForm:a,login:o,loading:n}}});const se=(0,s.A)(re,[["render",M],["__scopeId","data-v-a31fafbc"]]);var ue=se,ie=(l(8111),l(2489),l(1701),l(683)),de=l(8303),ce=l(3866),me=l(9559),ke=l(4757),pe=l(9671);const ve={key:0,class:"page"},ge={class:"menuWrap"},he={key:0,class:"uInfo"},be={class:"main"},fe={class:"camWrap"},ye={class:"button-group"},Fe={key:0,class:"uping"},_e={key:1,class:"dShow"},Le={key:0},we={key:2},Re={key:2,class:"noData"},Ce={key:0},xe={key:2,class:"ai-analysis-content"},Ve=["innerHTML"],Se={key:3,class:"noData"},Ie={key:1};var Ae={__name:"HealthMonitoringPage",setup(e){const a=(0,m.rd)(),l=(0,v.Pj)(),t=(0,n.EW)((()=>l.getters.isLoggedIn)),o=(0,n.EW)((()=>l.getters.userInfo)),r=()=>{a.push("/")},s=(0,k.KR)("http://localhost:3060/api/homecare/upload-image"),u=(0,k.KR)("http://localhost:3060/api/homecare/upload-image-2"),i=(0,k.KR)("http://localhost:3060/api/homecare/history-data"),d=(0,k.KR)("http://localhost:3060/api/homecare2/health-analysis"),c=(0,k.KR)(null),h=(0,k.KR)(null),b=(0,k.KR)(!1),f=(0,k.KR)(!1),y=(0,k.KR)(0),F=(0,k.KR)([]),_=(0,k.KR)([]),L=(0,k.KR)(null),w=(0,k.KR)(!1),R=(0,k.KR)(null),C=(0,k.KR)(null),x=(0,k.KR)(null);let V=null,S=null;const I=(e,a)=>{f.value=!1,y.value=0,e.success?(b.value=!0,"blood_pressure"===a?(c.value=e.data.value,h.value=null):"blood_sugar"===a?(h.value=e.data.value,c.value=null):(J.nk.error("Unable to recognize data type"),c.value=null,h.value=null,b.value=!1)):(J.nk.error(e.message||"Upload failed"),c.value=null,h.value=null,b.value=!1)},A=e=>{const a=x.value.getContext("2d");a.drawImage(C.value,0,0,320,240);const l=x.value.toDataURL("image/png");E(l,e)},E=async(e,a)=>{f.value=!0,b.value=!1,c.value=null,h.value=null,y.value=0;let t="";if("blood_pressure"===a)t=s.value;else{if("blood_sugar"!==a)return J.nk.error("Invalid upload type"),void(f.value=!1);t=u.value}try{const n=localStorage.getItem("token")||l.getters.token,o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({image:e})}),r=await o.json();I(r,a),await K()}catch(n){f.value=!1,J.nk.error("Upload failed, please check the network")}},K=async()=>{try{const e=localStorage.getItem("token")||l.getters.token,a=await fetch(i.value,{headers:{Authorization:`Bearer ${e}`}}),t=await a.json();t.success?(F.value=t.data.filter((e=>"blood_pressure"===e.type)).map((e=>({time:e.time,systolic:e.value.systolic,diastolic:e.value.diastolic,pulse:e.value.pulse,formattedTime:new Date(e.time).toLocaleDateString()+" "+new Date(e.time).toLocaleTimeString()}))),_.value=t.data.filter((e=>"blood_sugar"===e.type)).map((e=>({time:e.time,bloodSugar:e.value.bloodSugar,formattedTime:new Date(e.time).toLocaleDateString()+" "+new Date(e.time).toLocaleTimeString()}))),P()):J.nk.error(t.message||"Failed to retrieve historical data")}catch(e){J.nk.error("Failed to retrieve historical data, please check the network")}},P=async()=>{if(w.value=!0,R.value=null,L.value=null,0!==F.value.length||0!==_.value.length)try{const e=localStorage.getItem("token")||l.getters.token;if(!e)return R.value="Authentication token not found. Please log in.",J.nk.error(R.value),void(w.value=!1);const a=await $.A.post(d.value,{},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});a.data.success?L.value=a.data.analysis:(R.value=a.data.message||"Failed to get AI analysis",J.nk.error(R.value))}catch(e){console.error("Error fetching AI analysis:",e),e.response&&401===e.response.status?(R.value="Session expired or unauthorized. Please log in again.",J.nk.error(R.value),a.push("/")):(R.value="Network error, failed to get AI analysis.",J.nk.error(R.value))}finally{w.value=!1}else w.value=!1},W=(0,n.EW)((()=>{if(!L.value)return"";const e=L.value,a=e.indexOf("分析："),l=e.indexOf("建议：");let t=e;return-1!==a&&-1!==l&&l>a?t=e.substring(a+3,l).trim():-1!==a&&(t=e.substring(a+3).trim()),t.replace(/\n/g,"<br>")})),T=e=>{if(!e||0===e.length)return void(V&&V.clear());V||(V=pe.Ts(document.getElementById("blood-pressure-chart")));const a=e.sort(((e,a)=>new Date(e.time)-new Date(a.time))),l=a.map((e=>new Date(e.time).toLocaleString())),t=a.map((e=>e.systolic)),n=a.map((e=>e.diastolic)),o=a.map((e=>e.pulse)),r={title:{text:"Historical trend of blood pressure",left:"center"},tooltip:{trigger:"axis"},legend:{data:["Systolic pressure","Diastolic pressure","Pulse"],bottom:0},xAxis:{type:"category",data:l,axisLabel:{rotate:30,interval:0}},yAxis:{type:"value",name:"Value (mmHg/bpm)"},series:[{name:"Systolic pressure",type:"line",data:t},{name:"Diastolic pressure",type:"line",data:n},{name:"Pulse",type:"line",data:o}]};V.setOption(r)},X=e=>{if(!e||0===e.length)return void(S&&S.clear());S||(S=pe.Ts(document.getElementById("blood-sugar-chart")));const a=e.sort(((e,a)=>new Date(e.time)-new Date(a.time))),l=a.map((e=>new Date(e.time).toLocaleString())),t=a.map((e=>e.bloodSugar)),n={title:{text:"Historical trend of blood glucose",left:"center"},tooltip:{trigger:"axis"},legend:{data:["Blood sugar"],bottom:0},xAxis:{type:"category",data:l,axisLabel:{rotate:30,interval:0}},yAxis:{type:"value",name:"Value (mg/dL)"},series:[{name:"Blood sugar",type:"line",data:t}]};S.setOption(n)};return(0,n.wB)(F,(e=>{T(e)})),(0,n.wB)(_,(e=>{X(e)})),(0,n.sV)((()=>{navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{C.value.srcObject=e})).catch((e=>{console.error("Unable to access camera",e),J.nk.error("Unable to access camera, please check permissions")})),K()})),(e,a)=>{const l=(0,n.g2)("el-icon"),s=(0,n.g2)("el-menu-item"),u=(0,n.g2)("el-menu"),i=(0,n.g2)("el-avatar"),d=(0,n.g2)("el-aside");return t.value?((0,n.uX)(),(0,n.CE)("div",ve,[(0,n.bF)(d,{width:"220px",class:"side"},{default:(0,n.k6)((()=>[a[10]||(a[10]=(0,n.Lk)("div",{class:"sTitle"},"Smart Home Elderly Care System",-1)),(0,n.Lk)("div",ge,[(0,n.bF)(u,{"default-active":"/health-monitoring",class:"el-menu-1",router:!0},{default:(0,n.k6)((()=>[(0,n.bF)(s,{index:"/home"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.ODD))])),_:1}),a[2]||(a[2]=(0,n.Lk)("span",null,"Dashboard",-1))])),_:1}),(0,n.bF)(s,{index:"/health-monitoring"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.VAG))])),_:1}),a[3]||(a[3]=(0,n.Lk)("span",null,"Health monitoring",-1)),a[4]||(a[4]=(0,n.eW)(" -"))])),_:1}),(0,n.bF)(s,{index:"/health-knowledge"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.f5b))])),_:1}),a[5]||(a[5]=(0,n.Lk)("span",null,"Health Knowledge",-1))])),_:1}),(0,n.bF)(s,{index:"/user-settings"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.B5R))])),_:1}),a[6]||(a[6]=(0,n.Lk)("span",null,"User Settings",-1))])),_:1}),(0,n.bF)(s,{index:"/ai-consultation"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.wUE))])),_:1}),a[7]||(a[7]=(0,n.Lk)("span",null,"AI Consultation",-1))])),_:1}),(0,n.bF)(s,{index:"/diet-management"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.NoT))])),_:1}),a[8]||(a[8]=(0,n.Lk)("span",null,"Diet Management",-1))])),_:1}),(0,n.bF)(s,{index:"/sport-management"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.mP9))])),_:1}),a[9]||(a[9]=(0,n.Lk)("span",null,"Sports Management",-1))])),_:1})])),_:1})]),o.value?((0,n.uX)(),(0,n.CE)("div",he,[(0,n.bF)(i,{size:40,src:o.value.avatar},null,8,["src"]),(0,n.Lk)("span",null,(0,p.v_)(o.value.username),1)])):(0,n.Q3)("",!0)])),_:1}),(0,n.Lk)("div",be,[a[22]||(a[22]=(0,n.Lk)("div",{class:"pHeader"},[(0,n.Lk)("div",{class:"hTitle"},[(0,n.Lk)("h1",null,"Health monitoring"),(0,n.Lk)("span",{class:"sub-title"},"Take photos and upload them to quickly obtain health data")])],-1)),(0,n.bF)((0,k.R1)(ie.Ik),{class:"dCard"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",fe,[(0,n.Lk)("video",{ref_key:"video",ref:C,width:"320",height:"240",autoplay:""},null,512),(0,n.Lk)("canvas",{ref_key:"canvas",ref:x,width:"320",height:"240",style:{display:"none"}},null,512),(0,n.Lk)("div",ye,[(0,n.bF)((0,k.R1)(G.S2),{type:"primary",onClick:a[0]||(a[0]=e=>A("blood_pressure"))},{default:(0,n.k6)((()=>a[11]||(a[11]=[(0,n.eW)("Upload Blood Pressure Monitor")]))),_:1}),(0,n.bF)((0,k.R1)(G.S2),{type:"primary",onClick:a[1]||(a[1]=e=>A("blood_sugar"))},{default:(0,n.k6)((()=>a[12]||(a[12]=[(0,n.eW)("Upload Blood Glucose Meter")]))),_:1})])]),f.value?((0,n.uX)(),(0,n.CE)("div",Fe,a[13]||(a[13]=[(0,n.Lk)("p",null,"Uploading and identifying data, please wait",-1)]))):(0,n.Q3)("",!0),c.value||h.value?((0,n.uX)(),(0,n.CE)("div",_e,[c.value?((0,n.uX)(),(0,n.CE)("h2",Le,"Blood Pressure Data")):(0,n.Q3)("",!0),c.value?((0,n.uX)(),(0,n.Wv)((0,k.R1)(de.TS),{key:1,column:1,border:""},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(de.MF),{label:"Systolic pressure"},{default:(0,n.k6)((()=>[(0,n.eW)((0,p.v_)(c.value.systolic)+" mmHg",1)])),_:1}),(0,n.bF)((0,k.R1)(de.MF),{label:"Diastolic pressure"},{default:(0,n.k6)((()=>[(0,n.eW)((0,p.v_)(c.value.diastolic)+" mmHg",1)])),_:1}),(0,n.bF)((0,k.R1)(de.MF),{label:"Pulse"},{default:(0,n.k6)((()=>[(0,n.eW)((0,p.v_)(c.value.pulse)+" bpm",1)])),_:1})])),_:1})):(0,n.Q3)("",!0),h.value?((0,n.uX)(),(0,n.CE)("h2",we,"Blood Glucose Data")):(0,n.Q3)("",!0),h.value?((0,n.uX)(),(0,n.Wv)((0,k.R1)(de.TS),{key:3,column:1,border:""},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(de.MF),{label:"Blood sugar"},{default:(0,n.k6)((()=>[(0,n.eW)((0,p.v_)(h.value.bloodSugar)+" mg/dL",1)])),_:1})])),_:1})):(0,n.Q3)("",!0)])):b.value&&!f.value?((0,n.uX)(),(0,n.CE)("div",Re,a[14]||(a[14]=[(0,n.Lk)("p",null,"No valid data was identified, please take a new photo.",-1)]))):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)((0,k.R1)(ie.Ik),{class:"ai-analysis-card"},{header:(0,n.k6)((()=>a[15]||(a[15]=[(0,n.Lk)("div",{class:"card-header"},"AI Health Analysis and Suggestions",-1)]))),default:(0,n.k6)((()=>[w.value?((0,n.uX)(),(0,n.CE)("div",Ce,[(0,n.bF)((0,k.R1)(ce.d1),{rows:3,animated:""})])):R.value?((0,n.uX)(),(0,n.Wv)((0,k.R1)(me.KR),{key:1,title:R.value,type:"error","show-icon":""},null,8,["title"])):L.value?((0,n.uX)(),(0,n.CE)("div",xe,[a[16]||(a[16]=(0,n.Lk)("h3",null,"Analysis:",-1)),(0,n.Lk)("p",{innerHTML:W.value},null,8,Ve)])):((0,n.uX)(),(0,n.CE)("div",Se,a[17]||(a[17]=[(0,n.Lk)("p",null," AI analysis and suggestions will appear here after data is available. ",-1)])))])),_:1}),(0,n.bF)((0,k.R1)(ie.Ik),{class:"hCard"},{default:(0,n.k6)((()=>[a[18]||(a[18]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"Blood Pressure Historical Data")],-1)),a[19]||(a[19]=(0,n.Lk)("div",{id:"blood-pressure-chart",style:{width:"100%",height:"400px"}},null,-1)),(0,n.bF)((0,k.R1)(ke.Up),{data:F.value,style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(ke.o8),{prop:"formattedTime",label:"Time",width:"180"}),(0,n.bF)((0,k.R1)(ke.o8),{prop:"systolic",label:"Systolic pressure"}),(0,n.bF)((0,k.R1)(ke.o8),{prop:"diastolic",label:"Diastolic pressure"}),(0,n.bF)((0,k.R1)(ke.o8),{prop:"pulse",label:"Pulse"})])),_:1},8,["data"])])),_:1}),(0,n.bF)((0,k.R1)(ie.Ik),{class:"hCard"},{default:(0,n.k6)((()=>[a[20]||(a[20]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("span",null,"Historical Blood Glucose Data")],-1)),a[21]||(a[21]=(0,n.Lk)("div",{id:"blood-sugar-chart",style:{width:"100%",height:"400px"}},null,-1)),(0,n.bF)((0,k.R1)(ke.Up),{data:_.value,style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(ke.o8),{prop:"formattedTime",label:"Time",width:"180"}),(0,n.bF)((0,k.R1)(ke.o8),{prop:"bloodSugar",label:"Blood sugar"})])),_:1},8,["data"])])),_:1})])])):((0,n.uX)(),(0,n.CE)("div",Ie,[a[24]||(a[24]=(0,n.Lk)("h1",null,"Please log in first",-1)),(0,n.bF)((0,k.R1)(G.S2),{type:"primary",onClick:r},{default:(0,n.k6)((()=>a[23]||(a[23]=[(0,n.eW)("Go login")]))),_:1})]))}}};const Ee=(0,s.A)(Ae,[["__scopeId","data-v-58ad2cc3"]]);var Ke=Ee;const Pe={key:0,class:"page"},We={class:"menuWrap"},Te={key:0,class:"uInfo"},Xe={class:"main"},De={key:0},Ue={key:2},He={class:"card-header"},Be={class:"kContent"},qe={class:"kFooter"},Ne={key:1};var ze={__name:"HealthKnowledgePage",setup(e){const a=(0,m.rd)(),l=(0,v.Pj)(),t=(0,n.EW)((()=>l.getters.isLoggedIn)),o=(0,n.EW)((()=>l.getters.userInfo)),r=()=>{a.push("/")},s=(0,k.KR)("http://localhost:3060/api/homecare/health-knowledge"),u=(0,k.KR)([]),i=(0,k.KR)(!0),d=(0,k.KR)(!1),c=async()=>{i.value=!0,d.value=!1;try{const e=localStorage.getItem("token"),a=await fetch(s.value,{headers:{Authorization:`Bearer ${e}`}});if(!a.ok)throw console.error("API response error: ",a.status,a.statusText),new Error(`API request failed, status code: ${a.status}`);const l=await a.json();l.success?u.value=l.data.map((e=>({...e,id:e.health_knowledge_id,contentSnippet:e.content.substring(0,50),formattedTime:new Date(e.publish_time).toLocaleDateString()+" "+new Date(e.publish_time).toLocaleTimeString()}))):(console.error("API returned error: ",l.message),J.nk.error(l.message||"Failed to acquire health knowledge"),d.value=!0)}catch(e){console.error("API request error: ",e),J.nk.error("Network error, please try again later"),d.value=!0}finally{i.value=!1}},h=e=>{a.push({path:`/health-knowledge-detail/${e}`})};return(0,n.sV)((()=>{c()})),(e,a)=>{const l=(0,n.g2)("el-icon"),s=(0,n.g2)("el-menu-item"),c=(0,n.g2)("el-menu"),m=(0,n.g2)("el-avatar"),v=(0,n.g2)("el-aside"),b=(0,n.g2)("el-skeleton"),f=(0,n.g2)("el-card"),y=(0,n.g2)("el-tag"),F=(0,n.g2)("el-list-item"),_=(0,n.g2)("el-list"),L=(0,n.g2)("el-button");return t.value?((0,n.uX)(),(0,n.CE)("div",Pe,[(0,n.bF)(v,{width:"220px",class:"side"},{default:(0,n.k6)((()=>[a[7]||(a[7]=(0,n.Lk)("div",{class:"sTitle"},"Smart Home Elderly Care System",-1)),(0,n.Lk)("div",We,[(0,n.bF)(c,{"default-active":"/health-knowledge",class:"el-menu-1",router:!0},{default:(0,n.k6)((()=>[(0,n.bF)(s,{index:"/home"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.ODD))])),_:1}),a[0]||(a[0]=(0,n.Lk)("span",null,"Dashboard",-1))])),_:1}),(0,n.bF)(s,{index:"/health-monitoring"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.VAG))])),_:1}),a[1]||(a[1]=(0,n.Lk)("span",null,"Health monitoring",-1))])),_:1}),(0,n.bF)(s,{index:"/health-knowledge"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.f5b))])),_:1}),a[2]||(a[2]=(0,n.Lk)("span",null,"Health Knowledge",-1))])),_:1}),(0,n.bF)(s,{index:"/user-settings"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.B5R))])),_:1}),a[3]||(a[3]=(0,n.Lk)("span",null,"User Settings",-1))])),_:1}),(0,n.bF)(s,{index:"/ai-consultation"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.wUE))])),_:1}),a[4]||(a[4]=(0,n.Lk)("span",null,"AI Consultation",-1))])),_:1}),(0,n.bF)(s,{index:"/diet-management"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.NoT))])),_:1}),a[5]||(a[5]=(0,n.Lk)("span",null,"Diet Management",-1))])),_:1}),(0,n.bF)(s,{index:"/sport-management"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.mP9))])),_:1}),a[6]||(a[6]=(0,n.Lk)("span",null,"Sports Management",-1))])),_:1})])),_:1})]),o.value?((0,n.uX)(),(0,n.CE)("div",Te,[(0,n.bF)(m,{size:40,src:o.value.avatar},null,8,["src"]),(0,n.Lk)("span",null,(0,p.v_)(o.value.username),1)])):(0,n.Q3)("",!0)])),_:1}),(0,n.Lk)("div",Xe,[a[9]||(a[9]=(0,n.Lk)("div",{class:"pHeader"},[(0,n.Lk)("div",{class:"hTitle"},[(0,n.Lk)("h1",null,"Health knowledge"),(0,n.Lk)("span",{class:"sub-title"},"Get the latest health information")])],-1)),(0,n.bF)(f,{class:"kCard"},{default:(0,n.k6)((()=>[i.value?((0,n.uX)(),(0,n.CE)("div",De,[(0,n.bF)(b,{rows:5,animated:""})])):d.value?((0,n.uX)(),(0,n.Wv)(f,{key:1,class:"err"},{default:(0,n.k6)((()=>a[8]||(a[8]=[(0,n.eW)(" Failed to load health knowledge, please try again later. ")]))),_:1})):((0,n.uX)(),(0,n.CE)("div",Ue,[(0,n.bF)(_,null,{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.value,(e=>((0,n.uX)(),(0,n.Wv)(F,{key:e.id,onClick:a=>h(e.id),style:{cursor:"pointer"}},{default:(0,n.k6)((()=>[(0,n.bF)(f,{shadow:"hover",class:"kItemCard"},{header:(0,n.k6)((()=>[(0,n.Lk)("div",He,[(0,n.Lk)("span",null,(0,p.v_)(e.title),1),(0,n.bF)(y,{size:"small"},{default:(0,n.k6)((()=>[(0,n.eW)((0,p.v_)(e.category),1)])),_:2},1024)])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",Be,(0,p.v_)(e.contentSnippet)+"...",1),(0,n.Lk)("div",qe,[(0,n.Lk)("span",null,"Release time: "+(0,p.v_)(e.formattedTime),1)])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})]))])),_:1})])])):((0,n.uX)(),(0,n.CE)("div",Ne,[a[11]||(a[11]=(0,n.Lk)("h1",null,"Please log in first",-1)),(0,n.bF)(L,{type:"primary",onClick:r},{default:(0,n.k6)((()=>a[10]||(a[10]=[(0,n.eW)("Go login")]))),_:1})]))}}};const Me=(0,s.A)(ze,[["__scopeId","data-v-d25909ea"]]);var Oe=Me,$e=(l(116),l(4880)),je=l(4182),Qe=l(813),Ge=l(2357),Ye=l(7138),Je=l(2248),Ze=l(2687);const ea={key:0,class:"page"},aa={class:"menuWrap"},la={key:0,class:"uInfo"},ta={class:"main"},na={class:"card-header"},oa={key:0},ra={key:2},sa={class:"speech-controls"},ua={class:"control-item"},ia={class:"control-item"},da={class:"control-item"},ca={class:"knowledge-info"},ma={class:"author"},ka={class:"publish-time"},pa=["innerHTML"],va={key:0,class:"image-section"},ga=["src"],ha={key:1,class:"video-section"},ba=["src"],fa={key:1};var ya={__name:"HealthKnowledgeDetail",setup(e){const a=(0,m.rd)(),l=(0,m.lq)(),t=(0,v.Pj)(),o=(0,n.EW)((()=>t.getters.isLoggedIn)),r=(0,n.EW)((()=>t.getters.userInfo)),s=()=>{a.push("/")},u=(0,k.KR)("http://localhost:3060/api/homecare/health-knowledge"),i=(0,k.KR)(null),d=(0,k.KR)(!0),c=(0,k.KR)(!1),h=(0,k.KR)(""),b=window.speechSynthesis,f=(0,k.KR)([]),y=(0,k.KR)(null),F=(0,k.KR)(!1),_=(0,k.KR)(1);let L=null;const w=(0,k.KR)(!1),R=(0,k.KR)(1),C=()=>{f.value=b.getVoices(),f.value.length>0&&(y.value=f.value.find((e=>"zh-CN"===e.lang))||f.value[0])},x=e=>{if(!b||F.value)return;const a=new SpeechSynthesisUtterance(e);a.voice=y.value,a.pitch=1,a.rate=1,a.volume=_.value,L=a,a.onstart=()=>{F.value=!0},a.onend=()=>{F.value=!1,L=null},a.onerror=e=>{console.error("Speech synthesis error:",e),"canceled"!==e.error&&J.nk.error("Speech playback failed, please check browser settings or try again."),F.value=!1,L=null},b.speak(a)},V=()=>{b&&F.value&&(L&&(L.onerror=null),b.cancel(),F.value=!1,L=null)},S=()=>{w.value?(_.value=R.value,w.value=!1):(R.value=_.value,_.value=0,w.value=!0,V())},I=e=>{if(e>0?(w.value=!1,R.value=e):w.value=!0,F.value&&L){const e=L.text;V(),setTimeout((()=>{x(e)}),200)}},A=()=>{if(i.value&&!w.value){V();const e=`${i.value.title}. ${i.value.content}`;x(e)}else w.value?J.nk.warning("Please unmute to replay."):J.nk.warning("Knowledge details not loaded yet.")};b&&(b.onvoiceschanged=C),(0,n.wB)(f,(e=>{e.length>0&&!y.value&&(y.value=e.find((e=>"zh-CN"===e.lang))||e[0])}),{immediate:!0});const E=(0,n.EW)((()=>{if(i.value&&i.value.video_url){const e=i.value.video_url;if(e.includes("//player.bilibili.com/player.html"))return e;const a=e.match(/BV[0-9a-zA-Z]+/);if(a&&a[0]){const e=a[0];return`//player.bilibili.com/player.html?bvid=${e}&page=1`}return console.warn("Could not generate Bilibili embed URL from:",e),null}return null})),K=async e=>{d.value=!0,c.value=!1;try{const a=localStorage.getItem("token"),l=await fetch(`${u.value}/${e}`,{headers:{Authorization:`Bearer ${a}`}});if(!l.ok)throw console.error("API response error: ",l.status,l.statusText),new Error(`API request failed, status code: ${l.status}`);const t=await l.json();if(t.success){if(i.value={...t.data,formattedTime:new Date(t.data.publish_time).toLocaleDateString()+" "+new Date(t.data.publish_time).toLocaleTimeString()},h.value=i.value.content.replace(/\n/g,"<br>"),!w.value){const e=`${i.value.title}. ${i.value.content}`;x(e)}}else console.error("API returned error:",t.message),J.nk.error(t.message||"Failed to obtain health knowledge details"),c.value=!0}catch(a){console.error("API request error:",a),J.nk.error("Network error, please try again later"),c.value=!0}finally{d.value=!1}};(0,n.sV)((()=>{const e=l.params.health_knowledge_id;e?K(e):(J.nk.error("Lack of Health Knowledge ID"),c.value=!0,d.value=!1),b?C():J.nk.warning("Your browser does not support speech playback.")})),(0,n.xo)((()=>{V()}));g.EvL,g.VolumeUp;return(e,a)=>o.value?((0,n.uX)(),(0,n.CE)("div",ea,[(0,n.bF)((0,k.R1)($e.Mb),{width:"220px",class:"side"},{default:(0,n.k6)((()=>[a[9]||(a[9]=(0,n.Lk)("div",{class:"sTitle"},"Smart Home Elderly Care System",-1)),(0,n.Lk)("div",aa,[(0,n.bF)((0,k.R1)(je.lj),{"default-active":"/health-knowledge",class:"el-menu-1",router:!0},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(je.ct),{index:"/home"},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(Qe.tk),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.ODD))])),_:1}),a[2]||(a[2]=(0,n.Lk)("span",null,"Dashboard",-1))])),_:1}),(0,n.bF)((0,k.R1)(je.ct),{index:"/health-monitoring"},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(Qe.tk),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.VAG))])),_:1}),a[3]||(a[3]=(0,n.Lk)("span",null,"Health monitoring",-1))])),_:1}),(0,n.bF)((0,k.R1)(je.ct),{index:"/health-knowledge"},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(Qe.tk),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.f5b))])),_:1}),a[4]||(a[4]=(0,n.Lk)("span",null,"Health Knowledge",-1))])),_:1}),(0,n.bF)((0,k.R1)(je.ct),{index:"/user-settings"},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(Qe.tk),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.B5R))])),_:1}),a[5]||(a[5]=(0,n.Lk)("span",null,"User Settings",-1))])),_:1}),(0,n.bF)((0,k.R1)(je.ct),{index:"/ai-consultation"},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(Qe.tk),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.wUE))])),_:1}),a[6]||(a[6]=(0,n.Lk)("span",null,"AI Consultation",-1))])),_:1}),(0,n.bF)((0,k.R1)(je.ct),{index:"/diet-management"},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(Qe.tk),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.NoT))])),_:1}),a[7]||(a[7]=(0,n.Lk)("span",null,"Diet Management",-1))])),_:1}),(0,n.bF)((0,k.R1)(je.ct),{index:"/sport-management"},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(Qe.tk),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.mP9))])),_:1}),a[8]||(a[8]=(0,n.Lk)("span",null,"Sports Management",-1))])),_:1})])),_:1})]),r.value?((0,n.uX)(),(0,n.CE)("div",la,[(0,n.bF)((0,k.R1)(Ge.zv),{size:40,src:r.value.avatar},null,8,["src"]),(0,n.Lk)("span",null,(0,p.v_)(r.value.username),1)])):(0,n.Q3)("",!0)])),_:1}),(0,n.Lk)("div",ta,[a[17]||(a[17]=(0,n.Lk)("div",{class:"pHeader"},[(0,n.Lk)("div",{class:"hTitle"},[(0,n.Lk)("h1",null,"Health Knowledge Details"),(0,n.Lk)("span",{class:"sub-title"},"View complete health information")])],-1)),(0,n.bF)((0,k.R1)(ie.Ik),{class:"health-knowledge-card"},{header:(0,n.k6)((()=>[(0,n.Lk)("div",na,[a[10]||(a[10]=(0,n.eW)(" Health Knowledge Details ")),(0,n.bF)((0,k.R1)(G.S2),{type:"info",size:"small",onClick:S},{default:(0,n.k6)((()=>[w.value?((0,n.uX)(),(0,n.Wv)((0,k.R1)(Qe.tk),{key:0},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.EvL))])),_:1})):((0,n.uX)(),(0,n.Wv)((0,k.R1)(Qe.tk),{key:1},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.tmR))])),_:1})),(0,n.eW)(" "+(0,p.v_)(w.value?"Unmute":"Mute"),1)])),_:1})])])),default:(0,n.k6)((()=>[d.value?((0,n.uX)(),(0,n.CE)("div",oa,[(0,n.bF)((0,k.R1)(ce.d1),{rows:10,animated:""})])):c.value?((0,n.uX)(),(0,n.Wv)((0,k.R1)(ie.Ik),{key:1,class:"error-message"},{default:(0,n.k6)((()=>a[11]||(a[11]=[(0,n.eW)(" Failed to load health knowledge details, please try again later. ")]))),_:1})):((0,n.uX)(),(0,n.CE)("div",ra,[(0,n.Lk)("div",sa,[(0,n.Lk)("div",ua,[a[12]||(a[12]=(0,n.Lk)("span",null,"Volume:",-1)),(0,n.bF)((0,k.R1)(Ye.B8),{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value=e),min:0,max:1,step:.01,style:{width:"150px","margin-left":"10px"},onInput:I},null,8,["modelValue"]),(0,n.Lk)("span",null,(0,p.v_)(_.value.toFixed(2)),1)]),(0,n.Lk)("div",ia,[a[13]||(a[13]=(0,n.Lk)("span",null,"Voice Tone:",-1)),(0,n.bF)((0,k.R1)(Je.AV),{modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value=e),placeholder:"Select Voice Tone",size:"small",style:{width:"150px","margin-left":"10px"},"value-key":"name"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(f.value,(e=>((0,n.uX)(),(0,n.Wv)((0,k.R1)(Je.P9),{key:e.name,label:`${e.name} (${e.lang})`,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,n.Lk)("div",da,[(0,n.bF)((0,k.R1)(G.S2),{type:"primary",size:"small",onClick:A},{default:(0,n.k6)((()=>a[14]||(a[14]=[(0,n.eW)(" Replay ")]))),_:1})])]),(0,n.Lk)("h2",null,(0,p.v_)(i.value.title),1),a[16]||(a[16]=(0,n.Lk)("hr",{class:"gray-hr"},null,-1)),(0,n.Lk)("div",ca,[a[15]||(a[15]=(0,n.Lk)("span",null,"Label: ",-1)),(0,n.bF)((0,k.R1)(Ze.u),{size:"small"},{default:(0,n.k6)((()=>[(0,n.eW)((0,p.v_)(i.value.category),1)])),_:1}),(0,n.Lk)("span",ma,"Author: "+(0,p.v_)(i.value.author),1),(0,n.Lk)("span",ka,"Release time: "+(0,p.v_)(i.value.formattedTime),1)]),(0,n.Lk)("div",{innerHTML:h.value},null,8,pa),i.value.image_url?((0,n.uX)(),(0,n.CE)("div",va,[(0,n.Lk)("img",{src:i.value.image_url,alt:"Health Knowledge Image",class:"knowledge-image"},null,8,ga)])):(0,n.Q3)("",!0),E.value?((0,n.uX)(),(0,n.CE)("div",ha,[(0,n.Lk)("iframe",{src:E.value,scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",class:"knowledge-video"},null,8,ba)])):(0,n.Q3)("",!0)]))])),_:1})])])):((0,n.uX)(),(0,n.CE)("div",fa,[a[19]||(a[19]=(0,n.Lk)("h1",null,"Please log in first",-1)),(0,n.bF)((0,k.R1)(G.S2),{type:"primary",onClick:s},{default:(0,n.k6)((()=>a[18]||(a[18]=[(0,n.eW)("Go login")]))),_:1})]))}};const Fa=(0,s.A)(ya,[["__scopeId","data-v-0bd99ec0"]]);var _a=Fa;const La={key:0,class:"page"},wa={class:"menuWrap"},Ra={key:0,class:"uInfo"},Ca={class:"main"},xa={key:1};var Va={__name:"UserSettingsPage",setup(e){const a=(0,v.Pj)(),l=(0,m.rd)(),t=(0,n.EW)((()=>a.getters.isLoggedIn)),o=(0,n.EW)((()=>a.getters.userInfo)),r=()=>{l.push("/")},s=(0,k.KR)("http://localhost:3060/api/homecare/users"),u=(0,k.KR)("http://localhost:3060/api/homecare/users"),i=(0,k.KR)(null),d=(0,k.Kh)({username:"",email:"",phone:"",user_type:"",first_name:"",last_name:"",date_of_birth:"",gender:"",address:"",city:"",state:"",zip_code:"",emergency_contact_name:"",emergency_contact_phone:"",allergies:""}),c=(0,k.Kh)({username:[{required:!0,message:"Please input username",trigger:"blur"}],email:[{required:!0,message:"Please input email",trigger:"blur"},{type:"email",message:"Please input a valid email address",trigger:["blur","change"]}],phone:[{required:!0,message:"Please input phone number",trigger:"blur"}],first_name:[{required:!0,message:"Please input first name",trigger:"blur"}],last_name:[{required:!0,message:"Please input last name",trigger:"blur"}],date_of_birth:[{required:!0,message:"Please select date of birth",trigger:"change"}],gender:[{required:!0,message:"Please select gender",trigger:"change"}],address:[{required:!0,message:"Please input address",trigger:"blur"}],city:[{required:!0,message:"Please input city",trigger:"blur"}],state:[{required:!0,message:"Please input state",trigger:"blur"}],zip_code:[{required:!0,message:"Please input zip code",trigger:"blur"}],emergency_contact_name:[{required:!0,message:"Please input emergency contact name",trigger:"blur"}],emergency_contact_phone:[{required:!0,message:"Please input emergency contact phone",trigger:"blur"}],allergies:[{required:!0,message:"Please input allergies",trigger:"blur"}]}),h=async()=>{i.value.validate((async e=>{if(!e)return console.log("Form validation failed"),!1;try{const e=localStorage.getItem("token")||a.getters.token,l=await fetch(`${u.value}/${a.getters.userInfo.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(d)}),t=await l.json();t.success?(J.nk.success("Personal information updated successfully"),a.commit("setUserInfo",{...a.getters.userInfo,...d})):J.nk.error(t.message||"Failed to update personal information")}catch(l){console.error("Failed to update personal information:",l),J.nk.error("Network error, please try again later")}}))},b=async()=>{try{const e=localStorage.getItem("token")||a.getters.token,l=a.getters.userInfo.id,t=await fetch(`${s.value}/${l}`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();n.success&&n.data?(n.data.date_of_birth&&(d.date_of_birth=n.data.date_of_birth),Object.assign(d,n.data),console.log("profileData after API call:",d)):J.nk.error(n.message||"Failed to get user information")}catch(e){console.error("Failed to get user information:",e),J.nk.error("Network error, please try again later")}};return(0,n.sV)((async()=>{b()})),(e,a)=>{const l=(0,n.g2)("el-icon"),s=(0,n.g2)("el-menu-item"),u=(0,n.g2)("el-menu"),m=(0,n.g2)("el-avatar"),v=(0,n.g2)("el-aside"),f=(0,n.g2)("el-input"),y=(0,n.g2)("el-form-item"),F=(0,n.g2)("el-date-picker"),_=(0,n.g2)("el-option"),L=(0,n.g2)("el-select"),w=(0,n.g2)("el-button"),R=(0,n.g2)("el-form"),C=(0,n.g2)("el-card");return t.value?((0,n.uX)(),(0,n.CE)("div",La,[(0,n.bF)(v,{width:"220px",class:"side"},{default:(0,n.k6)((()=>[a[23]||(a[23]=(0,n.Lk)("div",{class:"sTitle"},"Smart Home Elderly Care System",-1)),(0,n.Lk)("div",wa,[(0,n.bF)(u,{"default-active":"/user-settings",class:"el-menu-1",router:!0},{default:(0,n.k6)((()=>[(0,n.bF)(s,{index:"/home"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.ODD))])),_:1}),a[16]||(a[16]=(0,n.Lk)("span",null,"Dashboard",-1))])),_:1}),(0,n.bF)(s,{index:"/health-monitoring"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.VAG))])),_:1}),a[17]||(a[17]=(0,n.Lk)("span",null,"Health monitoring",-1))])),_:1}),(0,n.bF)(s,{index:"/health-knowledge"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.f5b))])),_:1}),a[18]||(a[18]=(0,n.Lk)("span",null,"Health Knowledge",-1))])),_:1}),(0,n.bF)(s,{index:"/user-settings"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.B5R))])),_:1}),a[19]||(a[19]=(0,n.Lk)("span",null,"User Settings",-1))])),_:1}),(0,n.bF)(s,{index:"/ai-consultation"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.wUE))])),_:1}),a[20]||(a[20]=(0,n.Lk)("span",null,"AI Consultation",-1))])),_:1}),(0,n.bF)(s,{index:"/diet-management"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.NoT))])),_:1}),a[21]||(a[21]=(0,n.Lk)("span",null,"Diet Management",-1))])),_:1}),(0,n.bF)(s,{index:"/sport-management"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.mP9))])),_:1}),a[22]||(a[22]=(0,n.Lk)("span",null,"Sports Management",-1))])),_:1})])),_:1})]),o.value?((0,n.uX)(),(0,n.CE)("div",Ra,[(0,n.bF)(m,{size:40,src:o.value.avatar},null,8,["src"]),(0,n.Lk)("span",null,(0,p.v_)(o.value.username),1)])):(0,n.Q3)("",!0)])),_:1}),(0,n.Lk)("div",Ca,[a[26]||(a[26]=(0,n.Lk)("div",{class:"pHeader"},[(0,n.Lk)("div",{class:"hTitle"},[(0,n.Lk)("h1",null,"Personal Information"),(0,n.Lk)("span",{class:"sub-title"},"Update your personal details")])],-1)),(0,n.bF)(C,{class:"info-card"},{default:(0,n.k6)((()=>[(0,n.bF)(R,{ref_key:"profileForm",ref:i,model:d,rules:c,"label-width":"180px"},{default:(0,n.k6)((()=>[(0,n.bF)(y,{label:"Username",prop:"username"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:d.username,"onUpdate:modelValue":a[0]||(a[0]=e=>d.username=e)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"Email",prop:"email"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:d.email,"onUpdate:modelValue":a[1]||(a[1]=e=>d.email=e)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"Phone Number",prop:"phone"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:d.phone,"onUpdate:modelValue":a[2]||(a[2]=e=>d.phone=e)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"First Name",prop:"first_name"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:d.first_name,"onUpdate:modelValue":a[3]||(a[3]=e=>d.first_name=e)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"Last Name",prop:"last_name"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:d.last_name,"onUpdate:modelValue":a[4]||(a[4]=e=>d.last_name=e)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"Date of Birth",prop:"date_of_birth"},{default:(0,n.k6)((()=>[(0,n.bF)(F,{modelValue:d.date_of_birth,"onUpdate:modelValue":a[5]||(a[5]=e=>d.date_of_birth=e),type:"date",placeholder:"Select Date","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"Gender",prop:"gender"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{modelValue:d.gender,"onUpdate:modelValue":a[6]||(a[6]=e=>d.gender=e),placeholder:"Select Gender",style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)(_,{label:"Male",value:"male"}),(0,n.bF)(_,{label:"Female",value:"female"}),(0,n.bF)(_,{label:"Other",value:"other"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"Address",prop:"address"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{type:"textarea",modelValue:d.address,"onUpdate:modelValue":a[7]||(a[7]=e=>d.address=e)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"City",prop:"city"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:d.city,"onUpdate:modelValue":a[8]||(a[8]=e=>d.city=e)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"State",prop:"state"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:d.state,"onUpdate:modelValue":a[9]||(a[9]=e=>d.state=e)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"Zip Code",prop:"zip_code"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:d.zip_code,"onUpdate:modelValue":a[10]||(a[10]=e=>d.zip_code=e)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"Emergency Contact Name",prop:"emergency_contact_name"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:d.emergency_contact_name,"onUpdate:modelValue":a[11]||(a[11]=e=>d.emergency_contact_name=e)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"Emergency Contact Phone",prop:"emergency_contact_phone"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{modelValue:d.emergency_contact_phone,"onUpdate:modelValue":a[12]||(a[12]=e=>d.emergency_contact_phone=e)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,{label:"Allergies",prop:"allergies"},{default:(0,n.k6)((()=>[(0,n.bF)(f,{type:"textarea",modelValue:d.allergies,"onUpdate:modelValue":a[13]||(a[13]=e=>d.allergies=e)},null,8,["modelValue"])])),_:1}),(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(w,{type:"primary",onClick:a[14]||(a[14]=e=>h())},{default:(0,n.k6)((()=>a[24]||(a[24]=[(0,n.eW)(" Save ")]))),_:1}),(0,n.bF)(w,{onClick:a[15]||(a[15]=e=>b())},{default:(0,n.k6)((()=>a[25]||(a[25]=[(0,n.eW)("Reset")]))),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1})])])):((0,n.uX)(),(0,n.CE)("div",xa,[a[28]||(a[28]=(0,n.Lk)("h1",null,"Please Login",-1)),(0,n.bF)(w,{type:"primary",onClick:r},{default:(0,n.k6)((()=>a[27]||(a[27]=[(0,n.eW)("Go to Login")]))),_:1})]))}}};const Sa=(0,s.A)(Va,[["__scopeId","data-v-2c9bd8fe"]]);var Ia=Sa;const Aa={key:0,class:"page"},Ea={class:"menuWrap"},Ka={key:0,class:"uInfo"},Pa={class:"main"},Wa={class:"card-header"},Ta={class:"chat-area"},Xa={class:"message-content"},Da={key:0,class:"loading-message message-item assistant"},Ua={class:"input-area"},Ha={class:"speech-controls"},Ba={class:"control-item"},qa={class:"control-item"},Na={class:"control-item"},za={key:0,class:"error-message"},Ma={key:1};var Oa={__name:"AIConsultationPage",setup(e){const a=(0,m.rd)(),l=(0,v.Pj)(),o=(0,n.EW)((()=>l.getters.isLoggedIn)),r=(0,n.EW)((()=>l.getters.userInfo)),s=()=>{a.push("/")},u=(0,k.KR)(""),i=(0,k.KR)([]),d=(0,k.KR)(!1),c=(0,k.KR)(null),h=(0,k.KR)(null),b=(0,k.KR)("http://localhost:3060/api/homecare2/ai-consultation"),f=window.speechSynthesis,y=(0,k.KR)([]),F=(0,k.KR)(null),_=(0,k.KR)(!1),L=(0,k.KR)(1);let w=null;const R=(0,k.KR)(!1),C=(0,k.KR)(1),x=(0,k.KR)(null),V=(0,k.KR)(!1),S=(0,k.KR)(""),I=(0,k.KR)(null),A=(0,k.KR)("zh-CN"),E=()=>{y.value=f.getVoices(),y.value.length>0&&(F.value=y.value.find((e=>"zh-CN"===e.lang))||y.value[0])},K=e=>{if(!f||_.value)return;V.value&&U();const a=new SpeechSynthesisUtterance(e);a.voice=F.value,a.pitch=1,a.rate=1,a.volume=L.value,w=a,a.onstart=()=>{_.value=!0},a.onend=()=>{_.value=!1,w=null},a.onerror=e=>{console.error("Speech synthesis error:",e),"canceled"!==e.error&&J.nk.error("Speech playback failed, please check browser settings or try again."),_.value=!1,w=null},f.speak(a)},P=()=>{f&&_.value&&(w&&(w.onerror=null),f.cancel(),_.value=!1,w=null)},W=()=>{R.value?(L.value=C.value,R.value=!1):(C.value=L.value,L.value=0,R.value=!0,P())},T=e=>{if(e>0?(R.value=!1,C.value=e):R.value=!0,_.value&&w){const e=w.text;P(),setTimeout((()=>{K(e)}),200)}},X=()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return I.value="Your browser does not support speech recognition.",void J.nk.warning(I.value);x.value&&(x.value.stop(),x.value=null),x.value=new e,x.value.lang=A.value,x.value.continuous=!1,x.value.interimResults=!0,x.value.onresult=e=>{let a="",l="";for(let t=e.resultIndex;t<e.results.length;++t){const n=e.results[t];n.isFinal?a+=n[0].transcript:l+=n[0].transcript}u.value=a||l},x.value.onerror=e=>{console.error("Speech recognition error:",e.error),"aborted"!==e.error&&(I.value=`Speech recognition error: ${e.error}`,J.nk.error(I.value)),V.value=!1},x.value.onend=()=>{V.value=!1,console.log("Speech recognition ended."),u.value.trim()&&!d.value&&H()},x.value.onstart=()=>{V.value=!0,console.log("Speech recognition started."),I.value=null}},D=()=>{x.value?V.value?U():(_.value&&P(),S.value="",u.value="",x.value.start()):J.nk.warning("Speech recognition feature is not available.")},U=()=>{x.value&&V.value&&(x.value.stop(),V.value=!1)};f&&(f.onvoiceschanged=E),(0,n.wB)(y,(e=>{e.length>0&&!F.value&&(F.value=e.find((e=>"zh-CN"===e.lang))||e[0])}),{immediate:!0}),(0,n.wB)(A,((e,a)=>{e!==a&&X()}));const H=async()=>{if(!u.value.trim()||d.value)return;const e=u.value;u.value="",i.value.push({role:"user",content:e}),B(),d.value=!0,c.value=null;try{const a=localStorage.getItem("token"),l=await $.A.post(b.value,{question:e},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(l.data.success){const e=l.data.response;i.value.push({role:"assistant",content:e}),B(),R.value||K(e)}else c.value=l.data.message||"AI consultation failed.",J.nk.error(c.value),i.value.push({role:"error",content:c.value}),B()}catch(a){console.error("An error occurred during AI consultation:",a);let e="A network error occurred during AI consultation, please try again later.";a.response&&a.response.data&&a.response.data.message&&(e=a.response.data.message),c.value=e,J.nk.error(c.value),i.value.push({role:"error",content:c.value}),B()}finally{d.value=!1}},B=()=>{(0,n.dY)((()=>{h.value&&(h.value.scrollTop=h.value.scrollHeight)}))};(0,n.sV)((()=>{f?E():J.nk.warning("Your browser does not support speech playback."),X()}));g.EvL,g.VolumeUp,g.tmR;return(e,a)=>{const l=(0,n.g2)("el-icon"),m=(0,n.g2)("el-menu-item"),v=(0,n.g2)("el-menu"),b=(0,n.g2)("el-avatar"),f=(0,n.g2)("el-aside"),_=(0,n.g2)("el-input"),w=(0,n.g2)("el-card");return o.value?((0,n.uX)(),(0,n.CE)("div",Aa,[(0,n.bF)(f,{width:"220px",class:"side"},{default:(0,n.k6)((()=>[a[11]||(a[11]=(0,n.Lk)("div",{class:"sTitle"},"Smart Home Elderly Care System",-1)),(0,n.Lk)("div",Ea,[(0,n.bF)(v,{"default-active":"/ai-consultation",class:"el-menu-1",router:!0},{default:(0,n.k6)((()=>[(0,n.bF)(m,{index:"/home"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.ODD))])),_:1}),a[4]||(a[4]=(0,n.Lk)("span",null,"Dashboard",-1))])),_:1}),(0,n.bF)(m,{index:"/health-monitoring"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.VAG))])),_:1}),a[5]||(a[5]=(0,n.Lk)("span",null,"Health monitoring",-1))])),_:1}),(0,n.bF)(m,{index:"/health-knowledge"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.f5b))])),_:1}),a[6]||(a[6]=(0,n.Lk)("span",null,"Health Knowledge",-1))])),_:1}),(0,n.bF)(m,{index:"/user-settings"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.B5R))])),_:1}),a[7]||(a[7]=(0,n.Lk)("span",null,"User Settings",-1))])),_:1}),(0,n.bF)(m,{index:"/ai-consultation"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.wUE))])),_:1}),a[8]||(a[8]=(0,n.Lk)("span",null,"AI Consultation",-1))])),_:1}),(0,n.bF)(m,{index:"/diet-management"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.NoT))])),_:1}),a[9]||(a[9]=(0,n.Lk)("span",null,"Diet Management",-1))])),_:1}),(0,n.bF)(m,{index:"/sport-management"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.mP9))])),_:1}),a[10]||(a[10]=(0,n.Lk)("span",null,"Sports Management",-1))])),_:1})])),_:1})]),r.value?((0,n.uX)(),(0,n.CE)("div",Ka,[(0,n.bF)(b,{size:40,src:r.value.avatar},null,8,["src"]),(0,n.Lk)("span",null,(0,p.v_)(r.value.username),1)])):(0,n.Q3)("",!0)])),_:1}),(0,n.Lk)("div",Pa,[a[18]||(a[18]=(0,n.Lk)("div",{class:"pHeader"},[(0,n.Lk)("div",{class:"hTitle"},[(0,n.Lk)("h1",null,"AI Consultation"),(0,n.Lk)("span",{class:"sub-title"},"Chat with AI for health advice")])],-1)),(0,n.bF)(w,{class:"ai-consultation-card"},{header:(0,n.k6)((()=>[(0,n.Lk)("div",Wa,[a[12]||(a[12]=(0,n.eW)(" Chat with your health assistant ")),(0,n.bF)((0,k.R1)(G.S2),{type:"info",size:"small",onClick:W},{default:(0,n.k6)((()=>[R.value?((0,n.uX)(),(0,n.Wv)(l,{key:0},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.tmR))])),_:1})):((0,n.uX)(),(0,n.Wv)(l,{key:1},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.EvL))])),_:1})),(0,n.eW)(" "+(0,p.v_)(R.value?"Unmute":"Mute"),1)])),_:1})])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",Ta,[(0,n.Lk)("div",{class:"messages-list",ref_key:"messagesList",ref:h},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.value,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:(0,p.C4)(["message-item",e.role])},[(0,n.Lk)("div",Xa,[(0,n.Lk)("p",null,(0,p.v_)(e.content),1)])],2)))),128)),d.value?((0,n.uX)(),(0,n.CE)("div",Da,a[13]||(a[13]=[(0,n.Lk)("div",{class:"message-content"},[(0,n.Lk)("p",null,"AI is thinking...")],-1)]))):(0,n.Q3)("",!0)],512),(0,n.Lk)("div",Ua,[(0,n.bF)(_,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),rows:2,type:"textarea",placeholder:"Enter your message...",onKeyup:(0,t.jR)(H,["enter"]),disabled:d.value||V.value},null,8,["modelValue","disabled"]),(0,n.bF)((0,k.R1)(G.S2),{type:"danger",onClick:D,loading:V.value,disabled:d.value||!x.value},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.tmR))])),_:1}),(0,n.eW)(" "+(0,p.v_)(V.value?"Stop Recording":"Voice Input"),1)])),_:1},8,["loading","disabled"]),(0,n.bF)((0,k.R1)(G.S2),{type:"primary",onClick:H,loading:d.value,disabled:!u.value.trim()||d.value||V.value},{default:(0,n.k6)((()=>a[14]||(a[14]=[(0,n.eW)(" Send ")]))),_:1},8,["loading","disabled"])])]),(0,n.Lk)("div",Ha,[(0,n.Lk)("div",Ba,[a[15]||(a[15]=(0,n.Lk)("span",null,"Volume:",-1)),(0,n.bF)((0,k.R1)(Ye.B8),{modelValue:L.value,"onUpdate:modelValue":a[1]||(a[1]=e=>L.value=e),min:0,max:1,step:.01,style:{width:"150px","margin-left":"10px"},onInput:T},null,8,["modelValue"]),(0,n.Lk)("span",null,(0,p.v_)(L.value.toFixed(2)),1)]),(0,n.Lk)("div",qa,[a[16]||(a[16]=(0,n.Lk)("span",null,"Voice Tone:",-1)),(0,n.bF)((0,k.R1)(Je.AV),{modelValue:F.value,"onUpdate:modelValue":a[2]||(a[2]=e=>F.value=e),placeholder:"Select Voice Tone",size:"small",style:{width:"150px","margin-left":"10px"},"value-key":"name"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(y.value,(e=>((0,n.uX)(),(0,n.Wv)((0,k.R1)(Je.P9),{key:e.name,label:`${e.name} (${e.lang})`,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,n.Lk)("div",Na,[a[17]||(a[17]=(0,n.Lk)("span",null,"Recognition Language:",-1)),(0,n.bF)((0,k.R1)(Je.AV),{modelValue:A.value,"onUpdate:modelValue":a[3]||(a[3]=e=>A.value=e),placeholder:"Select Language",size:"small",style:{width:"120px","margin-left":"10px"}},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(Je.P9),{label:"Chinese",value:"zh-CN"}),(0,n.bF)((0,k.R1)(Je.P9),{label:"English",value:"en-US"})])),_:1},8,["modelValue"])])]),c.value||I.value?((0,n.uX)(),(0,n.CE)("div",za,(0,p.v_)(c.value||I.value),1)):(0,n.Q3)("",!0)])),_:1})])])):((0,n.uX)(),(0,n.CE)("div",Ma,[a[20]||(a[20]=(0,n.Lk)("h1",null,"Please log in",-1)),(0,n.bF)((0,k.R1)(G.S2),{type:"primary",onClick:s},{default:(0,n.k6)((()=>a[19]||(a[19]=[(0,n.eW)("Go to Login")]))),_:1})]))}}};const $a=(0,s.A)(Oa,[["__scopeId","data-v-dcf41d56"]]);var ja=$a,Qa=(l(8237),l(2933)),Ga=l(1418),Ya=l(7377);const Ja={key:0,class:"page"},Za={class:"menuWrap"},el={key:0,class:"uInfo"},al={class:"main"},ll={class:"cooking-input-area"},tl={key:0,class:"loading-area"},nl={key:1,class:"recommendation-area"},ol=["innerHTML"],rl={class:"menu-section"},sl={key:0},ul={key:2,class:"dish-list"},il=["src"],dl={class:"dish-info"},cl={class:"dish-price"},ml={class:"table-container"},kl={class:"cart-summary"},pl={class:"order-actions"},vl={key:0},gl={key:2,class:"table-container"},hl={key:1},bl={key:0},fl={class:"dish-price"},yl={class:"quantity-control"},Fl={class:"dialog-footer"};var _l={__name:"DietManagementPage",setup(e){const a=(0,m.lq)(),l=(0,m.rd)(),o=(0,v.Pj)(),r=(0,n.EW)((()=>o.getters.isLoggedIn)),s=(0,n.EW)((()=>o.getters.userInfo)),u=()=>{l.push("/")},i=(0,k.KR)(null),d=(0,k.KR)(""),c=(0,k.KR)(null),h=(0,k.KR)(!1),b=(0,k.KR)(null),f=(0,n.EW)((()=>c.value?c.value.replace(/\n/g,"<br>"):"")),y=async()=>{if(!d.value.trim()||h.value)return;const e=d.value;h.value=!0,b.value=null,c.value=null;try{const a=localStorage.getItem("token"),l=await $.A.post("http://localhost:3060/api/homecare2/ai-consultation",{question:e},{headers:{Authorization:`Bearer ${a}`}});l.data.success?c.value=l.data.response:(b.value=l.data.message||"Failed to get recommendation",J.nk.error(b.value))}catch(a){console.error("Error fetching cooking recommendation:",a),b.value="Network error, please try again later.",J.nk.error(b.value)}finally{h.value=!1}},F=(0,k.KR)([]),_=(0,k.KR)(!1),L=(0,k.KR)(null),w=(0,k.KR)([]),R=(0,k.KR)({deliveryAddress:""}),C=(0,k.KR)(!1),x=(0,k.KR)(null),V=(0,k.KR)(null),S=(0,k.KR)([]),I=(0,k.KR)(!1),A=(0,k.KR)(null),E=(0,k.KR)(!1),K=(0,k.KR)(null),P=(0,n.EW)((()=>w.value.reduce(((e,a)=>e+(a.price||0)*(a.quantity||0)),0)));(0,n.sV)((()=>{W(),T(),q()}));const W=async()=>{_.value=!0,L.value=null;try{const e=localStorage.getItem("token");if(!e)return L.value="Please log in to view the menu.",J.nk.warning(L.value),void(_.value=!1);const a=await $.A.get("http://localhost:3060/api/homecare2/dishes",{headers:{Authorization:`Bearer ${e}`}});a.data.success?(0,n.dY)((()=>{F.value=a.data.dishes.map((e=>({...e,id:e.dish_id,name:e.name,price:parseFloat(e.price),description:e.description,category:e.category,image_url:e.image_url})))})):(L.value=a.data.message||"Failed to get menu",J.nk.error(L.value))}catch(e){console.error("Error fetching menu:",e),e.response&&401===e.response.status?(L.value="Authentication required. Please log in.",J.nk.error(L.value)):(L.value="Network error, please try again later.",J.nk.error(L.value))}finally{_.value=!1}},T=async()=>{I.value=!0,A.value=null;try{const e=localStorage.getItem("token");if(!e)return A.value="Please log in to view historical orders.",J.nk.warning(A.value),void(I.value=!1);const a=await $.A.get("http://localhost:3060/api/homecare2/history",{headers:{Authorization:`Bearer ${e}`}});a.data.success?(0,n.dY)((()=>{S.value=a.data.orders})):(A.value=a.data.message||"Failed to get historical orders",J.nk.error(A.value))}catch(e){console.error("Error fetching historical orders:",e),e.response&&401===e.response.status?(A.value="Authentication required. Please log in.",J.nk.error(A.value)):(A.value="Network error, please try again later.",J.nk.error(A.value))}finally{I.value=!1}},X=e=>{K.value={...e,quantity:1},E.value=!0},D=()=>{if(!K.value||K.value.quantity<=0)return void J.nk.warning("Please select a valid quantity.");const e=w.value.find((e=>e.id===K.value.id));e?e.quantity+=K.value.quantity:w.value.push({id:K.value.id,name:K.value.name,price:K.value.price,quantity:K.value.quantity}),J.nk.success(`${K.value.name} added to cart.`),E.value=!1,K.value=null},U=e=>{w.value=w.value.filter((a=>a.id!==e.id)),J.nk.success(`${e.name} removed from cart.`)},H=async()=>{if(0!==w.value.length)if(R.value.deliveryAddress){C.value=!0,x.value=null,V.value=null;try{const e=localStorage.getItem("token"),a=await $.A.post("http://localhost:3060/api/homecare2/orders",{items:w.value.map((e=>({dishId:e.id,quantity:e.quantity}))),deliveryAddress:R.value.deliveryAddress},{headers:{Authorization:`Bearer ${e}`}});a.data.success?(J.nk.success("Order created successfully, opening payment window..."),V.value={orderId:a.data.orderId,totalAmount:a.data.totalAmount},w.value=[],R.value.deliveryAddress="",B(a.data.paymentInfo),T()):(x.value=a.data.message||"Order creation failed.",J.nk.error(x.value))}catch(e){console.error("Error creating order:",e);let a="Network error, please try again later.";e.response&&e.response.data&&e.response.data.message&&(a=e.response.data.message),x.value=a,J.nk.error(a)}finally{C.value=!1}}else J.nk.warning("Please enter a delivery address.");else J.nk.warning("Cart is empty, please select some dishes.")},B=e=>{if(!e)return void J.nk.error("Could not get payment information, please try again.");const a=window.open("","_blank");a?(a.document.write(e),a.document.close()):J.nk.error("Could not open payment window, please check browser settings (e.g., pop-up blocker).")},q=async()=>{const e=a.query,t=e.out_trade_no;t&&(console.log("Detected payment return from Alipay. Order ID:",t),l.replace({query:{}}),i.value={title:"Payment Processing",type:"info",description:`The system has detected that the order ${t} payment has been success. Please double check your order history for the final status.`},setTimeout((()=>{T()}),3e3))},N=()=>{i.value=null},z=e=>{"pending_payment"===e.status?Qa.s.confirm(`Are you sure you want to delete order ${e.order_id}?`,"Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}).then((()=>{M(e.order_id)})).catch((()=>{(0,J.nk)({type:"info",message:"Delete canceled"})})):J.nk.warning('Only orders with status "Pending Payment" can be deleted.')},M=async e=>{try{const a=localStorage.getItem("token"),l=await $.A.delete(`http://localhost:3060/api/homecare2/orders/${e}`,{headers:{Authorization:`Bearer ${a}`}});l.data.success?(J.nk.success(`Order ${e} deleted successfully.`),T()):J.nk.error(l.data.message||"Failed to delete order.")}catch(a){console.error("Error deleting order:",a);let e="Network error, please try again later.";a.response&&a.response.data&&a.response.data.message&&(e=a.response.data.message),J.nk.error(e)}};return(e,a)=>{const l=(0,n.g2)("el-icon"),o=(0,n.g2)("el-menu-item"),m=(0,n.g2)("el-menu"),v=(0,n.g2)("el-avatar"),W=(0,n.g2)("el-aside"),T=(0,n.g2)("el-input"),B=(0,n.g2)("el-button"),q=(0,n.g2)("el-skeleton"),M=(0,n.g2)("el-card"),O=(0,n.g2)("el-form-item"),$=(0,n.g2)("el-form");return(0,n.uX)(),(0,n.CE)("div",null,[r.value?((0,n.uX)(),(0,n.CE)("div",Ja,[(0,n.bF)(W,{width:"220px",class:"side"},{default:(0,n.k6)((()=>[a[12]||(a[12]=(0,n.Lk)("div",{class:"sTitle"},"Smart Home Elderly Care System",-1)),(0,n.Lk)("div",Za,[(0,n.bF)(m,{"default-active":"/diet-management",class:"el-menu-1",router:!0},{default:(0,n.k6)((()=>[(0,n.bF)(o,{index:"/home"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.ODD))])),_:1}),a[5]||(a[5]=(0,n.Lk)("span",null,"Dashboard",-1))])),_:1}),(0,n.bF)(o,{index:"/health-monitoring"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.VAG))])),_:1}),a[6]||(a[6]=(0,n.Lk)("span",null,"Health monitoring",-1))])),_:1}),(0,n.bF)(o,{index:"/health-knowledge"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.f5b))])),_:1}),a[7]||(a[7]=(0,n.Lk)("span",null,"Health Knowledge",-1))])),_:1}),(0,n.bF)(o,{index:"/user-settings"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.B5R))])),_:1}),a[8]||(a[8]=(0,n.Lk)("span",null,"User Settings",-1))])),_:1}),(0,n.bF)(o,{index:"/ai-consultation"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.wUE))])),_:1}),a[9]||(a[9]=(0,n.Lk)("span",null,"AI Consultation",-1))])),_:1}),(0,n.bF)(o,{index:"/diet-management"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.NoT))])),_:1}),a[10]||(a[10]=(0,n.Lk)("span",null,"Diet Management",-1))])),_:1}),(0,n.bF)(o,{index:"/sport-management"},{default:(0,n.k6)((()=>[(0,n.bF)(l,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.mP9))])),_:1}),a[11]||(a[11]=(0,n.Lk)("span",null,"Sports Management",-1))])),_:1})])),_:1})]),s.value?((0,n.uX)(),(0,n.CE)("div",el,[(0,n.bF)(v,{size:40,src:s.value.avatar},null,8,["src"]),(0,n.Lk)("span",null,(0,p.v_)(s.value.username),1)])):(0,n.Q3)("",!0)])),_:1}),(0,n.Lk)("div",al,[a[25]||(a[25]=(0,n.Lk)("div",{class:"pHeader"},[(0,n.Lk)("div",{class:"hTitle"},[(0,n.Lk)("h1",null,"Cooking & Ordering Services"),(0,n.Lk)("span",{class:"sub-title"},"Manage your meals with AI recommendations and canteen orders")])],-1)),i.value?((0,n.uX)(),(0,n.Wv)((0,k.R1)(me.KR),{key:0,title:i.value.title,type:i.value.type,description:i.value.description,"show-icon":"",closable:"",onClose:N,style:{"margin-bottom":"20px"}},null,8,["title","type","description"])):(0,n.Q3)("",!0),(0,n.bF)(M,{class:"self-cooking-card"},{header:(0,n.k6)((()=>a[13]||(a[13]=[(0,n.Lk)("div",{class:"card-header"},"Self Cooking - Get AI Recommendations",-1)]))),default:(0,n.k6)((()=>[(0,n.Lk)("div",ll,[(0,n.bF)(T,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),rows:3,type:"textarea",placeholder:"Enter your cooking needs, e.g., 'Today I want to eat something light' or 'I have chicken and potatoes at home'...",onKeyup:(0,t.jR)(y,["enter"]),disabled:h.value},null,8,["modelValue","disabled"]),(0,n.bF)(B,{type:"primary",onClick:y,loading:h.value,disabled:!d.value.trim()||h.value},{default:(0,n.k6)((()=>a[14]||(a[14]=[(0,n.eW)(" Get Recommendation ")]))),_:1},8,["loading","disabled"])]),h.value?((0,n.uX)(),(0,n.CE)("div",tl,[(0,n.bF)(q,{rows:3,animated:""})])):c.value?((0,n.uX)(),(0,n.CE)("div",nl,[a[15]||(a[15]=(0,n.Lk)("h2",null,"Recommended Menu and Steps:",-1)),(0,n.Lk)("div",{innerHTML:f.value},null,8,ol)])):b.value?((0,n.uX)(),(0,n.Wv)((0,k.R1)(me.KR),{key:2,title:b.value,type:"error","show-icon":""},null,8,["title"])):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)(M,{class:"canteen-ordering-card"},{header:(0,n.k6)((()=>a[16]||(a[16]=[(0,n.Lk)("div",{class:"card-header"},"Canteen Ordering",-1)]))),default:(0,n.k6)((()=>[(0,n.Lk)("div",rl,[a[17]||(a[17]=(0,n.Lk)("h3",null,"Menu",-1)),_.value?((0,n.uX)(),(0,n.CE)("div",sl,[(0,n.bF)(q,{rows:4,animated:""})])):L.value?((0,n.uX)(),(0,n.Wv)((0,k.R1)(me.KR),{key:1,title:L.value,type:"error","show-icon":""},null,8,["title"])):((0,n.uX)(),(0,n.CE)("div",ul,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(F.value,(e=>((0,n.uX)(),(0,n.Wv)(M,{key:e.id,class:"dish-card",shadow:"hover",onClick:a=>X(e)},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{src:e.image_url,class:"dish-image",alt:"Dish Image"},null,8,il),(0,n.Lk)("div",dl,[(0,n.Lk)("h4",null,(0,p.v_)(e.name),1),(0,n.Lk)("p",null,(0,p.v_)(e.description),1),(0,n.Lk)("div",cl," ¥"+(0,p.v_)(null==e.price||isNaN(parseFloat(e.price))?"N/A":parseFloat(e.price).toFixed(2)),1)])])),_:2},1032,["onClick"])))),128))]))]),(0,n.bF)(M,{class:"cart-section",shadow:"never"},{header:(0,n.k6)((()=>a[18]||(a[18]=[(0,n.Lk)("div",{class:"card-header"},"Shopping Cart",-1)]))),default:(0,n.k6)((()=>[(0,n.Lk)("div",ml,[(0,n.bF)((0,k.R1)(ke.Up),{data:w.value,style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(ke.o8),{prop:"name",label:"Dish Name"}),(0,n.bF)((0,k.R1)(ke.o8),{label:"Quantity",width:"150"},{default:(0,n.k6)((e=>[(0,n.bF)((0,k.R1)(Ga.lq),{modelValue:e.row.quantity,"onUpdate:modelValue":a=>e.row.quantity=a,min:1,size:"small"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,n.bF)((0,k.R1)(ke.o8),{label:"Price",width:"100"},{default:(0,n.k6)((e=>[(0,n.eW)(" ¥"+(0,p.v_)(null==e.row.price||isNaN(parseFloat(e.row.price))?"N/A":parseFloat(e.row.price).toFixed(2)),1)])),_:1}),(0,n.bF)((0,k.R1)(ke.o8),{label:"Actions",width:"100"},{default:(0,n.k6)((e=>[(0,n.bF)(B,{type:"danger",size:"small",onClick:a=>U(e.row)},{default:(0,n.k6)((()=>a[19]||(a[19]=[(0,n.eW)("Remove")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),(0,n.Lk)("div",kl,"Total: ¥"+(0,p.v_)(P.value.toFixed(2)),1)])),_:1}),(0,n.bF)(M,{class:"order-section",shadow:"never"},{header:(0,n.k6)((()=>a[20]||(a[20]=[(0,n.Lk)("div",{class:"card-header"},"Delivery Information",-1)]))),default:(0,n.k6)((()=>[(0,n.bF)($,{model:R.value,"label-width":"120px"},{default:(0,n.k6)((()=>[(0,n.bF)(O,{label:"Delivery Address"},{default:(0,n.k6)((()=>[(0,n.bF)(T,{modelValue:R.value.deliveryAddress,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value.deliveryAddress=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,n.Lk)("div",pl,[(0,n.bF)(B,{type:"success",onClick:H,disabled:0===w.value.length||!R.value.deliveryAddress||C.value,loading:C.value},{default:(0,n.k6)((()=>[(0,n.eW)(" Place Order (¥"+(0,p.v_)(P.value.toFixed(2))+") ",1)])),_:1},8,["disabled","loading"])])])),_:1}),V.value?((0,n.uX)(),(0,n.Wv)(M,{key:0,class:"payment-card",shadow:"never"},{header:(0,n.k6)((()=>a[21]||(a[21]=[(0,n.Lk)("div",{class:"card-header"}," Order Placed - Opening Payment Window ",-1)]))),default:(0,n.k6)((()=>[(0,n.Lk)("p",null,"Order ID: "+(0,p.v_)(V.value.orderId),1),(0,n.Lk)("p",null," Total Amount: ¥"+(0,p.v_)(V.value.totalAmount?V.value.totalAmount.toFixed(2):"N/A"),1),a[22]||(a[22]=(0,n.Lk)("p",null,"Please check the new window for Alipay payment.",-1)),x.value?((0,n.uX)(),(0,n.Wv)((0,k.R1)(me.KR),{key:0,title:x.value,type:"error","show-icon":"",style:{"margin-top":"15px"}},null,8,["title"])):(0,n.Q3)("",!0)])),_:1})):x.value?((0,n.uX)(),(0,n.Wv)((0,k.R1)(me.KR),{key:1,title:x.value,type:"error","show-icon":"",style:{"margin-top":"15px"}},null,8,["title"])):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)(M,{class:"historical-orders-card"},{header:(0,n.k6)((()=>a[23]||(a[23]=[(0,n.Lk)("div",{class:"card-header"},"Historical Orders",-1)]))),default:(0,n.k6)((()=>[I.value?((0,n.uX)(),(0,n.CE)("div",vl,[(0,n.bF)(q,{rows:5,animated:""})])):A.value?((0,n.uX)(),(0,n.Wv)((0,k.R1)(me.KR),{key:1,title:A.value,type:"error","show-icon":""},null,8,["title"])):((0,n.uX)(),(0,n.CE)("div",gl,[(0,n.bF)((0,k.R1)(ke.Up),{data:S.value,style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(ke.o8),{prop:"order_id",label:"Order ID",width:"180"}),(0,n.bF)((0,k.R1)(ke.o8),{label:"Items"},{default:(0,n.k6)((e=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.row.items,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.dish_id},(0,p.v_)(e.dish_name)+" x "+(0,p.v_)(e.quantity)+" (¥"+(0,p.v_)(e.price?parseFloat(e.price).toFixed(2):"N/A")+") ",1)))),128))])),_:1}),(0,n.bF)((0,k.R1)(ke.o8),{prop:"total_amount",label:"Total Amount",width:"120"},{default:(0,n.k6)((e=>[(0,n.eW)(" ¥"+(0,p.v_)(e.row.total_amount?parseFloat(e.row.total_amount).toFixed(2):"N/A"),1)])),_:1}),(0,n.bF)((0,k.R1)(ke.o8),{prop:"status",label:"Status",width:"100"}),(0,n.bF)((0,k.R1)(ke.o8),{prop:"delivery_address",label:"Delivery Address",width:"180"}),(0,n.bF)((0,k.R1)(ke.o8),{prop:"created_at",label:"Order Time",width:"180"}),(0,n.bF)((0,k.R1)(ke.o8),{label:"Actions",width:"100"},{default:(0,n.k6)((e=>[(0,n.bF)(B,{type:"danger",size:"small",onClick:a=>z(e.row),disabled:"pending_payment"!==e.row.status,width:"180"},{default:(0,n.k6)((()=>a[24]||(a[24]=[(0,n.eW)(" Delete ")]))),_:2},1032,["onClick","disabled"])])),_:1})])),_:1},8,["data"])]))])),_:1})])])):((0,n.uX)(),(0,n.CE)("div",hl,[a[27]||(a[27]=(0,n.Lk)("h1",null,"Please log in",-1)),(0,n.bF)(B,{type:"primary",onClick:u},{default:(0,n.k6)((()=>a[26]||(a[26]=[(0,n.eW)("Go to Login")]))),_:1})])),(0,n.bF)((0,k.R1)(Ya.kZ),{modelValue:E.value,"onUpdate:modelValue":a[4]||(a[4]=e=>E.value=e),title:"Add to Cart",width:"30%",center:""},{footer:(0,n.k6)((()=>[(0,n.Lk)("span",Fl,[(0,n.bF)(B,{onClick:a[3]||(a[3]=e=>E.value=!1)},{default:(0,n.k6)((()=>a[29]||(a[29]=[(0,n.eW)("Cancel")]))),_:1}),(0,n.bF)(B,{type:"primary",onClick:D},{default:(0,n.k6)((()=>a[30]||(a[30]=[(0,n.eW)("Add to Cart")]))),_:1})])])),default:(0,n.k6)((()=>[K.value?((0,n.uX)(),(0,n.CE)("div",bl,[(0,n.Lk)("h3",null,(0,p.v_)(K.value.name),1),(0,n.Lk)("p",null,(0,p.v_)(K.value.description),1),(0,n.Lk)("div",fl," Price: ¥"+(0,p.v_)(null==K.value.price||isNaN(parseFloat(K.value.price))?"N/A":parseFloat(K.value.price).toFixed(2)),1),(0,n.Lk)("div",yl,[a[28]||(a[28]=(0,n.Lk)("span",null,"Quantity:",-1)),(0,n.bF)((0,k.R1)(Ga.lq),{modelValue:K.value.quantity,"onUpdate:modelValue":a[2]||(a[2]=e=>K.value.quantity=e),min:1,size:"small"},null,8,["modelValue"])])])):(0,n.Q3)("",!0)])),_:1},8,["modelValue"])])}}};const Ll=(0,s.A)(_l,[["__scopeId","data-v-e868cca2"]]);var wl=Ll;const Rl={class:"page"},Cl={class:"menuWrap"},xl={key:0,class:"uInfo"},Vl={class:"main"},Sl={key:0},Il={key:2,class:"table-container"},Al={key:0},El={key:2,class:"coach-list"},Kl=["src"],Pl={class:"coach-info"},Wl={key:0},Tl={key:2,class:"table-container"},Xl={key:0},Dl={class:"dialog-footer"};var Ul={__name:"SportManagementPage",setup(e){const a=(0,v.Pj)(),l=(0,n.EW)((()=>a.getters.userInfo)),t=(0,k.KR)({exerciseType:"",duration:30,notes:""}),o=(0,k.KR)(!1),r=(0,k.KR)(null),s=async()=>{if(t.value.exerciseType&&t.value.duration){o.value=!0,r.value=null;try{const e=localStorage.getItem("token"),a=await $.A.post("http://localhost:3060/api/homecare2/checkin",t.value,{headers:{Authorization:`Bearer ${e}`}});a.data.success?(r.value={title:"Check-in successful!",type:"success"},t.value={exerciseType:"",duration:30,notes:""},c()):(r.value={title:a.data.message||"Check-in failed.",type:"error"},J.nk.error(r.value.title))}catch(e){console.error("Error during check-in:",e),r.value={title:"Network error, please try again later.",type:"error"},J.nk.error(r.value.title)}finally{o.value=!1}}else J.nk.warning("Please select exercise type and duration.")},u=(0,k.KR)([]),i=(0,k.KR)(!1),d=(0,k.KR)(null),c=async()=>{i.value=!0,d.value=null;try{const e=localStorage.getItem("token"),a=await $.A.get("http://localhost:3060/api/homecare2/sports/history",{headers:{Authorization:`Bearer ${e}`}});a.data.success?(0,n.dY)((()=>{u.value=a.data.exerciseHistory})):(d.value=a.data.message||"Failed to fetch exercise history.",J.nk.error(d.value))}catch(e){console.error("Error fetching exercise history:",e),d.value="Network error, failed to load exercise history.",J.nk.error(d.value)}finally{i.value=!1}},m=(0,k.KR)([]),h=(0,k.KR)(!1),b=(0,k.KR)(null),f=(0,k.KR)(null),y=(0,k.KR)(!1),F=(0,k.KR)({date:"",time:"",notes:""}),_=(0,k.KR)(!1),L=async()=>{h.value=!0,b.value=null;try{const e=localStorage.getItem("token"),a=await $.A.get("http://localhost:3060/api/homecare2/coaches",{headers:{Authorization:`Bearer ${e}`}});a.data.success?m.value=a.data.coaches:(b.value=a.data.message||"Failed to fetch coaches.",J.nk.error(b.value))}catch(e){console.error("Error fetching coaches:",e),b.value="Network error, failed to load coaches.",J.nk.error(b.value)}finally{h.value=!1}},w=e=>{f.value=e,y.value=!0,F.value={date:"",time:"",notes:""}},R=async()=>{if(f.value&&F.value.date&&F.value.time){_.value=!0;try{const e=localStorage.getItem("token"),a=await $.A.post("http://localhost:3060/api/homecare2/book-coach",{coachId:f.value.coach_id,date:F.value.date,time:F.value.time,notes:F.value.notes},{headers:{Authorization:`Bearer ${e}`}});a.data.success?(J.nk.success("Coach booked successfully!"),y.value=!1,S()):J.nk.error(a.data.message||"Failed to book coach.")}catch(e){console.error("Error during coach booking:",e);let a="Network error, please try again later.";e.response&&e.response.data&&e.response.data.message&&(a=e.response.data.message),J.nk.error(a)}finally{_.value=!1}}else J.nk.warning("Please select a coach, date, and time.")},C=(0,k.KR)([]),x=(0,k.KR)(!1),V=(0,k.KR)(null),S=async()=>{x.value=!0,V.value=null;try{const e=localStorage.getItem("token"),a=await $.A.get("http://localhost:3060/api/homecare2/booking-history",{headers:{Authorization:`Bearer ${e}`}});a.data.success?(0,n.dY)((()=>{C.value=a.data.bookingHistory})):(V.value=a.data.message||"Failed to fetch booking history.",J.nk.error(V.value))}catch(e){console.error("Error fetching booking history:",e),V.value="Network error, failed to load booking history.",J.nk.error(V.value)}finally{x.value=!1}};return(0,n.sV)((()=>{L(),c(),S()})),(e,a)=>{const c=(0,n.g2)("el-icon"),v=(0,n.g2)("el-menu-item"),L=(0,n.g2)("el-menu"),S=(0,n.g2)("el-avatar"),I=(0,n.g2)("el-aside"),A=(0,n.g2)("el-option"),E=(0,n.g2)("el-select"),K=(0,n.g2)("el-form-item"),P=(0,n.g2)("el-input-number"),W=(0,n.g2)("el-input"),T=(0,n.g2)("el-button"),X=(0,n.g2)("el-form"),D=(0,n.g2)("el-alert"),U=(0,n.g2)("el-card"),H=(0,n.g2)("el-skeleton"),B=(0,n.g2)("el-table-column"),q=(0,n.g2)("el-table"),N=(0,n.g2)("el-tag"),z=(0,n.g2)("el-date-picker"),M=(0,n.g2)("el-time-select"),O=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)("div",Rl,[(0,n.bF)(I,{width:"220px",class:"side"},{default:(0,n.k6)((()=>[a[16]||(a[16]=(0,n.Lk)("div",{class:"sTitle"},"Smart Home Elderly Care System",-1)),(0,n.Lk)("div",Cl,[(0,n.bF)(L,{"default-active":"/sport-management",class:"el-menu-1",router:!0},{default:(0,n.k6)((()=>[(0,n.bF)(v,{index:"/home"},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.ODD))])),_:1}),a[9]||(a[9]=(0,n.Lk)("span",null,"Dashboard",-1))])),_:1}),(0,n.bF)(v,{index:"/health-monitoring"},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.VAG))])),_:1}),a[10]||(a[10]=(0,n.Lk)("span",null,"Health monitoring",-1))])),_:1}),(0,n.bF)(v,{index:"/health-knowledge"},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.f5b))])),_:1}),a[11]||(a[11]=(0,n.Lk)("span",null,"Health Knowledge",-1))])),_:1}),(0,n.bF)(v,{index:"/user-settings"},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.B5R))])),_:1}),a[12]||(a[12]=(0,n.Lk)("span",null,"User Settings",-1))])),_:1}),(0,n.bF)(v,{index:"/ai-consultation"},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.wUE))])),_:1}),a[13]||(a[13]=(0,n.Lk)("span",null,"AI Consultation",-1))])),_:1}),(0,n.bF)(v,{index:"/diet-management"},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.NoT))])),_:1}),a[14]||(a[14]=(0,n.Lk)("span",null,"Diet Management",-1))])),_:1}),(0,n.bF)(v,{index:"/sport-management"},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.bF)((0,k.R1)(g.mP9))])),_:1}),a[15]||(a[15]=(0,n.Lk)("span",null,"Sports Management",-1))])),_:1})])),_:1})]),l.value?((0,n.uX)(),(0,n.CE)("div",xl,[(0,n.bF)(S,{size:40,src:l.value.avatar},null,8,["src"]),(0,n.Lk)("span",null,(0,p.v_)(l.value.username),1)])):(0,n.Q3)("",!0)])),_:1}),(0,n.Lk)("div",Vl,[a[26]||(a[26]=(0,n.Lk)("div",{class:"pHeader"},[(0,n.Lk)("div",{class:"hTitle"},[(0,n.Lk)("h1",null,"Sports Management"),(0,n.Lk)("span",{class:"sub-title"},"Track your workouts and book coaching sessions")])],-1)),(0,n.bF)(U,{class:"check-in-card"},{header:(0,n.k6)((()=>a[17]||(a[17]=[(0,n.Lk)("div",{class:"card-header"},"Exercise Check-in",-1)]))),default:(0,n.k6)((()=>[a[19]||(a[19]=(0,n.Lk)("p",null,"Record your daily exercise activities.",-1)),(0,n.bF)(X,{model:t.value,"label-width":"150px"},{default:(0,n.k6)((()=>[(0,n.bF)(K,{label:"Exercise Type"},{default:(0,n.k6)((()=>[(0,n.bF)(E,{modelValue:t.value.exerciseType,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.exerciseType=e),placeholder:"Select exercise type"},{default:(0,n.k6)((()=>[(0,n.bF)(A,{label:"Walking",value:"walking"}),(0,n.bF)(A,{label:"Running",value:"running"}),(0,n.bF)(A,{label:"Cycling",value:"cycling"}),(0,n.bF)(A,{label:"Swimming",value:"swimming"}),(0,n.bF)(A,{label:"Yoga",value:"yoga"}),(0,n.bF)(A,{label:"Other",value:"other"})])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(K,{label:"Duration (minutes)"},{default:(0,n.k6)((()=>[(0,n.bF)(P,{modelValue:t.value.duration,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value.duration=e),min:1},null,8,["modelValue"])])),_:1}),(0,n.bF)(K,{label:"Notes"},{default:(0,n.k6)((()=>[(0,n.bF)(W,{modelValue:t.value.notes,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value.notes=e),type:"textarea",rows:2},null,8,["modelValue"])])),_:1}),(0,n.bF)(K,null,{default:(0,n.k6)((()=>[(0,n.bF)(T,{type:"primary",onClick:s,loading:o.value},{default:(0,n.k6)((()=>a[18]||(a[18]=[(0,n.eW)("Check In")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["model"]),r.value?((0,n.uX)(),(0,n.Wv)(D,{key:0,title:r.value.title,type:r.value.type,"show-icon":"",closable:"",onClose:a[3]||(a[3]=e=>r.value=null),style:{"margin-top":"15px"}},null,8,["title","type"])):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)(U,{class:"exercise-history-card"},{header:(0,n.k6)((()=>a[20]||(a[20]=[(0,n.Lk)("div",{class:"card-header"},"Exercise History",-1)]))),default:(0,n.k6)((()=>[i.value?((0,n.uX)(),(0,n.CE)("div",Sl,[(0,n.bF)(H,{rows:5,animated:""})])):d.value?((0,n.uX)(),(0,n.Wv)(D,{key:1,title:d.value,type:"error","show-icon":""},null,8,["title"])):((0,n.uX)(),(0,n.CE)("div",Il,[(0,n.bF)(q,{data:u.value,style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)(B,{prop:"exercise_type",label:"Exercise Type"}),(0,n.bF)(B,{prop:"duration",label:"Duration (minutes)",width:"150"}),(0,n.bF)(B,{prop:"notes",label:"Notes"}),(0,n.bF)(B,{prop:"checkin_time",label:"Check-in Time",width:"180"})])),_:1},8,["data"])]))])),_:1}),(0,n.bF)(U,{class:"coach-booking-card"},{header:(0,n.k6)((()=>a[21]||(a[21]=[(0,n.Lk)("div",{class:"card-header"},"Book a Coach",-1)]))),default:(0,n.k6)((()=>[a[22]||(a[22]=(0,n.Lk)("p",null,"Find and book a personal coach.",-1)),h.value?((0,n.uX)(),(0,n.CE)("div",Al,[(0,n.bF)(H,{rows:3,animated:""})])):b.value?((0,n.uX)(),(0,n.Wv)(D,{key:1,title:b.value,type:"error","show-icon":""},null,8,["title"])):((0,n.uX)(),(0,n.CE)("div",El,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(m.value,(e=>((0,n.uX)(),(0,n.Wv)(U,{key:e.coach_id,class:"coach-card",shadow:"hover",onClick:a=>w(e)},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{src:e.image_url,class:"coach-avatar",alt:"Coach Avatar"},null,8,Kl),(0,n.Lk)("div",Pl,[(0,n.Lk)("h4",null,(0,p.v_)(e.name),1),(0,n.Lk)("p",null,(0,p.v_)(e.specialty),1),(0,n.bF)(N,{size:"small"},{default:(0,n.k6)((()=>[(0,n.eW)((0,p.v_)(e.availability),1)])),_:2},1024)])])),_:2},1032,["onClick"])))),128))]))])),_:1}),(0,n.bF)(U,{class:"booking-history-card"},{header:(0,n.k6)((()=>a[23]||(a[23]=[(0,n.Lk)("div",{class:"card-header"},"Coach Booking History",-1)]))),default:(0,n.k6)((()=>[x.value?((0,n.uX)(),(0,n.CE)("div",Wl,[(0,n.bF)(H,{rows:5,animated:""})])):V.value?((0,n.uX)(),(0,n.Wv)(D,{key:1,title:V.value,type:"error","show-icon":""},null,8,["title"])):((0,n.uX)(),(0,n.CE)("div",Tl,[(0,n.bF)(q,{data:C.value,style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)(B,{prop:"coach_name",label:"Coach Name"}),(0,n.bF)(B,{prop:"coach_specialty",label:"Specialty"}),(0,n.bF)(B,{prop:"booking_date",label:"Date",width:"120"}),(0,n.bF)(B,{prop:"booking_time",label:"Time",width:"100"}),(0,n.bF)(B,{prop:"notes",label:"Notes"}),(0,n.bF)(B,{prop:"status",label:"Status",width:"100"}),(0,n.bF)(B,{prop:"created_at",label:"Booking Time",width:"180"})])),_:1},8,["data"])]))])),_:1}),(0,n.bF)(O,{modelValue:y.value,"onUpdate:modelValue":a[8]||(a[8]=e=>y.value=e),title:"Book Coach",width:"40%",center:""},{footer:(0,n.k6)((()=>[(0,n.Lk)("span",Dl,[(0,n.bF)(T,{onClick:a[7]||(a[7]=e=>y.value=!1)},{default:(0,n.k6)((()=>a[24]||(a[24]=[(0,n.eW)("Cancel")]))),_:1}),(0,n.bF)(T,{type:"primary",onClick:R,loading:_.value},{default:(0,n.k6)((()=>a[25]||(a[25]=[(0,n.eW)("Confirm Booking")]))),_:1},8,["loading"])])])),default:(0,n.k6)((()=>[f.value?((0,n.uX)(),(0,n.CE)("div",Xl,[(0,n.Lk)("h3",null,"Booking Session with "+(0,p.v_)(f.value.name),1),(0,n.bF)(X,{model:F.value,"label-width":"120px"},{default:(0,n.k6)((()=>[(0,n.bF)(K,{label:"Date"},{default:(0,n.k6)((()=>[(0,n.bF)(z,{modelValue:F.value.date,"onUpdate:modelValue":a[4]||(a[4]=e=>F.value.date=e),type:"date",placeholder:"Select date"},null,8,["modelValue"])])),_:1}),(0,n.bF)(K,{label:"Time"},{default:(0,n.k6)((()=>[(0,n.bF)(M,{modelValue:F.value.time,"onUpdate:modelValue":a[5]||(a[5]=e=>F.value.time=e),start:"09:00",step:"00:30",end:"21:00",placeholder:"Select time"},null,8,["modelValue"])])),_:1}),(0,n.bF)(K,{label:"Notes"},{default:(0,n.k6)((()=>[(0,n.bF)(W,{modelValue:F.value.notes,"onUpdate:modelValue":a[6]||(a[6]=e=>F.value.notes=e),type:"textarea",rows:2},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])):(0,n.Q3)("",!0)])),_:1},8,["modelValue"])])])}}};const Hl=(0,s.A)(Ul,[["__scopeId","data-v-b89af61a"]]);var Bl=Hl,ql=(0,v.y$)({state:{isLoggedIn:!1,userInfo:null,token:null},mutations:{setLoginStatus(e,a){e.isLoggedIn=a},setUserInfo(e,a){e.userInfo=a},setToken(e,a){e.token=a},clearUserInfo(e){e.userInfo=null,e.token=null}},actions:{login({commit:e},{userInfo:a,token:l}){e("setLoginStatus",!0),e("setUserInfo",a),e("setToken",l),localStorage.setItem("token",l)},logout({commit:e}){e("setLoginStatus",!1),e("clearUserInfo"),localStorage.removeItem("token")},checkLoginStatus({commit:e}){const a=localStorage.getItem("token");a&&(e("setLoginStatus",!0),e("setToken",a))}},getters:{isLoggedIn:e=>e.isLoggedIn,userInfo:e=>e.userInfo,token:e=>e.token}});const Nl=[{path:"/",name:"LoginPage",component:ue},{path:"/home",name:"HomePage",component:H,meta:{requiresAuth:!0}},{path:"/health-monitoring",name:"HealthMonitoringPage",component:Ke,meta:{requiresAuth:!0}},{path:"/health-knowledge",name:"HealthKnowledgePage",component:Oe,meta:{requiresAuth:!0}},{path:"/health-knowledge-detail/:health_knowledge_id",name:"HealthKnowledgeDetail",component:_a,meta:{requiresAuth:!0}},{path:"/user-settings",name:"UserSettingsPage",component:Ia,meta:{requiresAuth:!0}},{path:"/ai-consultation",name:"AIconsultationPage",component:ja,meta:{requiresAuth:!0}},{path:"/diet-management",name:"DietManagementPage",component:wl,meta:{requiresAuth:!0}},{path:"/sport-management",name:"SportManagementPage",component:Bl,meta:{requiresAuth:!0}}],zl=(0,m.aE)({history:(0,m.LA)(),routes:Nl});zl.beforeEach(((e,a,l)=>{ql.dispatch("checkLoginStatus"),e.meta.requiresAuth&&!ql.getters.isLoggedIn?l("/"):l()}));var Ml=zl;const Ol=(0,t.Ef)(d);Ol.use(c.A),Ol.use(Ml),Ol.mount("#app"),Ol.use(ql)}},a={};function l(t){var n=a[t];if(void 0!==n)return n.exports;var o=a[t]={exports:{}};return e[t].call(o.exports,o,o.exports,l),o.exports}l.m=e,function(){var e=[];l.O=function(a,t,n,o){if(!t){var r=1/0;for(d=0;d<e.length;d++){t=e[d][0],n=e[d][1],o=e[d][2];for(var s=!0,u=0;u<t.length;u++)(!1&o||r>=o)&&Object.keys(l.O).every((function(e){return l.O[e](t[u])}))?t.splice(u--,1):(s=!1,o<r&&(r=o));if(s){e.splice(d--,1);var i=n();void 0!==i&&(a=i)}}return a}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[t,n,o]}}(),function(){l.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(a,{a:a}),a}}(),function(){l.d=function(e,a){for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.p="/"}(),function(){var e={524:0};l.O.j=function(a){return 0===e[a]};var a=function(a,t){var n,o,r=t[0],s=t[1],u=t[2],i=0;if(r.some((function(a){return 0!==e[a]}))){for(n in s)l.o(s,n)&&(l.m[n]=s[n]);if(u)var d=u(l)}for(a&&a(t);i<r.length;i++)o=r[i],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(d)},t=self["webpackChunkelederlyside"]=self["webpackChunkelederlyside"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=l.O(void 0,[504],(function(){return l(8590)}));t=l.O(t)})();
//# sourceMappingURL=app.deef0710.js.map