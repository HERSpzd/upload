{"version":3,"file":"js/app.deef0710.js","mappings":"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","sources":["webpack://elederlyside/./src/App.vue","webpack://elederlyside/./src/App.vue?7ccd","webpack://elederlyside/./src/components/HomePage.vue","webpack://elederlyside/./src/components/HomePage.vue?8b1a","webpack://elederlyside/./src/components/LoginPage.vue","webpack://elederlyside/./src/components/RegisterForm.vue","webpack://elederlyside/./src/components/RegisterForm.vue?33ca","webpack://elederlyside/./src/components/ForgotPasswordForm.vue","webpack://elederlyside/./src/components/ForgotPasswordForm.vue?1399","webpack://elederlyside/./src/components/LoginPage.vue?8d24","webpack://elederlyside/./src/components/HealthMonitoringPage.vue","webpack://elederlyside/./src/components/HealthMonitoringPage.vue?e7c9","webpack://elederlyside/./src/components/HealthKnowledgePage.vue","webpack://elederlyside/./src/components/HealthKnowledgePage.vue?63c6","webpack://elederlyside/./src/components/HealthKnowledgeDetail.vue","webpack://elederlyside/./src/components/HealthKnowledgeDetail.vue?c629","webpack://elederlyside/./src/components/UserSettingsPage.vue","webpack://elederlyside/./src/components/UserSettingsPage.vue?73c9","webpack://elederlyside/./src/components/AIConsultationPage.vue","webpack://elederlyside/./src/components/AIConsultationPage.vue?3895","webpack://elederlyside/./src/components/DietManagementPage.vue","webpack://elederlyside/./src/components/DietManagementPage.vue?bedc","webpack://elederlyside/./src/components/SportManagementPage.vue","webpack://elederlyside/./src/components/SportManagementPage.vue?ba50","webpack://elederlyside/./src/store/index.js","webpack://elederlyside/./src/router.js","webpack://elederlyside/./src/main.js","webpack://elederlyside/webpack/bootstrap","webpack://elederlyside/webpack/runtime/chunk loaded","webpack://elederlyside/webpack/runtime/compat get default export","webpack://elederlyside/webpack/runtime/define property getters","webpack://elederlyside/webpack/runtime/global","webpack://elederlyside/webpack/runtime/hasOwnProperty shorthand","webpack://elederlyside/webpack/runtime/make namespace object","webpack://elederlyside/webpack/runtime/publicPath","webpack://elederlyside/webpack/runtime/jsonp chunk loading","webpack://elederlyside/webpack/startup"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n","import { render } from \"./App.vue?vue&type=template&id=8402a5c6\"\nconst script = {}\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div v-if=\"isLoggedIn\" class=\"page\">\n    <!-- Sidebar -->\n    <el-aside width=\"220px\" class=\"side\">\n      <!-- System -->\n      <div class=\"sTitle\">Smart Home Elderly Care System</div>\n\n      <div class=\"menuWrap\">\n        <el-menu default-active=\"/home\" class=\"el-menu-1\" :router=\"true\">\n          <el-menu-item index=\"/home\">\n            <el-icon><Platform /></el-icon>\n            <span>Dashboard</span>\n          </el-menu-item>\n          <el-menu-item index=\"/health-monitoring\">\n            <el-icon><Monitor /></el-icon>\n            <span>Health monitoring</span>\n          </el-menu-item>\n          <el-menu-item index=\"/health-knowledge\">\n            <el-icon><DocumentCopy /></el-icon>\n            <span>Health Knowledge</span>\n          </el-menu-item>\n          <el-menu-item index=\"/user-settings\">\n            <el-icon><Setting /></el-icon>\n            <span>User Settings</span>\n          </el-menu-item>\n          <el-menu-item index=\"/ai-consultation\">\n            <el-icon><ChatDotRound /></el-icon>\n            <span>AI Consultation</span>\n          </el-menu-item>\n          <el-menu-item index=\"/diet-management\">\n            <el-icon><Food /></el-icon>\n            <span>Diet Management</span>\n          </el-menu-item>\n          <el-menu-item index=\"/sport-management\">\n            <el-icon><Basketball /></el-icon>\n            <span>Sports Management</span>\n          </el-menu-item>\n        </el-menu>\n      </div>\n\n      <!-- User Information (Bottom) -->\n      <div class=\"uInfo\" v-if=\"userInfo\">\n        <el-avatar :size=\"40\" :src=\"userInfo.avatar\"></el-avatar>\n        <span>{{ userInfo.username }}</span>\n      </div>\n    </el-aside>\n\n    <!-- Main Content Area (Home Page) -->\n    <div class=\"main\">\n      <!-- title -->\n      <div class=\"pHeader\">\n        <div class=\"hTitle\">\n          <h1>Welcome, elderly user!</h1>\n          <span class=\"sub-title\">System core management entrance</span>\n        </div>\n      </div>\n\n      <!-- Home Component Content -->\n      <div class=\"homeWrap\">\n        <div class=\"sumCards\">\n          <el-card class=\"sumCard\">\n            <div class=\"cContent\">\n              <div class=\"cIcon\">\n                <el-icon><User /></el-icon>\n              </div>\n              <div class=\"cText\">\n                <div class=\"cVal\">135</div>\n                <div class=\"cLabel\">Number of elderly users</div>\n              </div>\n            </div>\n          </el-card>\n\n          <el-card class=\"sumCard\">\n            <div class=\"cContent\">\n              <div class=\"cIcon\">\n                <el-icon><User /></el-icon>\n              </div>\n              <div class=\"cText\">\n                <div class=\"cVal\">312</div>\n                <div class=\"cLabel\">Number of social workers</div>\n              </div>\n            </div>\n          </el-card>\n\n          <el-card class=\"sumCard\">\n            <div class=\"cContent\">\n              <div class=\"cIcon\">\n                <el-icon><Bell /></el-icon>\n              </div>\n              <div class=\"cText\">\n                <div class=\"cVal\">5</div>\n                <div class=\"cLabel\">Pending alarm</div>\n              </div>\n            </div>\n          </el-card>\n\n          <el-card class=\"sumCard\">\n            <div class=\"cContent\">\n              <div class=\"cIcon\">\n                <el-icon><Document /></el-icon>\n              </div>\n              <div class=\"cText\">\n                <div class=\"cVal\">2</div>\n                <div class=\"cLabel\">To Do Tasks</div>\n              </div>\n            </div>\n          </el-card>\n        </div>\n\n        <el-card class=\"qaCard\">\n          <template #header>\n            <div class=\"card-header\">\n              <span>Quick operation</span>\n            </div>\n          </template>\n          <div class=\"qActions\">\n            <!-- 直接使用 <a> 标签嵌套 <el-button> -->\n            <a href=\"/health-monitoring\">\n              <el-button type=\"primary\">View health data</el-button>\n            </a>\n            <a href=\"/health-knowledge\">\n              <el-button type=\"success\">View health knowledge</el-button>\n            </a>\n            <!-- 假设 \"Overview of Health Data\" 也跳转到健康监测 -->\n            <a href=\"/health-monitoring\">\n              <el-button type=\"info\">Overview of Health Data</el-button>\n            </a>\n            <a href=\"/user-settings\">\n              <el-button type=\"warning\">User Settings</el-button>\n            </a>\n            <a href=\"/ai-consultation\">\n              <el-button type=\"danger\">AI Consultation</el-button>\n            </a>\n          </div>\n        </el-card>\n      </div>\n    </div>\n  </div>\n  <div v-else>\n    <h1>Please log in first</h1>\n    <el-button type=\"primary\" @click=\"goToLogin\">Go login</el-button>\n  </div>\n</template>\n\n<script setup>\nimport { computed } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\nimport {\n  Platform,\n  DocumentCopy,\n  Setting,\n  Monitor,\n  ChatDotRound,\n  Food,\n  Basketball,\n} from \"@element-plus/icons-vue\";\nimport { User, Bell, Document } from \"@element-plus/icons-vue\";\n\nconst router = useRouter();\nconst store = useStore();\n\nconst isLoggedIn = computed(() => store.getters.isLoggedIn);\n\nconst userInfo = computed(() => store.getters.userInfo);\n\nconst goToLogin = () => {\n  router.push(\"/\");\n};\n</script>\n\n<style scoped>\n.page {\n  display: flex;\n  min-height: 100vh;\n  background-color: #f0f2f5;\n}\n\n.side {\n  width: 220px;\n  background-color: #001529;\n  border-right: none;\n  transition: width 0.28s;\n  overflow-x: hidden;\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  height: 100vh;\n  z-index: 10;\n}\n\n.sTitle {\n  color: #fff;\n  padding: 20px;\n  font-size: 18px;\n  font-weight: bold;\n  text-align: center;\n}\n\n.menuWrap {\n  height: calc(100vh - 180px);\n  overflow: auto;\n}\n\n.el-menu {\n  border-right: none;\n  background-color: #001529;\n  flex: 1;\n}\n\n.el-menu-item,\n.el-sub-menu__title {\n  color: rgba(255, 255, 255, 0.65);\n}\n\n.el-menu-item:hover,\n.el-sub-menu__title:hover {\n  background-color: #000c17;\n  color: #fff;\n}\n\n.el-menu-item.is-active {\n  background-color: #1890ff;\n  color: #fff;\n}\n\n.el-sub-menu.is-active .el-sub-menu__title {\n  color: #fff;\n}\n\n.el-menu--inline {\n  background-color: #000c17 !important;\n}\n\n.el-menu--inline .el-menu-item {\n  background-color: #000c17 !important;\n  color: rgba(255, 255, 255, 0.65);\n}\n\n.el-menu--inline .el-menu-item:hover {\n  background-color: #001529 !important;\n  color: #fff;\n}\n\n.el-menu--inline .el-menu-item.is-active {\n  background-color: #1890ff !important;\n  color: #fff;\n}\n\n.el-menu-vertical-demo:not(.el-menu--collapse) {\n  width: 220px;\n  min-height: 100%;\n}\n\n.el-menu-item .el-icon,\n.el-sub-menu__title .el-icon {\n  vertical-align: middle;\n  margin-right: 10px;\n  width: 24px;\n  text-align: center;\n  font-size: 18px;\n}\n\n.el-sub-menu .el-menu-item {\n  min-width: 220px;\n  padding-left: 48px !important;\n}\n\n.main {\n  flex: 1;\n  padding: 24px;\n  overflow-y: auto;\n  margin-left: 220px;\n}\n\n.pHeader {\n  margin-bottom: 24px;\n}\n\n.hTitle h1 {\n  margin: 0;\n  font-size: 22px;\n  color: #303133;\n  font-weight: 600;\n}\n\n.sub-title {\n  color: #606266;\n  font-size: 14px;\n  margin-top: 4px;\n}\n\n.el-card {\n  margin-bottom: 24px;\n  border-radius: 4px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: 600;\n  color: #303133;\n  font-size: 16px;\n}\n\n.card-header .el-link {\n  font-size: 14px;\n  font-weight: normal;\n}\n\n.uInfo {\n  display: flex;\n  align-items: center;\n  padding: 20px;\n  color: #fff;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.uInfo span {\n  margin-left: 10px;\n  font-size: 16px;\n}\n\n.homeWrap {\n  padding: 20px;\n}\n\n.sumCards {\n  display: flex;\n  gap: 20px;\n  margin-bottom: 20px;\n}\n\n.sumCard {\n  width: 25%;\n}\n\n.cContent {\n  display: flex;\n  align-items: center;\n  padding: 15px;\n}\n\n.cIcon {\n  font-size: 30px;\n  margin-right: 15px;\n  color: #409eff;\n}\n\n.cText {\n  flex: 1;\n}\n\n.cVal {\n  font-size: 24px;\n  font-weight: bold;\n  color: #333;\n}\n\n.cLabel {\n  font-size: 14px;\n  color: #999;\n}\n\n.qaCard {\n  margin-bottom: 20px;\n}\n\n.qActions {\n  display: flex;\n  gap: 10px;\n  padding: 15px;\n}\n\n.uInfo {\n  display: flex;\n  align-items: center;\n  padding: 20px;\n  color: #fff;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n}\n</style>\n","import script from \"./HomePage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HomePage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HomePage.vue?vue&type=style&index=0&id=b1e0bbb8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b1e0bbb8\"]])\n\nexport default __exports__","<template>\r\n  <div\r\n    style=\"\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      height: 100vh;\r\n      background-color: #f0f2f5;\r\n    \"\r\n  >\r\n    <el-card class=\"login-card\">\r\n      <template #header>\r\n        <div style=\"text-align: left\">\r\n          <h2 style=\"margin: 0\">Welcome</h2>\r\n          <p style=\"color: #999\">Smart Home Elderly Care System</p>\r\n        </div>\r\n      </template>\r\n\r\n      <div class=\"login-content\">\r\n        <!-- Image -->\r\n        <div class=\"image-container\">\r\n          <img src=\"../assets/login.png\" alt=\"Logo\" class=\"logo-image\" />\r\n        </div>\r\n\r\n        <!--  -->\r\n        <el-form\r\n          v-if=\"currentForm === 'login'\"\r\n          label-position=\"top\"\r\n          label-width=\"0\"\r\n          class=\"login-form\"\r\n          @submit.prevent=\"login\"\r\n        >\r\n          <el-form-item label=\"Account Number\">\r\n            <el-input\r\n              v-model=\"form.username\"\r\n              placeholder=\"Please enter your account\"\r\n            >\r\n              <template #append>\r\n                <el-icon><User /></el-icon>\r\n              </template>\r\n            </el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"Password\">\r\n            <el-input\r\n              v-model=\"form.password\"\r\n              type=\"password\"\r\n              placeholder=\"Please input a password\"\r\n              show-password\r\n            >\r\n              <template #append>\r\n                <el-icon><Lock /></el-icon>\r\n              </template>\r\n            </el-input>\r\n          </el-form-item>\r\n\r\n          <el-form-item>\r\n            <el-button\r\n              type=\"primary\"\r\n              style=\"width: 100%\"\r\n              @click=\"login\"\r\n              :loading=\"loading\"\r\n            >\r\n              {{ loading ? \"Logging in\" : \"Log on\" }}\r\n            </el-button>\r\n          </el-form-item>\r\n\r\n          <div\r\n            style=\"\r\n              display: flex;\r\n              justify-content: space-between;\r\n              font-size: 12px;\r\n            \"\r\n          >\r\n            <el-link\r\n              type=\"primary\"\r\n              :underline=\"false\"\r\n              @click=\"currentForm = 'register'\"\r\n              >Free registration</el-link\r\n            >\r\n            <el-link\r\n              type=\"primary\"\r\n              :underline=\"false\"\r\n              @click=\"currentForm = 'forgotPassword'\"\r\n              >Forgot password</el-link\r\n            >\r\n          </div>\r\n        </el-form>\r\n\r\n        <RegisterForm\r\n          v-if=\"currentForm === 'register'\"\r\n          class=\"login-form\"\r\n          @back-to-login=\"currentForm = 'login'\"\r\n        />\r\n\r\n        <ForgotPasswordForm\r\n          v-if=\"currentForm === 'forgotPassword'\"\r\n          class=\"login-form\"\r\n          @back-to-login=\"currentForm = 'login'\"\r\n        />\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, reactive, ref } from \"vue\";\r\nimport { User, Lock } from \"@element-plus/icons-vue\";\r\nimport RegisterForm from \"./RegisterForm.vue\";\r\nimport ForgotPasswordForm from \"./ForgotPasswordForm.vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport axios from \"axios\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    User,\r\n    Lock,\r\n    RegisterForm,\r\n    ForgotPasswordForm,\r\n  },\r\n  setup() {\r\n    const form = reactive({\r\n      username: \"\",\r\n      password: \"\",\r\n    });\r\n\r\n    const currentForm = ref(\"login\");\r\n    const router = useRouter();\r\n    const store = useStore();\r\n    const loading = ref(false);\r\n\r\n    const login = async () => {\r\n      loading.value = true;\r\n      try {\r\n        const response = await axios.post(\r\n          \"http://47.250.182.201:3060/api/homecare/login\",\r\n          {\r\n            username: form.username,\r\n            password: form.password,\r\n          }\r\n        );\r\n\r\n        const { token, user } = response.data;\r\n\r\n        if (user.role !== \"elderly\") {\r\n          ElMessage.error(\"Only elderly users can log in\");\r\n          return;\r\n        }\r\n\r\n        store.dispatch(\"login\", { userInfo: user, token: token });\r\n\r\n        router.push(\"/home\");\r\n        ElMessage.success(\"Login succeeded\");\r\n      } catch (error) {\r\n        console.error(\"Login failed:\", error);\r\n        let errorMessage = \"Login failed, please try again later\";\r\n        if (\r\n          error.response &&\r\n          error.response.data &&\r\n          error.response.data.message\r\n        ) {\r\n          errorMessage = error.response.data.message;\r\n        }\r\n        ElMessage.error(errorMessage);\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    return {\r\n      form,\r\n      currentForm,\r\n      login,\r\n      loading,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.login-card {\r\n  border-radius: 10px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  width: 900px;\r\n}\r\n\r\n.login-content {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.image-container {\r\n  width: 50%;\r\n\r\n  padding-right: 20px;\r\n}\r\n\r\n.logo-image {\r\n  width: 100%;\r\n\r\n  display: block;\r\n}\r\n\r\n.login-form {\r\n  width: 50%;\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <h3>Register</h3>\r\n    <el-form\r\n      label-position=\"top\"\r\n      label-width=\"0\"\r\n      :model=\"registerForm\"\r\n      ref=\"registerFormRef\"\r\n    >\r\n      <el-form-item label=\"Username\" prop=\"username\">\r\n        <el-input\r\n          v-model=\"registerForm.username\"\r\n          placeholder=\"Enter your user name\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"Email\" prop=\"email\">\r\n        <el-input\r\n          v-model=\"registerForm.email\"\r\n          placeholder=\"Please enter your email address\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"cell-phone number\" prop=\"phone\">\r\n        <el-input\r\n          v-model=\"registerForm.phone\"\r\n          placeholder=\"Please enter your phone number\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"Role\" prop=\"user_type\">\r\n        <el-select\r\n          v-model=\"registerForm.user_type\"\r\n          placeholder=\"Please select a role\"\r\n        >\r\n          <el-option label=\"Elderly\" value=\"elderly\" />\r\n          <el-option label=\"Social Worker\" value=\"social_worker\" />\r\n          <el-option label=\"Admin\" value=\"admin\" />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"Password\" prop=\"password\">\r\n        <el-input\r\n          type=\"password\"\r\n          v-model=\"registerForm.password\"\r\n          placeholder=\"Please input a password\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" style=\"width: 100%\" @click=\"submitForm()\"\r\n          >Register</el-button\r\n        >\r\n      </el-form-item>\r\n      <el-link type=\"primary\" :underline=\"false\" @click=\"emit('back-to-login')\"\r\n        >Return to login</el-link\r\n      >\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, reactive } from \"vue\";\r\nimport axios from \"axios\";\r\nimport {\r\n  ElMessage,\r\n  ElForm,\r\n  ElFormItem,\r\n  ElInput,\r\n  ElButton,\r\n  ElLink,\r\n} from \"element-plus\";\r\n\r\nexport default defineComponent({\r\n  name: \"RegisterForm\",\r\n  components: {\r\n    ElForm,\r\n    ElFormItem,\r\n    ElInput,\r\n    ElButton,\r\n    ElLink,\r\n  },\r\n\r\n  emits: [\"back-to-login\"],\r\n  setup(props, { emit }) {\r\n    const registerForm = reactive({\r\n      username: \"\",\r\n      password: \"\",\r\n      email: \"\",\r\n      phone: \"\",\r\n    });\r\n\r\n    const submitForm = async () => {\r\n      try {\r\n        const response = await axios.post(\r\n          \"http://localhost:3060/api/homecare/register\",\r\n          registerForm\r\n        );\r\n        console.log(response.data);\r\n\r\n        ElMessage({\r\n          message: \"Registered successfully\",\r\n          type: \"success\",\r\n        });\r\n\r\n        emit(\"back-to-login\");\r\n      } catch (error) {\r\n        console.error(\"Registration failed:\", error);\r\n        ElMessage.error(\r\n          error.response?.data?.message ||\r\n            \"Registration failed, please try again\"\r\n        );\r\n      }\r\n    };\r\n\r\n    return {\r\n      registerForm,\r\n      submitForm,\r\n      emit,\r\n    };\r\n  },\r\n});\r\n</script>\r\n","import { render } from \"./RegisterForm.vue?vue&type=template&id=69fec1c6\"\nimport script from \"./RegisterForm.vue?vue&type=script&lang=js\"\nexport * from \"./RegisterForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <div>\r\n      <h3>忘记密码</h3>\r\n      <el-form label-position=\"top\" label-width=\"0\">\r\n        <el-form-item label=\"邮箱\">\r\n          <el-input placeholder=\"请输入注册邮箱\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" style=\"width: 100%;\">重置密码</el-button>\r\n        </el-form-item>\r\n        <el-link type=\"primary\" :underline=\"false\" @click=\"emit('back-to-login')\">返回登录</el-link>  <!-- 使用 el-link -->\r\n      </el-form>\r\n    </div>\r\n  </template>\r\n \r\n  <script>\r\n  import { defineComponent } from 'vue';\r\n \r\n  export default defineComponent({\r\n    name: 'ForgotPasswordForm',\r\n    emits: ['back-to-login'], // 声明要发出的事件\r\n    setup(props, { emit }) {\r\n      return {\r\n        emit\r\n      };\r\n    }\r\n  });\r\n  </script>","import { render } from \"./ForgotPasswordForm.vue?vue&type=template&id=dd5fcd8a\"\nimport script from \"./ForgotPasswordForm.vue?vue&type=script&lang=js\"\nexport * from \"./ForgotPasswordForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./LoginPage.vue?vue&type=template&id=a31fafbc&scoped=true\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js\"\n\nimport \"./LoginPage.vue?vue&type=style&index=0&id=a31fafbc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a31fafbc\"]])\n\nexport default __exports__","<template>\n  <div v-if=\"isLoggedIn\" class=\"page\">\n    <!-- Sidebar -->\n    <el-aside width=\"220px\" class=\"side\">\n      <!-- System -->\n      <div class=\"sTitle\">Smart Home Elderly Care System</div>\n\n      <div class=\"menuWrap\">\n        <el-menu\n          default-active=\"/health-monitoring\"\n          class=\"el-menu-1\"\n          :router=\"true\"\n        >\n          <el-menu-item index=\"/home\">\n            <el-icon><Platform /></el-icon>\n            <span>Dashboard</span>\n          </el-menu-item>\n          <el-menu-item index=\"/health-monitoring\">\n            <el-icon><Monitor /></el-icon>\n            <span>Health monitoring</span>\n            -</el-menu-item\n          >\n          <el-menu-item index=\"/health-knowledge\">\n            <el-icon><DocumentCopy /></el-icon>\n            <span>Health Knowledge</span>\n          </el-menu-item>\n          <el-menu-item index=\"/user-settings\">\n            <el-icon><Setting /></el-icon>\n            <span>User Settings</span>\n          </el-menu-item>\n          <el-menu-item index=\"/ai-consultation\">\n            <el-icon><ChatDotRound /></el-icon>\n            <span>AI Consultation</span>\n          </el-menu-item>\n          <el-menu-item index=\"/diet-management\">\n            <el-icon><Food /></el-icon>\n            <span>Diet Management</span>\n          </el-menu-item>\n          <el-menu-item index=\"/sport-management\">\n            <el-icon><Basketball /></el-icon>\n            <span>Sports Management</span>\n          </el-menu-item>\n        </el-menu>\n      </div>\n\n      <!-- User Information (Bottom) -->\n      <div class=\"uInfo\" v-if=\"userInfo\">\n        <el-avatar :size=\"40\" :src=\"userInfo.avatar\"></el-avatar>\n        <span>{{ userInfo.username }}</span>\n      </div>\n    </el-aside>\n\n    <!-- Main Content Area (Elderly User Terminal) -->\n    <div class=\"main\">\n      <!-- title -->\n      <div class=\"pHeader\">\n        <div class=\"hTitle\">\n          <h1>Health monitoring</h1>\n          <span class=\"sub-title\"\n            >Take photos and upload them to quickly obtain health data</span\n          >\n        </div>\n      </div>\n\n      <!-- Health data collection -->\n      <el-card class=\"dCard\">\n        <div class=\"camWrap\">\n          <video ref=\"video\" width=\"320\" height=\"240\" autoplay></video>\n          <canvas\n            ref=\"canvas\"\n            width=\"320\"\n            height=\"240\"\n            style=\"display: none\"\n          ></canvas>\n          <div class=\"button-group\">\n            <el-button type=\"primary\" @click=\"takePicture('blood_pressure')\"\n              >Upload Blood Pressure Monitor</el-button\n            >\n            <el-button type=\"primary\" @click=\"takePicture('blood_sugar')\"\n              >Upload Blood Glucose Meter</el-button\n            >\n          </div>\n        </div>\n\n        <div v-if=\"uploading\" class=\"uping\">\n          <p>Uploading and identifying data, please wait</p>\n        </div>\n\n        <div v-if=\"bloodPressureData || bloodSugarData\" class=\"dShow\">\n          <h2 v-if=\"bloodPressureData\">Blood Pressure Data</h2>\n          <el-descriptions v-if=\"bloodPressureData\" :column=\"1\" border>\n            <el-descriptions-item label=\"Systolic pressure\"\n              >{{ bloodPressureData.systolic }} mmHg</el-descriptions-item\n            >\n            <el-descriptions-item label=\"Diastolic pressure\"\n              >{{ bloodPressureData.diastolic }} mmHg</el-descriptions-item\n            >\n            <el-descriptions-item label=\"Pulse\"\n              >{{ bloodPressureData.pulse }} bpm</el-descriptions-item\n            >\n          </el-descriptions>\n\n          <h2 v-if=\"bloodSugarData\">Blood Glucose Data</h2>\n          <el-descriptions v-if=\"bloodSugarData\" :column=\"1\" border>\n            <el-descriptions-item label=\"Blood sugar\"\n              >{{ bloodSugarData.bloodSugar }} mg/dL</el-descriptions-item\n            >\n          </el-descriptions>\n        </div>\n\n        <div v-else-if=\"uploadSuccess && !uploading\" class=\"noData\">\n          <p>No valid data was identified, please take a new photo.</p>\n        </div>\n      </el-card>\n\n      <!-- AI Analysis and Suggestions Module -->\n      <el-card class=\"ai-analysis-card\">\n        <template #header>\n          <div class=\"card-header\">AI Health Analysis and Suggestions</div>\n        </template>\n\n        <div v-if=\"aiAnalysisLoading\">\n          <el-skeleton :rows=\"3\" animated />\n        </div>\n        <el-alert\n          v-else-if=\"aiAnalysisError\"\n          :title=\"aiAnalysisError\"\n          type=\"error\"\n          show-icon\n        ></el-alert>\n        <div v-else-if=\"aiAnalysisResult\" class=\"ai-analysis-content\">\n          <h3>Analysis:</h3>\n          <!-- 使用 v-html 渲染格式化后的分析文本 -->\n          <p v-html=\"formattedAnalysis\"></p>\n          <!-- 如果您希望将建议分开显示，可以使用 formattedSuggestions -->\n          <!-- <h3>Suggestions:</h3> -->\n          <!-- <p v-html=\"formattedSuggestions\"></p> -->\n        </div>\n        <div v-else class=\"noData\">\n          <p>\n            AI analysis and suggestions will appear here after data is\n            available.\n          </p>\n        </div>\n      </el-card>\n\n      <!-- 历史数据展示 -->\n      <el-card class=\"hCard\">\n        <div class=\"card-header\">\n          <span>Blood Pressure Historical Data</span>\n        </div>\n        <!-- ECharts 血压图表容器 -->\n        <div id=\"blood-pressure-chart\" style=\"width: 100%; height: 400px\"></div>\n        <el-table :data=\"bloodPressureHistoryData\" style=\"width: 100%\">\n          <el-table-column prop=\"formattedTime\" label=\"Time\" width=\"180\" />\n          <el-table-column prop=\"systolic\" label=\"Systolic pressure\" />\n          <el-table-column prop=\"diastolic\" label=\"Diastolic pressure\" />\n          <el-table-column prop=\"pulse\" label=\"Pulse\" />\n        </el-table>\n      </el-card>\n\n      <el-card class=\"hCard\">\n        <div class=\"card-header\">\n          <span>Historical Blood Glucose Data</span>\n        </div>\n        <!-- ECharts 血糖图表容器 -->\n        <div id=\"blood-sugar-chart\" style=\"width: 100%; height: 400px\"></div>\n        <el-table :data=\"bloodSugarHistoryData\" style=\"width: 100%\">\n          <el-table-column prop=\"formattedTime\" label=\"Time\" width=\"180\" />\n          <el-table-column prop=\"bloodSugar\" label=\"Blood sugar\" />\n        </el-table>\n      </el-card>\n    </div>\n  </div>\n  <div v-else>\n    <h1>Please log in first</h1>\n    <el-button type=\"primary\" @click=\"goToLogin\">Go login</el-button>\n  </div>\n</template>\n\n<script setup>\nimport { computed, ref, onMounted, watch } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useStore } from \"vuex\";\nimport {\n  Platform,\n  DocumentCopy,\n  Setting,\n  Monitor,\n  ChatDotRound,\n  Food,\n  Basketball,\n} from \"@element-plus/icons-vue\";\nimport {\n  ElMessage,\n  ElAlert,\n  ElTable,\n  ElTableColumn,\n  ElButton,\n  ElSkeleton,\n  ElDescriptions,\n  ElDescriptionsItem,\n  ElCard, // Make sure ElCard is imported\n} from \"element-plus\"; // Import necessary components\nimport axios from \"axios\";\nimport * as echarts from \"echarts\";\n\nconst router = useRouter();\nconst store = useStore();\n\nconst isLoggedIn = computed(() => store.getters.isLoggedIn);\nconst userInfo = computed(() => store.getters.userInfo);\n\nconst goToLogin = () => {\n  router.push(\"/\");\n};\n\nconst uploadBloodPressureUrl = ref(\n  \"http://localhost:3060/api/homecare/upload-image\"\n);\nconst uploadBloodSugarUrl = ref(\n  \"http://localhost:3060/api/homecare/upload-image-2\"\n);\nconst historyDataUrl = ref(\"http://localhost:3060/api/homecare/history-data\");\nconst aiAnalysisUrl = ref(\n  \"http://localhost:3060/api/homecare2/health-analysis\"\n); // New API endpoint for AI analysis\n\nconst bloodPressureData = ref(null);\nconst bloodSugarData = ref(null);\nconst uploadSuccess = ref(false);\nconst uploading = ref(false);\nconst uploadProgress = ref(0); // Assuming this is still needed for upload progress\nconst bloodPressureHistoryData = ref([]);\nconst bloodSugarHistoryData = ref([]);\n\nconst aiAnalysisResult = ref(null); // To store the full AI analysis text\nconst aiAnalysisLoading = ref(false);\nconst aiAnalysisError = ref(null);\n\nconst video = ref(null);\nconst canvas = ref(null);\n\nlet bloodPressureChart = null;\nlet bloodSugarChart = null;\n\nconst handleUploadSuccess = (response, type) => {\n  uploading.value = false;\n  uploadProgress.value = 0;\n\n  if (response.success) {\n    uploadSuccess.value = true;\n    if (type === \"blood_pressure\") {\n      bloodPressureData.value = response.data.value;\n      bloodSugarData.value = null;\n    } else if (type === \"blood_sugar\") {\n      bloodSugarData.value = response.data.value;\n      bloodPressureData.value = null;\n    } else {\n      ElMessage.error(\"Unable to recognize data type\");\n      bloodPressureData.value = null;\n      bloodSugarData.value = null;\n      uploadSuccess.value = false;\n    }\n  } else {\n    ElMessage.error(response.message || \"Upload failed\");\n    bloodPressureData.value = null;\n    bloodSugarData.value = null;\n    uploadSuccess.value = false;\n  }\n};\n\nconst takePicture = (type) => {\n  const context = canvas.value.getContext(\"2d\");\n  context.drawImage(video.value, 0, 0, 320, 240);\n  const imageDataURL = canvas.value.toDataURL(\"image/png\");\n\n  uploadImage(imageDataURL, type);\n};\n\nconst uploadImage = async (imageDataURL, type) => {\n  uploading.value = true;\n  uploadSuccess.value = false;\n  bloodPressureData.value = null;\n  bloodSugarData.value = null;\n  uploadProgress.value = 0;\n\n  let url = \"\";\n  if (type === \"blood_pressure\") {\n    url = uploadBloodPressureUrl.value;\n  } else if (type === \"blood_sugar\") {\n    url = uploadBloodSugarUrl.value;\n  } else {\n    ElMessage.error(\"Invalid upload type\");\n    uploading.value = false;\n    return;\n  }\n\n  try {\n    const token = localStorage.getItem(\"token\") || store.getters.token;\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ image: imageDataURL }),\n    });\n\n    const data = await response.json();\n    handleUploadSuccess(data, type);\n    await fetchHistoryData(); // Fetch history data after upload\n    // fetchAIAnalysis is now called within fetchHistoryData\n  } catch (error) {\n    uploading.value = false;\n    ElMessage.error(\"Upload failed, please check the network\");\n  }\n};\n\nconst fetchHistoryData = async () => {\n  try {\n    const token = localStorage.getItem(\"token\") || store.getters.token;\n    const response = await fetch(historyDataUrl.value, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    const data = await response.json();\n    if (data.success) {\n      bloodPressureHistoryData.value = data.data\n        .filter((item) => item.type === \"blood_pressure\")\n        .map((item) => ({\n          time: item.time,\n          systolic: item.value.systolic,\n          diastolic: item.value.diastolic,\n          pulse: item.value.pulse,\n          formattedTime:\n            new Date(item.time).toLocaleDateString() +\n            \" \" +\n            new Date(item.time).toLocaleTimeString(),\n        }));\n      bloodSugarHistoryData.value = data.data\n        .filter((item) => item.type === \"blood_sugar\")\n        .map((item) => ({\n          time: item.time,\n          bloodSugar: item.value.bloodSugar,\n          formattedTime:\n            new Date(item.time).toLocaleDateString() +\n            \" \" +\n            new Date(item.time).toLocaleTimeString(),\n        }));\n\n      // Data fetched, now fetch AI analysis\n      fetchAIAnalysis();\n    } else {\n      ElMessage.error(data.message || \"Failed to retrieve historical data\");\n    }\n  } catch (error) {\n    ElMessage.error(\n      \"Failed to retrieve historical data, please check the network\"\n    );\n  }\n};\n\n// Function to fetch AI health analysis\nconst fetchAIAnalysis = async () => {\n  aiAnalysisLoading.value = true;\n  aiAnalysisError.value = null;\n  aiAnalysisResult.value = null; // Clear previous result\n\n  // Ensure there is history data before fetching analysis\n  if (\n    bloodPressureHistoryData.value.length === 0 &&\n    bloodSugarHistoryData.value.length === 0\n  ) {\n    aiAnalysisLoading.value = false;\n    return; // No data to analyze\n  }\n\n  try {\n    const token = localStorage.getItem(\"token\") || store.getters.token;\n\n    // 检查token是否存在\n    if (!token) {\n      aiAnalysisError.value = \"Authentication token not found. Please log in.\";\n      ElMessage.error(aiAnalysisError.value);\n      aiAnalysisLoading.value = false;\n      return;\n    }\n\n    // 修正后的 axios.post 调用\n    const response = await axios.post(\n      aiAnalysisUrl.value,\n      {}, // <--- 这里是空的请求体，因为你的后端 /health-analysis 不需要请求体\n      {\n        // <--- 这是一个单独的配置对象，包含 headers\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    );\n\n    if (response.data.success) {\n      aiAnalysisResult.value = response.data.analysis;\n    } else {\n      aiAnalysisError.value =\n        response.data.message || \"Failed to get AI analysis\";\n      ElMessage.error(aiAnalysisError.value);\n    }\n  } catch (error) {\n    console.error(\"Error fetching AI analysis:\", error);\n    if (error.response && error.response.status === 401) {\n      aiAnalysisError.value =\n        \"Session expired or unauthorized. Please log in again.\";\n      ElMessage.error(aiAnalysisError.value);\n      router.push(\"/\");\n    } else {\n      aiAnalysisError.value = \"Network error, failed to get AI analysis.\";\n      ElMessage.error(aiAnalysisError.value);\n    }\n  } finally {\n    aiAnalysisLoading.value = false;\n  }\n};\n\nconst formattedAnalysis = computed(() => {\n  if (!aiAnalysisResult.value) return \"\";\n  const text = aiAnalysisResult.value;\n\n  const analysisIndex = text.indexOf(\"分析：\");\n  const suggestionsIndex = text.indexOf(\"建议：\");\n\n  let analysisPart = text;\n\n  if (\n    analysisIndex !== -1 &&\n    suggestionsIndex !== -1 &&\n    suggestionsIndex > analysisIndex\n  ) {\n    analysisPart = text\n      .substring(analysisIndex + \"分析：\".length, suggestionsIndex)\n      .trim();\n  } else if (analysisIndex !== -1) {\n    analysisPart = text.substring(analysisIndex + \"分析：\".length).trim();\n  }\n\n  return analysisPart.replace(/\\n/g, \"<br>\");\n});\n\nconst renderBloodPressureChart = (data) => {\n  if (!data || data.length === 0) {\n    if (bloodPressureChart) {\n      bloodPressureChart.clear();\n    }\n    return;\n  }\n\n  if (!bloodPressureChart) {\n    bloodPressureChart = echarts.init(\n      document.getElementById(\"blood-pressure-chart\")\n    );\n  }\n\n  const sortedData = data.sort((a, b) => new Date(a.time) - new Date(b.time));\n\n  const dates = sortedData.map((item) => new Date(item.time).toLocaleString());\n  const systolicValues = sortedData.map((item) => item.systolic);\n  const diastolicValues = sortedData.map((item) => item.diastolic);\n  const pulseValues = sortedData.map((item) => item.pulse);\n\n  const option = {\n    title: {\n      text: \"Historical trend of blood pressure\",\n      left: \"center\",\n    },\n    tooltip: {\n      trigger: \"axis\",\n    },\n    legend: {\n      data: [\"Systolic pressure\", \"Diastolic pressure\", \"Pulse\"],\n      bottom: 0,\n    },\n    xAxis: {\n      type: \"category\",\n      data: dates,\n      axisLabel: {\n        rotate: 30,\n        interval: 0,\n      },\n    },\n    yAxis: {\n      type: \"value\",\n      name: \"Value (mmHg/bpm)\",\n    },\n    series: [\n      {\n        name: \"Systolic pressure\",\n        type: \"line\",\n        data: systolicValues,\n      },\n      {\n        name: \"Diastolic pressure\",\n        type: \"line\",\n        data: diastolicValues,\n      },\n      {\n        name: \"Pulse\",\n        type: \"line\",\n        data: pulseValues,\n      },\n    ],\n  };\n\n  bloodPressureChart.setOption(option);\n};\n\nconst renderBloodSugarChart = (data) => {\n  if (!data || data.length === 0) {\n    if (bloodSugarChart) {\n      bloodSugarChart.clear();\n    }\n    return;\n  }\n\n  if (!bloodSugarChart) {\n    bloodSugarChart = echarts.init(\n      document.getElementById(\"blood-sugar-chart\")\n    );\n  }\n\n  const sortedData = data.sort((a, b) => new Date(a.time) - new Date(b.time));\n\n  const dates = sortedData.map((item) => new Date(item.time).toLocaleString());\n  const bloodSugarValues = sortedData.map((item) => item.bloodSugar);\n\n  const option = {\n    title: {\n      text: \"Historical trend of blood glucose\",\n      left: \"center\",\n    },\n    tooltip: {\n      trigger: \"axis\",\n    },\n    legend: {\n      data: [\"Blood sugar\"],\n      bottom: 0,\n    },\n    xAxis: {\n      type: \"category\",\n      data: dates,\n      axisLabel: {\n        rotate: 30,\n        interval: 0,\n      },\n    },\n    yAxis: {\n      type: \"value\",\n      name: \"Value (mg/dL)\",\n    },\n    series: [\n      {\n        name: \"Blood sugar\",\n        type: \"line\",\n        data: bloodSugarValues,\n      },\n    ],\n  };\n\n  bloodSugarChart.setOption(option);\n};\n\nwatch(bloodPressureHistoryData, (newData) => {\n  renderBloodPressureChart(newData);\n});\n\nwatch(bloodSugarHistoryData, (newData) => {\n  renderBloodSugarChart(newData);\n});\n\nonMounted(() => {\n  navigator.mediaDevices\n    .getUserMedia({ video: true })\n    .then((stream) => {\n      video.value.srcObject = stream;\n    })\n    .catch((error) => {\n      console.error(\"Unable to access camera\", error);\n      ElMessage.error(\"Unable to access camera, please check permissions\");\n    });\n\n  fetchHistoryData();\n});\n</script>\n\n<style scoped>\n.page {\n  display: flex;\n  min-height: 100vh;\n  background-color: #f0f2f5;\n}\n\n.side {\n  background-color: #001529;\n  border-right: none;\n  transition: width 0.28s;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  position: relative;\n}\n\n.sTitle {\n  color: #fff;\n  padding: 20px;\n  font-size: 18px;\n  font-weight: bold;\n  text-align: center;\n}\n\n.menuWrap {\n  height: calc(100vh - 180px);\n  overflow-y: auto;\n}\n\n.el-menu {\n  border-right: none;\n  background-color: #001529;\n  flex: 1;\n}\n\n.el-menu-item,\n.el-sub-menu__title {\n  color: rgba(255, 255, 255, 0.65);\n}\n\n.el-menu-item:hover,\n.el-sub-menu__title:hover {\n  background-color: #000c17;\n  color: #fff;\n}\n\n.el-menu-item.is-active {\n  background-color: #1890ff;\n  color: #fff;\n}\n\n.el-sub-menu.is-active .el-sub-menu__title {\n  color: #fff;\n}\n\n.el-menu--inline {\n  background-color: #000c17 !important;\n}\n\n.el-menu--inline .el-menu-item {\n  background-color: #000c17 !important;\n  color: rgba(255, 255, 255, 0.65);\n}\n\n.el-menu--inline .el-menu-item:hover {\n  background-color: #001529 !important;\n  color: #fff;\n}\n\n.el-menu--inline .el-menu-item.is-active {\n  background-color: #1890ff !important;\n  color: #fff;\n}\n\n.el-menu-vertical-demo:not(.el-menu--collapse) {\n  width: 220px;\n  min-height: 100%;\n}\n\n.el-menu-item .el-icon,\n.el-sub-menu__title .el-icon {\n  vertical-align: middle;\n  margin-right: 10px;\n  width: 24px;\n  text-align: center;\n  font-size: 18px;\n}\n\n.el-sub-menu .el-menu-item {\n  min-width: 220px;\n  padding-left: 48px !important;\n}\n\n.main {\n  flex: 1;\n  padding: 24px;\n  overflow-y: auto;\n  height: calc(100vh - 48px);\n}\n\n.pHeader {\n  margin-bottom: 24px;\n}\n\n.hTitle h1 {\n  margin: 0;\n  font-size: 22px;\n  color: #303133;\n  font-weight: 600;\n}\n\n.sub-title {\n  color: #606266;\n  font-size: 14px;\n  margin-top: 4px;\n}\n\n.el-card {\n  margin-bottom: 24px;\n  border-radius: 4px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: 600;\n  color: #303133;\n  font-size: 16px;\n}\n\n.card-header .el-link {\n  font-size: 14px;\n  font-weight: normal;\n}\n\n.uInfo {\n  display: flex;\n  align-items: center;\n  padding: 20px;\n  color: #fff;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n}\n\n.uInfo span {\n  margin-left: 10px;\n  font-size: 16px;\n}\n\n.dCard {\n  margin-bottom: 24px;\n  border-radius: 4px;\n}\n\n.camWrap {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n}\n\n.camWrap video {\n  margin-bottom: 10px;\n}\n\n.button-group {\n  display: flex;\n  justify-content: center;\n  gap: 10px;\n  margin-top: 10px;\n}\n\n.uping {\n  padding: 20px;\n  text-align: center;\n}\n\n.dShow {\n  padding: 20px;\n}\n\n.noData {\n  padding: 20px;\n  text-align: center;\n  color: #999;\n}\n\n.hCard {\n  margin-bottom: 24px;\n  border-radius: 4px;\n}\n\n.ai-analysis-card {\n  margin-bottom: 24px;\n  border-radius: 4px;\n}\n\n.ai-analysis-content {\n  padding: 20px;\n}\n\n.ai-analysis-content h3 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  color: #303133;\n}\n\n.ai-analysis-content p {\n  margin-bottom: 15px;\n  color: #606266;\n  line-height: 1.6;\n  white-space: pre-wrap;\n}\n</style>\n","import script from \"./HealthMonitoringPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HealthMonitoringPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HealthMonitoringPage.vue?vue&type=style&index=0&id=58ad2cc3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-58ad2cc3\"]])\n\nexport default __exports__","<template>\r\n  <div v-if=\"isLoggedIn\" class=\"page\">\r\n    <!-- Sidebar -->\r\n    <el-aside width=\"220px\" class=\"side\">\r\n      <!-- System -->\r\n      <div class=\"sTitle\">Smart Home Elderly Care System</div>\r\n\r\n      <div class=\"menuWrap\">\r\n        <el-menu\r\n          default-active=\"/health-knowledge\"\r\n          class=\"el-menu-1\"\r\n          :router=\"true\"\r\n        >\r\n          <el-menu-item index=\"/home\">\r\n            <el-icon><Platform /></el-icon>\r\n            <span>Dashboard</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/health-monitoring\">\r\n            <el-icon><Monitor /></el-icon>\r\n            <span>Health monitoring</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/health-knowledge\">\r\n            <el-icon><DocumentCopy /></el-icon>\r\n            <span>Health Knowledge</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/user-settings\">\r\n            <el-icon><Setting /></el-icon>\r\n            <span>User Settings</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/ai-consultation\">\r\n            <el-icon><ChatDotRound /></el-icon>\r\n            <span>AI Consultation</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/diet-management\">\r\n            <el-icon><Food /></el-icon>\r\n            <span>Diet Management</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/sport-management\">\r\n            <el-icon><Basketball /></el-icon>\r\n            <span>Sports Management</span>\r\n          </el-menu-item>\r\n        </el-menu>\r\n      </div>\r\n\r\n      <!-- User Information (Bottom) -->\r\n      <div class=\"uInfo\" v-if=\"userInfo\">\r\n        <el-avatar :size=\"40\" :src=\"userInfo.avatar\"></el-avatar>\r\n        <span>{{ userInfo.username }}</span>\r\n      </div>\r\n    </el-aside>\r\n\r\n    <!-- ain Content Area (Elderly User side) -->\r\n    <div class=\"main\">\r\n      <!-- title -->\r\n      <div class=\"pHeader\">\r\n        <div class=\"hTitle\">\r\n          <h1>Health knowledge</h1>\r\n          <span class=\"sub-title\">Get the latest health information</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Health Knowledge Details -->\r\n      <el-card class=\"kCard\">\r\n        <div v-if=\"loading\">\r\n          <el-skeleton :rows=\"5\" animated />\r\n        </div>\r\n        <el-card v-else-if=\"error\" class=\"err\">\r\n          Failed to load health knowledge, please try again later.\r\n        </el-card>\r\n        <div v-else>\r\n          <el-list>\r\n            <el-list-item\r\n              v-for=\"knowledge in knowledgeList\"\r\n              :key=\"knowledge.id\"\r\n              @click=\"goToDetail(knowledge.id)\"\r\n              style=\"cursor: pointer\"\r\n            >\r\n              <el-card shadow=\"hover\" class=\"kItemCard\">\r\n                <template #header>\r\n                  <div class=\"card-header\">\r\n                    <span>{{ knowledge.title }}</span>\r\n                    <el-tag size=\"small\">{{ knowledge.category }}</el-tag>\r\n                  </div>\r\n                </template>\r\n                <div class=\"kContent\">{{ knowledge.contentSnippet }}...</div>\r\n                <div class=\"kFooter\">\r\n                  <span>Release time: {{ knowledge.formattedTime }}</span>\r\n                </div>\r\n              </el-card>\r\n            </el-list-item>\r\n          </el-list>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n  <div v-else>\r\n    <h1>Please log in first</h1>\r\n    <el-button type=\"primary\" @click=\"goToLogin\">Go login</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, ref, onMounted } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport {\r\n  Platform,\r\n  DocumentCopy,\r\n  Setting,\r\n  Monitor,\r\n  ChatDotRound,\r\n  Food,\r\n  Basketball,\r\n} from \"@element-plus/icons-vue\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst isLoggedIn = computed(() => store.getters.isLoggedIn);\r\n\r\nconst userInfo = computed(() => store.getters.userInfo);\r\n\r\nconst goToLogin = () => {\r\n  router.push(\"/\");\r\n};\r\n\r\nconst knowledgeApiUrl = ref(\r\n  \"http://localhost:3060/api/homecare/health-knowledge\"\r\n);\r\n\r\nconst knowledgeList = ref([]);\r\nconst loading = ref(true);\r\nconst error = ref(false);\r\n\r\nconst fetchKnowledge = async () => {\r\n  loading.value = true;\r\n  error.value = false;\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await fetch(knowledgeApiUrl.value, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      console.error(\r\n        \"API response error: \",\r\n        response.status,\r\n        response.statusText\r\n      );\r\n      throw new Error(`API request failed, status code: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    if (data.success) {\r\n      knowledgeList.value = data.data.map((item) => ({\r\n        ...item,\r\n        id: item.health_knowledge_id,\r\n        contentSnippet: item.content.substring(0, 50),\r\n        formattedTime:\r\n          new Date(item.publish_time).toLocaleDateString() +\r\n          \" \" +\r\n          new Date(item.publish_time).toLocaleTimeString(),\r\n      }));\r\n    } else {\r\n      console.error(\"API returned error: \", data.message);\r\n      ElMessage.error(data.message || \"Failed to acquire health knowledge\");\r\n      error.value = true;\r\n    }\r\n  } catch (err) {\r\n    console.error(\"API request error: \", err);\r\n    ElMessage.error(\"Network error, please try again later\");\r\n    error.value = true;\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst goToDetail = (health_knowledge_id) => {\r\n  router.push({ path: `/health-knowledge-detail/${health_knowledge_id}` });\r\n};\r\n\r\nonMounted(() => {\r\n  fetchKnowledge();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  min-height: 100vh;\r\n  background-color: #f0f2f5;\r\n}\r\n\r\n.side {\r\n  background-color: #001529;\r\n  border-right: none;\r\n  transition: width 0.28s;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  position: relative;\r\n}\r\n\r\n.sTitle {\r\n  color: #fff;\r\n  padding: 20px;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  text-align: center;\r\n}\r\n\r\n.menuWrap {\r\n  height: calc(100vh - 180px);\r\n  overflow-y: auto;\r\n}\r\n\r\n/* Override ElMenu default styles for dark theme */\r\n.el-menu {\r\n  border-right: none;\r\n  background-color: #001529;\r\n  /* Match sidebar */\r\n  flex: 1;\r\n}\r\n\r\n.el-menu-item,\r\n.el-sub-menu__title {\r\n  color: rgba(255, 255, 255, 0.65);\r\n}\r\n\r\n.el-menu-item:hover,\r\n.el-sub-menu__title:hover {\r\n  background-color: #000c17;\r\n  /* Darker hover */\r\n  color: #fff;\r\n}\r\n\r\n.el-menu-item.is-active {\r\n  background-color: #1890ff;\r\n  /* Active color */\r\n  color: #fff;\r\n}\r\n\r\n.el-sub-menu.is-active .el-sub-menu__title {\r\n  /* Keep parent active color */\r\n  color: #fff;\r\n}\r\n\r\n/* Submenu background */\r\n.el-menu--inline {\r\n  background-color: #000c17 !important;\r\n}\r\n\r\n.el-menu--inline .el-menu-item {\r\n  background-color: #000c17 !important;\r\n  color: rgba(255, 255, 255, 0.65);\r\n}\r\n\r\n.el-menu--inline .el-menu-item:hover {\r\n  background-color: #001529 !important;\r\n  /* Slightly lighter hover */\r\n  color: #fff;\r\n}\r\n\r\n.el-menu--inline .el-menu-item.is-active {\r\n  background-color: #1890ff !important;\r\n  /* Active color */\r\n  color: #fff;\r\n}\r\n\r\n.el-menu-vertical-demo:not(.el-menu--collapse) {\r\n  width: 220px;\r\n  min-height: 100%;\r\n}\r\n\r\n.el-menu-item .el-icon,\r\n.el-sub-menu__title .el-icon {\r\n  vertical-align: middle;\r\n  margin-right: 10px;\r\n  /* Increased spacing */\r\n  width: 24px;\r\n  text-align: center;\r\n  font-size: 18px;\r\n}\r\n\r\n.el-sub-menu .el-menu-item {\r\n  min-width: 220px;\r\n  /* Ensure submenu items fill width */\r\n  padding-left: 48px !important;\r\n  /* Indent submenu items */\r\n}\r\n\r\n.main {\r\n  flex: 1;\r\n  padding: 24px;\r\n  overflow-y: auto;\r\n  height: calc(100vh - 48px);\r\n}\r\n\r\n.pHeader {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.hTitle h1 {\r\n  margin: 0;\r\n  font-size: 22px;\r\n  /* Slightly smaller for admin */\r\n  color: #303133;\r\n  font-weight: 600;\r\n}\r\n\r\n.sub-title {\r\n  color: #606266;\r\n  font-size: 14px;\r\n  margin-top: 4px;\r\n}\r\n\r\n.el-card {\r\n  margin-bottom: 24px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-weight: 600;\r\n  /* Bold header */\r\n  color: #303133;\r\n  font-size: 16px;\r\n}\r\n\r\n.card-header .el-link {\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n}\r\n\r\n/* KPI Card Styles */\r\n.kpiRow {\r\n  margin-bottom: 0;\r\n  /* Remove bottom margin if cards have enough */\r\n}\r\n\r\n.kpiCard .el-card__body {\r\n  padding: 15px 20px;\r\n  /* Adjust padding */\r\n}\r\n\r\n.kItem {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.kIcon {\r\n  font-size: 36px;\r\n  /* Larger icons */\r\n  padding: 10px;\r\n  margin-right: 15px;\r\n  border-radius: 4px;\r\n  color: #fff;\r\n}\r\n\r\n.icon-user {\r\n  background-color: #409eff;\r\n}\r\n\r\n.icon-device {\r\n  background-color: #67c23a;\r\n}\r\n\r\n.icon-alert {\r\n  background-color: #f56c6c;\r\n}\r\n\r\n.icon-task {\r\n  background-color: #e6a23c;\r\n}\r\n\r\n.kText {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.kVal {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: #303133;\r\n  line-height: 1.2;\r\n}\r\n\r\n.kLabel {\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n\r\n.kpiCard.kpi-critical .kVal {\r\n  color: #f56c6c;\r\n  /* Highlight critical value */\r\n}\r\n\r\n/* Quick Access & System Notifications */\r\n.qaBtns .el-button {\r\n  margin-right: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.qaBtns .el-icon {\r\n  margin-right: 4px;\r\n}\r\n\r\n.system-notifications-card .el-card__body {\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n  max-height: 250px;\r\n  /* Limit height and make scrollable if needed */\r\n  overflow-y: auto;\r\n}\r\n\r\n.notification-timeline {\r\n  padding-left: 5px;\r\n  /* Adjust timeline padding */\r\n}\r\n\r\n.el-timeline-item__timestamp {\r\n  font-size: 12px;\r\n  /* Smaller timestamp */\r\n}\r\n\r\n/* Style for timeline item icon if used */\r\n.el-timeline-item__icon {\r\n  font-size: 16px;\r\n  /* Adjust icon size in timeline */\r\n}\r\n\r\n/* User Info Bottom Styles */\r\n.uInfo {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20px;\r\n  color: #fff;\r\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n}\r\n\r\n.uInfo span {\r\n  margin-left: 10px;\r\n  font-size: 16px;\r\n}\r\n\r\n.el-list-item {\r\n  padding: 0;\r\n}\r\n\r\n.kItemCard {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.kContent {\r\n  color: #606266;\r\n  padding: 0 15px;\r\n}\r\n\r\n.kFooter {\r\n  font-size: 12px;\r\n  color: #606266;\r\n  margin-top: 10px;\r\n  padding: 0 15px;\r\n}\r\n\r\n.kCard {\r\n  margin-bottom: 24px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.err {\r\n  color: #f56c6c;\r\n  text-align: center;\r\n  padding: 15px;\r\n  border: 1px solid #f56c6c;\r\n  border-radius: 4px;\r\n  margin-bottom: 15px;\r\n}\r\n</style>\r\n","import script from \"./HealthKnowledgePage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HealthKnowledgePage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HealthKnowledgePage.vue?vue&type=style&index=0&id=d25909ea&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d25909ea\"]])\n\nexport default __exports__","<template>\r\n  <div v-if=\"isLoggedIn\" class=\"page\">\r\n    <!-- Sidebar -->\r\n    <el-aside width=\"220px\" class=\"side\">\r\n      <!-- System -->\r\n      <div class=\"sTitle\">Smart Home Elderly Care System</div>\r\n\r\n      <div class=\"menuWrap\">\r\n        <el-menu\r\n          default-active=\"/health-knowledge\"\r\n          class=\"el-menu-1\"\r\n          :router=\"true\"\r\n        >\r\n          <el-menu-item index=\"/home\">\r\n            <el-icon><Platform /></el-icon>\r\n            <span>Dashboard</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/health-monitoring\">\r\n            <el-icon><Monitor /></el-icon>\r\n            <span>Health monitoring</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/health-knowledge\">\r\n            <el-icon><DocumentCopy /></el-icon>\r\n            <span>Health Knowledge</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/user-settings\">\r\n            <el-icon><Setting /></el-icon>\r\n            <span>User Settings</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/ai-consultation\">\r\n            <el-icon><ChatDotRound /></el-icon>\r\n            <span>AI Consultation</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/diet-management\">\r\n            <el-icon><Food /></el-icon>\r\n            <span>Diet Management</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/sport-management\">\r\n            <el-icon><Basketball /></el-icon>\r\n            <span>Sports Management</span>\r\n          </el-menu-item>\r\n        </el-menu>\r\n      </div>\r\n\r\n      <!-- User Information (Bottom) -->\r\n      <div class=\"uInfo\" v-if=\"userInfo\">\r\n        <el-avatar :size=\"40\" :src=\"userInfo.avatar\"></el-avatar>\r\n        <span>{{ userInfo.username }}</span>\r\n      </div>\r\n    </el-aside>\r\n\r\n    <!-- Main Content Area (Elderly User side) -->\r\n    <div class=\"main\">\r\n      <!-- title -->\r\n      <div class=\"pHeader\">\r\n        <div class=\"hTitle\">\r\n          <h1>Health Knowledge Details</h1>\r\n          <span class=\"sub-title\">View complete health information</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Health Knowledge Details -->\r\n      <el-card class=\"health-knowledge-card\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            Health Knowledge Details\r\n            <!-- Mute Button -->\r\n            <el-button type=\"info\" size=\"small\" @click=\"toggleMute\">\r\n              <!-- Icon Component -->\r\n              <el-icon v-if=\"isMuted\"><Mute /></el-icon>\r\n              <el-icon v-else><Microphone /></el-icon>\r\n              {{ isMuted ? \"Unmute\" : \"Mute\" }}\r\n            </el-button>\r\n          </div>\r\n        </template>\r\n        <div v-if=\"loading\">\r\n          <el-skeleton :rows=\"10\" animated />\r\n        </div>\r\n        <el-card v-else-if=\"error\" class=\"error-message\">\r\n          Failed to load health knowledge details, please try again later.\r\n        </el-card>\r\n        <div v-else>\r\n          <!-- Speech Playback Control Area -->\r\n          <div class=\"speech-controls\">\r\n            <div class=\"control-item\">\r\n              <span>Volume:</span>\r\n              <el-slider\r\n                v-model=\"speechVolume\"\r\n                :min=\"0\"\r\n                :max=\"1\"\r\n                :step=\"0.01\"\r\n                style=\"width: 150px; margin-left: 10px\"\r\n                @input=\"handleVolumeChange\"\r\n              ></el-slider>\r\n              <span>{{ speechVolume.toFixed(2) }}</span>\r\n            </div>\r\n            <div class=\"control-item\">\r\n              <span>Voice Tone:</span>\r\n              <el-select\r\n                v-model=\"selectedVoice\"\r\n                placeholder=\"Select Voice Tone\"\r\n                size=\"small\"\r\n                style=\"width: 150px; margin-left: 10px\"\r\n                value-key=\"name\"\r\n              >\r\n                <el-option\r\n                  v-for=\"voice in voices\"\r\n                  :key=\"voice.name\"\r\n                  :label=\"`${voice.name} (${voice.lang})`\"\r\n                  :value=\"voice\"\r\n                ></el-option>\r\n              </el-select>\r\n            </div>\r\n            <!-- Replay Button -->\r\n            <div class=\"control-item\">\r\n              <el-button type=\"primary\" size=\"small\" @click=\"replayKnowledge\">\r\n                Replay\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n          <h2>{{ knowledge.title }}</h2>\r\n          <hr class=\"gray-hr\" />\r\n          <div class=\"knowledge-info\">\r\n            <span>Label: </span\r\n            ><el-tag size=\"small\">{{ knowledge.category }}</el-tag>\r\n            <span class=\"author\">Author: {{ knowledge.author }}</span>\r\n            <span class=\"publish-time\"\r\n              >Release time: {{ knowledge.formattedTime }}</span\r\n            >\r\n          </div>\r\n\r\n          <div v-html=\"formattedContent\"></div>\r\n\r\n          <!-- Image Section (Moved after content) -->\r\n          <div v-if=\"knowledge.image_url\" class=\"image-section\">\r\n            <img\r\n              :src=\"knowledge.image_url\"\r\n              alt=\"Health Knowledge Image\"\r\n              class=\"knowledge-image\"\r\n            />\r\n          </div>\r\n\r\n          <!-- Video Section (Remains after content, changed to Bilibili iframe) -->\r\n          <div v-if=\"bilibiliEmbedUrl\" class=\"video-section\">\r\n            <iframe\r\n              :src=\"bilibiliEmbedUrl\"\r\n              scrolling=\"no\"\r\n              border=\"0\"\r\n              frameborder=\"no\"\r\n              framespacing=\"0\"\r\n              allowfullscreen=\"true\"\r\n              class=\"knowledge-video\"\r\n            ></iframe>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n  <div v-else>\r\n    <h1>Please log in first</h1>\r\n    <el-button type=\"primary\" @click=\"goToLogin\">Go login</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, ref, onMounted, watch, onBeforeUnmount } from \"vue\";\r\nimport { useRouter, useRoute } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport {\r\n  Platform,\r\n  DocumentCopy,\r\n  Setting,\r\n  Monitor,\r\n  ChatDotRound,\r\n  Food,\r\n  Basketball,\r\n  Mute, // Import mute icon component\r\n  VolumeUp,\r\n  Microphone, // Import volume icon component\r\n} from \"@element-plus/icons-vue\";\r\nimport {\r\n  ElMessage,\r\n  ElSlider,\r\n  ElSelect,\r\n  ElOption,\r\n  ElButton,\r\n  ElCard,\r\n  ElSkeleton,\r\n  ElTag,\r\n  ElAvatar,\r\n  ElIcon,\r\n  ElAside,\r\n  ElMenu,\r\n  ElMenuItem,\r\n} from \"element-plus\";\r\n\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nconst store = useStore();\r\n\r\nconst isLoggedIn = computed(() => store.getters.isLoggedIn);\r\n\r\nconst userInfo = computed(() => store.getters.userInfo);\r\n\r\nconst goToLogin = () => {\r\n  router.push(\"/\");\r\n};\r\n\r\nconst knowledgeApiUrl = ref(\r\n  \"http://localhost:3060/api/homecare/health-knowledge\"\r\n);\r\n\r\nconst knowledge = ref(null);\r\nconst loading = ref(true);\r\nconst error = ref(false);\r\nconst formattedContent = ref(\"\");\r\n\r\n// --- Speech Playback related state and variables ---\r\nconst synth = window.speechSynthesis;\r\nconst voices = ref([]);\r\nconst selectedVoice = ref(null);\r\nconst isSpeaking = ref(false);\r\n\r\nconst speechVolume = ref(1); // Default volume\r\n\r\nlet currentUtterance = null; // Variable to store the current SpeechSynthesisUtterance object\r\n\r\n// Mute related variables\r\nconst isMuted = ref(false); // Whether muted\r\nconst lastVolume = ref(1); // Volume before muting\r\n\r\n// --- Speech Playback related functions ---\r\nconst loadVoices = () => {\r\n  voices.value = synth.getVoices();\r\n  // If voices are already fetched, try to select a default Chinese voice\r\n  if (voices.value.length > 0) {\r\n    selectedVoice.value =\r\n      voices.value.find((voice) => voice.lang === \"zh-CN\") || voices.value[0];\r\n  }\r\n};\r\n\r\nconst speakText = (text) => {\r\n  if (!synth || isSpeaking.value) {\r\n    return;\r\n  }\r\n\r\n  const utterance = new SpeechSynthesisUtterance(text);\r\n  utterance.voice = selectedVoice.value; // Set the voice\r\n  utterance.pitch = 1; // Pitch (0 to 2)\r\n  utterance.rate = 1; // Set speech rate to a fixed value of 1\r\n  utterance.volume = speechVolume.value; // Use the volume variable\r\n\r\n  // Store the current utterance object\r\n  currentUtterance = utterance;\r\n\r\n  utterance.onstart = () => {\r\n    isSpeaking.value = true;\r\n  };\r\n\r\n  utterance.onend = () => {\r\n    isSpeaking.value = false;\r\n    currentUtterance = null; // Clear currentUtterance after speaking ends\r\n  };\r\n\r\n  utterance.onerror = (event) => {\r\n    console.error(\"Speech synthesis error:\", event);\r\n    if (event.error !== \"canceled\") {\r\n      ElMessage.error(\r\n        \"Speech playback failed, please check browser settings or try again.\"\r\n      );\r\n    }\r\n    isSpeaking.value = false;\r\n    currentUtterance = null;\r\n  };\r\n\r\n  synth.speak(utterance);\r\n};\r\n\r\nconst stopSpeaking = () => {\r\n  if (synth && isSpeaking.value) {\r\n    if (currentUtterance) {\r\n      currentUtterance.onerror = null; // Remove onerror listener before canceling\r\n    }\r\n    synth.cancel();\r\n    isSpeaking.value = false;\r\n    currentUtterance = null;\r\n  }\r\n};\r\n\r\nconst toggleMute = () => {\r\n  if (isMuted.value) {\r\n    speechVolume.value = lastVolume.value;\r\n    isMuted.value = false;\r\n  } else {\r\n    lastVolume.value = speechVolume.value;\r\n    speechVolume.value = 0;\r\n    isMuted.value = true;\r\n    stopSpeaking(); // Stop current playback when muted\r\n  }\r\n};\r\n\r\nconst handleVolumeChange = (value) => {\r\n  if (value > 0) {\r\n    isMuted.value = false;\r\n    lastVolume.value = value;\r\n  } else {\r\n    isMuted.value = true;\r\n  }\r\n\r\n  // If currently speaking, stop and restart with the new volume\r\n  if (isSpeaking.value && currentUtterance) {\r\n    const textToSpeak = currentUtterance.text;\r\n    stopSpeaking();\r\n    setTimeout(() => {\r\n      speakText(textToSpeak);\r\n    }, 200); // Delay restarting\r\n  }\r\n};\r\n\r\n// Added: Function to replay the knowledge details\r\nconst replayKnowledge = () => {\r\n  if (knowledge.value && !isMuted.value) {\r\n    stopSpeaking(); // Stop any current speaking\r\n    const textToSpeak = `${knowledge.value.title}. ${knowledge.value.content}`;\r\n    speakText(textToSpeak);\r\n  } else if (isMuted.value) {\r\n    ElMessage.warning(\"Please unmute to replay.\");\r\n  } else {\r\n    ElMessage.warning(\"Knowledge details not loaded yet.\");\r\n  }\r\n};\r\n\r\n// Listen for voiceschanged event, fetch voices again after they are loaded\r\nif (synth) {\r\n  synth.onvoiceschanged = loadVoices;\r\n}\r\n\r\n// Watch for voices changes, try to select a default voice after voices are loaded\r\nwatch(\r\n  voices,\r\n  (newVoices) => {\r\n    if (newVoices.length > 0 && !selectedVoice.value) {\r\n      selectedVoice.value =\r\n        newVoices.find((voice) => voice.lang === \"zh-CN\") || newVoices[0];\r\n    }\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\n// Computed property to generate Bilibili embed URL\r\nconst bilibiliEmbedUrl = computed(() => {\r\n  if (knowledge.value && knowledge.value.video_url) {\r\n    const url = knowledge.value.video_url;\r\n    // Check if it's already an embed URL\r\n    if (url.includes(\"//player.bilibili.com/player.html\")) {\r\n      return url;\r\n    }\r\n    // Attempt to extract BVid from typical Bilibili video URLs\r\n    const bvidMatch = url.match(/BV[0-9a-zA-Z]+/);\r\n    if (bvidMatch && bvidMatch[0]) {\r\n      const bvid = bvidMatch[0];\r\n      return `//player.bilibili.com/player.html?bvid=${bvid}&page=1`;\r\n    }\r\n    // You might need to add more complex parsing for other URL structures if necessary\r\n    console.warn(\"Could not generate Bilibili embed URL from:\", url);\r\n    return null; // Return null if unable to generate embed URL\r\n  }\r\n  return null;\r\n});\r\n\r\nconst fetchKnowledgeDetail = async (health_knowledge_id) => {\r\n  loading.value = true;\r\n  error.value = false;\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await fetch(\r\n      `${knowledgeApiUrl.value}/${health_knowledge_id}`,\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      console.error(\r\n        \"API response error: \",\r\n        response.status,\r\n        response.statusText\r\n      );\r\n      throw new Error(`API request failed, status code: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    if (data.success) {\r\n      knowledge.value = {\r\n        ...data.data,\r\n        formattedTime:\r\n          new Date(data.data.publish_time).toLocaleDateString() +\r\n          \" \" +\r\n          new Date(data.data.publish_time).toLocaleTimeString(),\r\n      };\r\n\r\n      formattedContent.value = knowledge.value.content.replace(/\\n/g, \"<br>\");\r\n\r\n      // Automatically speak the knowledge details after loading\r\n      if (!isMuted.value) {\r\n        const textToSpeak = `${knowledge.value.title}. ${knowledge.value.content}`;\r\n        speakText(textToSpeak);\r\n      }\r\n    } else {\r\n      console.error(\"API returned error:\", data.message);\r\n      ElMessage.error(\r\n        data.message || \"Failed to obtain health knowledge details\"\r\n      );\r\n      error.value = true;\r\n    }\r\n  } catch (err) {\r\n    console.error(\"API request error:\", err);\r\n    ElMessage.error(\"Network error, please try again later\");\r\n    error.value = true;\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  const healthKnowledgeId = route.params.health_knowledge_id;\r\n  if (healthKnowledgeId) {\r\n    fetchKnowledgeDetail(healthKnowledgeId);\r\n  } else {\r\n    ElMessage.error(\"Lack of Health Knowledge ID\");\r\n    error.value = true;\r\n    loading.value = false;\r\n  }\r\n\r\n  if (synth) {\r\n    loadVoices();\r\n  } else {\r\n    ElMessage.warning(\"Your browser does not support speech playback.\");\r\n  }\r\n});\r\n\r\n// Stop speech playback before component is unmounted\r\nonBeforeUnmount(() => {\r\n  stopSpeaking();\r\n});\r\n\r\n// This is a trick to let ESLint know that Mute, VolumeUp are used\r\n// They will be removed by Tree Shaking in production\r\n// eslint-disable-next-line no-unused-vars\r\nconst _icons = { Mute, VolumeUp };\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  min-height: 100vh;\r\n  background-color: #f0f2f5;\r\n}\r\n\r\n.side {\r\n  width: 220px;\r\n  background-color: #001529;\r\n  border-right: none;\r\n  transition: width 0.28s;\r\n  overflow-x: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: fixed;\r\n  height: 100vh;\r\n  z-index: 10;\r\n}\r\n\r\n.sTitle {\r\n  color: #fff;\r\n  padding: 20px;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  text-align: center;\r\n}\r\n\r\n.menuWrap {\r\n  height: calc(100vh - 180px);\r\n  overflow: auto;\r\n}\r\n\r\n/* Override ElMenu default styles for dark theme */\r\n.el-menu {\r\n  border-right: none;\r\n  background-color: #001529;\r\n  /* Match sidebar */\r\n  flex: 1;\r\n}\r\n\r\n.el-menu-item,\r\n.el-sub-menu__title {\r\n  color: rgba(255, 255, 255, 0.65);\r\n  /* Light text color */\r\n}\r\n\r\n.el-menu-item:hover,\r\n.el-sub-menu__title:hover {\r\n  background-color: #000c17;\r\n  /* Darker hover */\r\n  color: #fff;\r\n}\r\n\r\n.el-menu-item.is-active {\r\n  background-color: #1890ff;\r\n  /* Active color */\r\n  color: #fff;\r\n}\r\n\r\n.el-sub-menu.is-active .el-sub-menu__title {\r\n  /* Keep parent active color */\r\n  color: #fff;\r\n}\r\n\r\n/* Submenu background */\r\n.el-menu--inline {\r\n  background-color: #000c17 !important;\r\n}\r\n\r\n.el-menu--inline .el-menu-item {\r\n  background-color: #000c17 !important;\r\n  color: rgba(255, 255, 255, 0.65);\r\n}\r\n\r\n.el-menu--inline .el-menu-item:hover {\r\n  background-color: #001529 !important;\r\n  /* Slightly lighter hover */\r\n  color: #fff;\r\n}\r\n\r\n.el-menu-vertical-demo:not(.el-menu--collapse) {\r\n  width: 220px;\r\n  min-height: 100%;\r\n}\r\n\r\n.el-menu-item .el-icon,\r\n.el-sub-menu__title .el-icon {\r\n  vertical-align: middle;\r\n  margin-right: 10px;\r\n  /* Increased spacing */\r\n  width: 24px;\r\n  text-align: center;\r\n  font-size: 18px;\r\n}\r\n\r\n.el-sub-menu .el-menu-item {\r\n  min-width: 220px;\r\n  /* Ensure submenu items fill width */\r\n  padding-left: 48px !important;\r\n  /* Indent submenu items */\r\n}\r\n\r\n.main {\r\n  flex: 1;\r\n  padding: 24px;\r\n  overflow-y: auto;\r\n  margin-left: 220px;\r\n}\r\n\r\n.pHeader {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.hTitle h1 {\r\n  margin: 0;\r\n  font-size: 22px;\r\n  /* Slightly smaller for admin */\r\n  color: #303133;\r\n  font-weight: 600;\r\n}\r\n\r\n.sub-title {\r\n  color: #606266;\r\n  font-size: 14px;\r\n  margin-top: 4px;\r\n}\r\n\r\n.el-card {\r\n  margin-bottom: 24px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-weight: 600;\r\n  /* Bold header */\r\n  color: #303133;\r\n  font-size: 16px;\r\n}\r\n\r\n.card-header .el-link {\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n}\r\n\r\n/* User Info Bottom Styles */\r\n.uInfo {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20px;\r\n  color: #fff;\r\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.uInfo span {\r\n  margin-left: 10px;\r\n  font-size: 16px;\r\n}\r\n\r\n.card-footer {\r\n  font-size: 12px;\r\n  color: #606266;\r\n  margin-top: 10px;\r\n}\r\n\r\n.error-message {\r\n  color: #f56c6c;\r\n  text-align: center;\r\n  padding: 15px;\r\n  border: 1px solid #f56c6c;\r\n  border-radius: 4px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.knowledge-info {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.knowledge-info .el-tag {\r\n  margin-right: 10px;\r\n}\r\n\r\n.knowledge-info .author {\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n  color: #606266;\r\n  font-size: 12px;\r\n}\r\n\r\n.knowledge-info .publish-time {\r\n  color: #606266;\r\n  font-size: 12px;\r\n}\r\n\r\n.gray-hr {\r\n  border: 0;\r\n  height: 1px;\r\n  background: #ccc;\r\n  margin: 10px 0;\r\n}\r\n\r\n.speech-controls {\r\n  margin-bottom: 20px;\r\n  padding-bottom: 15px;\r\n  border-bottom: 1px solid #ebeef5;\r\n  display: flex;\r\n  gap: 20px;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.control-item {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.control-item span {\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n\r\n.card-header .el-button {\r\n  margin-left: 10px;\r\n}\r\n\r\n.image-section,\r\n.video-section {\r\n  margin-top: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.knowledge-image {\r\n  max-width: 100%;\r\n  height: auto;\r\n  display: block;\r\n  margin: 0 auto;\r\n}\r\n\r\n.knowledge-video {\r\n  width: 100%;\r\n  max-width: 600px;\r\n  height: 400px;\r\n  display: block;\r\n  margin: 0 auto;\r\n}\r\n</style>\r\n","import script from \"./HealthKnowledgeDetail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HealthKnowledgeDetail.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HealthKnowledgeDetail.vue?vue&type=style&index=0&id=0bd99ec0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0bd99ec0\"]])\n\nexport default __exports__","<template>\n  <div v-if=\"isLoggedIn\" class=\"page\">\n    <!-- Sidebar -->\n    <el-aside width=\"220px\" class=\"side\">\n      <!-- System Name -->\n      <div class=\"sTitle\">Smart Home Elderly Care System</div>\n\n      <div class=\"menuWrap\">\n        <el-menu\n          default-active=\"/user-settings\"\n          class=\"el-menu-1\"\n          :router=\"true\"\n        >\n          <el-menu-item index=\"/home\">\n            <el-icon><Platform /></el-icon>\n            <span>Dashboard</span>\n          </el-menu-item>\n          <el-menu-item index=\"/health-monitoring\">\n            <el-icon><Monitor /></el-icon>\n            <span>Health monitoring</span>\n          </el-menu-item>\n          <el-menu-item index=\"/health-knowledge\">\n            <el-icon><DocumentCopy /></el-icon>\n            <span>Health Knowledge</span>\n          </el-menu-item>\n          <el-menu-item index=\"/user-settings\">\n            <el-icon><Setting /></el-icon>\n            <span>User Settings</span>\n          </el-menu-item>\n          <el-menu-item index=\"/ai-consultation\">\n            <el-icon><ChatDotRound /></el-icon>\n            <span>AI Consultation</span>\n          </el-menu-item>\n          <el-menu-item index=\"/diet-management\">\n            <el-icon><Food /></el-icon>\n            <span>Diet Management</span>\n          </el-menu-item>\n          <el-menu-item index=\"/sport-management\">\n            <el-icon><Basketball /></el-icon>\n            <span>Sports Management</span>\n          </el-menu-item>\n        </el-menu>\n      </div>\n\n      <!-- User Info (Bottom) -->\n      <div class=\"uInfo\" v-if=\"userInfo\">\n        <el-avatar :size=\"40\" :src=\"userInfo.avatar\"></el-avatar>\n        <span>{{ userInfo.username }}</span>\n      </div>\n    </el-aside>\n\n    <!-- Main Content Area -->\n    <div class=\"main\">\n      <!-- Page Title -->\n      <div class=\"pHeader\">\n        <div class=\"hTitle\">\n          <h1>Personal Information</h1>\n          <span class=\"sub-title\">Update your personal details</span>\n        </div>\n      </div>\n\n      <!-- Information Form -->\n      <el-card class=\"info-card\">\n        <el-form\n          ref=\"profileForm\"\n          :model=\"profileData\"\n          :rules=\"rules\"\n          label-width=\"180px\"\n        >\n          <el-form-item label=\"Username\" prop=\"username\">\n            <el-input v-model=\"profileData.username\" />\n          </el-form-item>\n\n          <el-form-item label=\"Email\" prop=\"email\">\n            <el-input v-model=\"profileData.email\" />\n          </el-form-item>\n\n          <el-form-item label=\"Phone Number\" prop=\"phone\">\n            <el-input v-model=\"profileData.phone\" />\n          </el-form-item>\n\n          <el-form-item label=\"First Name\" prop=\"first_name\">\n            <el-input v-model=\"profileData.first_name\" />\n          </el-form-item>\n\n          <el-form-item label=\"Last Name\" prop=\"last_name\">\n            <el-input v-model=\"profileData.last_name\" />\n          </el-form-item>\n\n          <el-form-item label=\"Date of Birth\" prop=\"date_of_birth\">\n            <el-date-picker\n              v-model=\"profileData.date_of_birth\"\n              type=\"date\"\n              placeholder=\"Select Date\"\n              value-format=\"YYYY-MM-DD\"\n              style=\"width: 100%\"\n            />\n          </el-form-item>\n\n          <el-form-item label=\"Gender\" prop=\"gender\">\n            <el-select\n              v-model=\"profileData.gender\"\n              placeholder=\"Select Gender\"\n              style=\"width: 100%\"\n            >\n              <el-option label=\"Male\" value=\"male\" />\n              <el-option label=\"Female\" value=\"female\" />\n              <el-option label=\"Other\" value=\"other\" />\n            </el-select>\n          </el-form-item>\n\n          <el-form-item label=\"Address\" prop=\"address\">\n            <el-input type=\"textarea\" v-model=\"profileData.address\" />\n          </el-form-item>\n\n          <el-form-item label=\"City\" prop=\"city\">\n            <el-input v-model=\"profileData.city\" />\n          </el-form-item>\n\n          <el-form-item label=\"State\" prop=\"state\">\n            <el-input v-model=\"profileData.state\" />\n          </el-form-item>\n\n          <el-form-item label=\"Zip Code\" prop=\"zip_code\">\n            <el-input v-model=\"profileData.zip_code\" />\n          </el-form-item>\n\n          <el-form-item\n            label=\"Emergency Contact Name\"\n            prop=\"emergency_contact_name\"\n          >\n            <el-input v-model=\"profileData.emergency_contact_name\" />\n          </el-form-item>\n\n          <el-form-item\n            label=\"Emergency Contact Phone\"\n            prop=\"emergency_contact_phone\"\n          >\n            <el-input v-model=\"profileData.emergency_contact_phone\" />\n          </el-form-item>\n\n          <el-form-item label=\"Allergies\" prop=\"allergies\">\n            <el-input type=\"textarea\" v-model=\"profileData.allergies\" />\n          </el-form-item>\n\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"submitForm()\"> Save </el-button>\n            <el-button @click=\"fetchProfileData()\">Reset</el-button>\n          </el-form-item>\n        </el-form>\n      </el-card>\n    </div>\n  </div>\n  <div v-else>\n    <h1>Please Login</h1>\n    <el-button type=\"primary\" @click=\"goToLogin\">Go to Login</el-button>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted, computed } from \"vue\";\nimport { ElMessage } from \"element-plus\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nimport {\n  Platform,\n  DocumentCopy,\n  Setting,\n  Monitor,\n  ChatDotRound,\n  Food,\n  Basketball,\n} from \"@element-plus/icons-vue\";\n\nconst store = useStore();\nconst router = useRouter();\n\nconst isLoggedIn = computed(() => store.getters.isLoggedIn);\nconst userInfo = computed(() => store.getters.userInfo);\n\nconst goToLogin = () => {\n  router.push(\"/\");\n};\n\nconst profileApiUrl = ref(\"http://localhost:3060/api/homecare/users\"); // Base URL\nconst updateUserApiUrl = ref(\"http://localhost:3060/api/homecare/users\"); // API URL for updating user\n\nconst profileForm = ref(null);\n\nconst profileData = reactive({\n  username: \"\",\n  email: \"\",\n  phone: \"\",\n  user_type: \"\",\n  first_name: \"\",\n  last_name: \"\",\n  date_of_birth: \"\",\n  gender: \"\",\n  address: \"\",\n  city: \"\",\n  state: \"\",\n  zip_code: \"\",\n  emergency_contact_name: \"\",\n  emergency_contact_phone: \"\",\n  allergies: \"\",\n});\n\nconst rules = reactive({\n  username: [\n    { required: true, message: \"Please input username\", trigger: \"blur\" },\n  ],\n  email: [\n    { required: true, message: \"Please input email\", trigger: \"blur\" },\n    {\n      type: \"email\",\n      message: \"Please input a valid email address\",\n      trigger: [\"blur\", \"change\"],\n    },\n  ],\n  phone: [\n    { required: true, message: \"Please input phone number\", trigger: \"blur\" },\n  ],\n  first_name: [\n    { required: true, message: \"Please input first name\", trigger: \"blur\" },\n  ],\n  last_name: [\n    { required: true, message: \"Please input last name\", trigger: \"blur\" },\n  ],\n  date_of_birth: [\n    {\n      required: true,\n      message: \"Please select date of birth\",\n      trigger: \"change\",\n    },\n  ],\n  gender: [\n    { required: true, message: \"Please select gender\", trigger: \"change\" },\n  ],\n  address: [\n    { required: true, message: \"Please input address\", trigger: \"blur\" },\n  ],\n  city: [{ required: true, message: \"Please input city\", trigger: \"blur\" }],\n  state: [{ required: true, message: \"Please input state\", trigger: \"blur\" }],\n  zip_code: [\n    { required: true, message: \"Please input zip code\", trigger: \"blur\" },\n  ],\n  emergency_contact_name: [\n    {\n      required: true,\n      message: \"Please input emergency contact name\",\n      trigger: \"blur\",\n    },\n  ],\n  emergency_contact_phone: [\n    {\n      required: true,\n      message: \"Please input emergency contact phone\",\n      trigger: \"blur\",\n    },\n  ],\n  allergies: [\n    { required: true, message: \"Please input allergies\", trigger: \"blur\" },\n  ],\n});\n\nconst submitForm = async () => {\n  profileForm.value.validate(async (valid) => {\n    if (valid) {\n      try {\n        const token = localStorage.getItem(\"token\") || store.getters.token;\n        const response = await fetch(\n          `${updateUserApiUrl.value}/${store.getters.userInfo.id}`,\n          {\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${token}`,\n            },\n            body: JSON.stringify(profileData),\n          }\n        );\n\n        const data = await response.json();\n\n        if (data.success) {\n          ElMessage.success(\"Personal information updated successfully\");\n          store.commit(\"setUserInfo\", {\n            ...store.getters.userInfo,\n            ...profileData,\n          });\n        } else {\n          ElMessage.error(\n            data.message || \"Failed to update personal information\"\n          );\n        }\n      } catch (error) {\n        console.error(\"Failed to update personal information:\", error);\n        ElMessage.error(\"Network error, please try again later\");\n      }\n    } else {\n      console.log(\"Form validation failed\");\n      return false;\n    }\n  });\n};\n\nconst fetchProfileData = async () => {\n  try {\n    const token = localStorage.getItem(\"token\") || store.getters.token;\n    const userId = store.getters.userInfo.id;\n\n    const response = await fetch(`${profileApiUrl.value}/${userId}`, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const data = await response.json();\n\n    if (data.success && data.data) {\n      // Correctly handle date conversion before assigning\n      if (data.data.date_of_birth) {\n        profileData.date_of_birth = data.data.date_of_birth; // Keep as string for el-date-picker\n      }\n      Object.assign(profileData, data.data);\n      // Log the data after assigning to see if it's populated\n      console.log(\"profileData after API call:\", profileData);\n    } else {\n      ElMessage.error(data.message || \"Failed to get user information\");\n    }\n  } catch (error) {\n    console.error(\"Failed to get user information:\", error);\n    ElMessage.error(\"Network error, please try again later\");\n  }\n};\n\nonMounted(async () => {\n  fetchProfileData(); // Fetch data on component mount\n});\n</script>\n\n<style scoped>\n.page {\n  display: flex;\n  min-height: 100vh;\n  background-color: #f0f2f5;\n}\n\n.side {\n  background-color: #001529;\n  border-right: none;\n  transition: width 0.28s;\n  overflow: hidden; /* Hide horizontal scrollbar */\n  display: flex;\n  flex-direction: column;\n  height: 100vh; /* Occupy the entire viewport height */\n  position: relative; /* Ensure user-info-bottom can be positioned relative to it */\n}\n\n/* System Name Style */\n.sTitle {\n  color: #fff;\n  padding: 20px;\n  font-size: 18px;\n  font-weight: bold;\n  text-align: center;\n}\n\n/* Menu Container, Set Fixed Height and Hide Overflow */\n.menuWrap {\n  height: calc(\n    100vh - 180px\n  ); /* 100vh minus the height of the bottom user information and system name */\n  overflow-y: auto;\n}\n\n/* Override ElMenu default styles for dark theme */\n.el-menu {\n  border-right: none;\n  background-color: #001529;\n  /* Match sidebar */\n  flex: 1; /* Occupy remaining space */\n}\n\n.el-menu-item,\n.el-sub-menu__title {\n  color: rgba(255, 255, 255, 0.65);\n  /* Light text color */\n}\n\n.el-menu-item:hover,\n.el-sub-menu__title:hover {\n  background-color: #000c17;\n  /* Darker hover */\n  color: #fff;\n}\n\n.el-menu-item.is-active {\n  background-color: #1890ff;\n  /* Active color */\n  color: #fff;\n}\n\n.el-sub-menu.is-active .el-sub-menu__title {\n  /* Keep parent active color */\n  color: #fff;\n}\n\n/* Submenu background */\n.el-menu--inline {\n  background-color: #000c17 !important;\n}\n\n.el-menu--inline .el-menu-item {\n  background-color: #000c17 !important;\n  color: rgba(255, 255, 255, 0.65);\n}\n\n.el-menu--inline .el-menu-item:hover {\n  background-color: #001529 !important;\n  /* Slightly lighter hover */\n  color: #fff;\n}\n\n.el-menu--inline .el-menu-item.is-active {\n  background-color: #1890ff !important;\n  /* Active color */\n  color: #fff;\n}\n\n.el-menu-vertical-demo:not(.el-menu--collapse) {\n  width: 220px;\n  min-height: 100%;\n}\n\n.el-menu-item .el-icon,\n.el-sub-menu__title .el-icon {\n  vertical-align: middle;\n  margin-right: 10px;\n  /* Increased spacing */\n  width: 24px;\n  text-align: center;\n  font-size: 18px;\n}\n\n.el-sub-menu .el-menu-item {\n  min-width: 220px;\n  /* Ensure submenu items fill width */\n  padding-left: 48px !important;\n  /* Indent submenu items */\n}\n\n.main {\n  flex: 1;\n  padding: 24px;\n  overflow-y: auto;\n  height: calc(100vh - 48px); /* Subtract the height of the padding */\n}\n\n.pHeader {\n  margin-bottom: 24px;\n}\n\n.hTitle h1 {\n  margin: 0;\n  font-size: 22px;\n  /* Slightly smaller for admin */\n  color: #303133;\n  font-weight: 600;\n}\n\n.sub-title {\n  color: #606266;\n  font-size: 14px;\n  margin-top: 4px;\n}\n\n.el-card {\n  margin-bottom: 24px;\n  border-radius: 4px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: 600;\n  /* Bold header */\n  color: #303133;\n  font-size: 16px;\n}\n\n.card-header .el-link {\n  font-size: 14px;\n  font-weight: normal;\n}\n\n/* KPI Card Styles */\n.kpiRow {\n  margin-bottom: 0;\n  /* Remove bottom margin if cards have enough */\n}\n\n.kpiCard .el-card__body {\n  padding: 15px 20px;\n  /* Adjust padding */\n}\n\n.kItem {\n  display: flex;\n  align-items: center;\n}\n\n.kIcon {\n  font-size: 36px;\n  /* Larger icons */\n  padding: 10px;\n  margin-right: 15px;\n  border-radius: 4px;\n  color: #fff;\n}\n\n.icon-user {\n  background-color: #409eff;\n}\n\n.icon-device {\n  background-color: #67c23a;\n}\n\n.icon-alert {\n  background-color: #f56c6c;\n}\n\n.icon-task {\n  background-color: #e6a23c;\n}\n\n.kText {\n  display: flex;\n  flex-direction: column;\n}\n\n.kVal {\n  font-size: 24px;\n  font-weight: bold;\n  color: #303133;\n  line-height: 1.2;\n}\n\n.kLabel {\n  font-size: 14px;\n  color: #606266;\n}\n\n.kpiCard.kpi-critical .kVal {\n  color: #f56c6c;\n  /* Highlight critical value */\n}\n\n/* Quick Access & System Notifications */\n.qaBtns .el-button {\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n\n.qaBtns .el-icon {\n  margin-right: 4px;\n}\n\n/* Renamed class */\n.system-notifications-card .el-card__body {\n  padding-top: 10px;\n  padding-bottom: 10px;\n  max-height: 250px;\n  /* Limit height and make scrollable if needed */\n  overflow-y: auto;\n}\n\n.notification-timeline {\n  padding-left: 5px;\n  /* Adjust timeline padding */\n}\n\n.el-timeline-item__timestamp {\n  font-size: 12px;\n  /* Smaller timestamp */\n}\n\n/* Style for timeline item icon if used */\n.el-timeline-item__icon {\n  font-size: 16px;\n  /* Adjust icon size in timeline */\n}\n\n/* User Info Bottom Styles */\n.uInfo {\n  display: flex;\n  align-items: center;\n  padding: 20px;\n  color: #fff;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  position: absolute; /* Absolute positioning */\n  bottom: 0; /* Located at the bottom */\n  left: 0; /* Aligned to the left */\n  width: 100%; /* Occupy the entire width */\n}\n\n.uInfo span {\n  margin-left: 10px;\n  font-size: 16px;\n}\n/* Health Data Styles */\n.dCard {\n  margin-bottom: 24px;\n  border-radius: 4px;\n}\n\n.camWrap {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n}\n\n.camWrap video {\n  margin-bottom: 10px;\n}\n\n.uping {\n  padding: 20px;\n  text-align: center;\n}\n\n.dShow {\n  padding: 20px;\n}\n\n.noData {\n  padding: 20px;\n  text-align: center;\n  color: #999;\n}\n\n/* History Data Styles */\n.hCard {\n  margin-bottom: 24px;\n  border-radius: 4px;\n}\n.profile-page {\n  padding: 24px;\n}\n\n.info-card {\n  margin-top: 24px;\n}\n\n/* Page Title Style */\n.pHeader {\n  margin-bottom: 24px;\n}\n\n.hTitle h1 {\n  margin: 0;\n  font-size: 22px;\n  color: #303133;\n  font-weight: 600;\n}\n\n.sub-title {\n  color: #606266;\n  font-size: 14px;\n  margin-top: 4px;\n}\n</style>\n","import script from \"./UserSettingsPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserSettingsPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserSettingsPage.vue?vue&type=style&index=0&id=2c9bd8fe&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2c9bd8fe\"]])\n\nexport default __exports__","<template>\r\n  <div v-if=\"isLoggedIn\" class=\"page\">\r\n    <!-- Left Sidebar -->\r\n    <el-aside width=\"220px\" class=\"side\">\r\n      <!-- System Name -->\r\n      <div class=\"sTitle\">Smart Home Elderly Care System</div>\r\n\r\n      <div class=\"menuWrap\">\r\n        <el-menu\r\n          default-active=\"/ai-consultation\"\r\n          class=\"el-menu-1\"\r\n          :router=\"true\"\r\n        >\r\n          <el-menu-item index=\"/home\">\r\n            <el-icon><Platform /></el-icon>\r\n            <span>Dashboard</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/health-monitoring\">\r\n            <el-icon><Monitor /></el-icon>\r\n            <span>Health monitoring</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/health-knowledge\">\r\n            <el-icon><DocumentCopy /></el-icon>\r\n            <span>Health Knowledge</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/user-settings\">\r\n            <el-icon><Setting /></el-icon>\r\n            <span>User Settings</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/ai-consultation\">\r\n            <el-icon><ChatDotRound /></el-icon>\r\n            <span>AI Consultation</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/diet-management\">\r\n            <el-icon><Food /></el-icon>\r\n            <span>Diet Management</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/sport-management\">\r\n            <el-icon><Basketball /></el-icon>\r\n            <span>Sports Management</span>\r\n          </el-menu-item>\r\n        </el-menu>\r\n      </div>\r\n\r\n      <!-- User Info (Bottom) -->\r\n      <div class=\"uInfo\" v-if=\"userInfo\">\r\n        <el-avatar :size=\"40\" :src=\"userInfo.avatar\"></el-avatar>\r\n        <span>{{ userInfo.username }}</span>\r\n      </div>\r\n    </el-aside>\r\n\r\n    <!-- Main Content (AI Consultation Page) -->\r\n    <div class=\"main\">\r\n      <!-- Page Title -->\r\n      <div class=\"pHeader\">\r\n        <div class=\"hTitle\">\r\n          <h1>AI Consultation</h1>\r\n          <span class=\"sub-title\">Chat with AI for health advice</span>\r\n        </div>\r\n      </div>\r\n\r\n      <el-card class=\"ai-consultation-card\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            Chat with your health assistant\r\n            <!-- Mute Button -->\r\n            <el-button type=\"info\" size=\"small\" @click=\"toggleMute\">\r\n              <!-- Icon Component -->\r\n              <el-icon v-if=\"isMuted\"><Microphone /></el-icon>\r\n              <el-icon v-else><Mute /></el-icon>\r\n              {{ isMuted ? \"Unmute\" : \"Mute\" }}\r\n            </el-button>\r\n          </div>\r\n        </template>\r\n\r\n        <div class=\"chat-area\">\r\n          <div class=\"messages-list\" ref=\"messagesList\">\r\n            <div\r\n              v-for=\"(message, index) in conversationHistory\"\r\n              :key=\"index\"\r\n              :class=\"['message-item', message.role]\"\r\n            >\r\n              <div class=\"message-content\">\r\n                <p>{{ message.content }}</p>\r\n              </div>\r\n            </div>\r\n            <div\r\n              v-if=\"consulting\"\r\n              class=\"loading-message message-item assistant\"\r\n            >\r\n              <div class=\"message-content\">\r\n                <p>AI is thinking...</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"input-area\">\r\n            <el-input\r\n              v-model=\"userQuestion\"\r\n              :rows=\"2\"\r\n              type=\"textarea\"\r\n              placeholder=\"Enter your message...\"\r\n              @keyup.enter=\"startAiConsultation\"\r\n              :disabled=\"consulting || isListening\"\r\n            />\r\n            <!-- Microphone Button -->\r\n            <el-button\r\n              type=\"danger\"\r\n              @click=\"startSpeechRecognition\"\r\n              :loading=\"isListening\"\r\n              :disabled=\"consulting || !recognition\"\r\n            >\r\n              <el-icon><Microphone /></el-icon>\r\n              {{ isListening ? \"Stop Recording\" : \"Voice Input\" }}\r\n            </el-button>\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"startAiConsultation\"\r\n              :loading=\"consulting\"\r\n              :disabled=\"!userQuestion.trim() || consulting || isListening\"\r\n            >\r\n              Send\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Speech Playback Control Area -->\r\n        <div class=\"speech-controls\">\r\n          <!-- Removed speech rate control -->\r\n          <div class=\"control-item\">\r\n            <span>Volume:</span>\r\n            <el-slider\r\n              v-model=\"speechVolume\"\r\n              :min=\"0\"\r\n              :max=\"1\"\r\n              :step=\"0.01\"\r\n              style=\"width: 150px; margin-left: 10px\"\r\n              @input=\"handleVolumeChange\"\r\n            ></el-slider>\r\n            <span>{{ speechVolume.toFixed(2) }}</span>\r\n          </div>\r\n          <div class=\"control-item\">\r\n            <span>Voice Tone:</span>\r\n            <el-select\r\n              v-model=\"selectedVoice\"\r\n              placeholder=\"Select Voice Tone\"\r\n              size=\"small\"\r\n              style=\"width: 150px; margin-left: 10px\"\r\n              value-key=\"name\"\r\n            >\r\n              <el-option\r\n                v-for=\"voice in voices\"\r\n                :key=\"voice.name\"\r\n                :label=\"`${voice.name} (${voice.lang})`\"\r\n                :value=\"voice\"\r\n              ></el-option>\r\n            </el-select>\r\n          </div>\r\n          <!-- Added: Speech Recognition Language Selection -->\r\n          <div class=\"control-item\">\r\n            <span>Recognition Language:</span>\r\n            <el-select\r\n              v-model=\"selectedRecognitionLang\"\r\n              placeholder=\"Select Language\"\r\n              size=\"small\"\r\n              style=\"width: 120px; margin-left: 10px\"\r\n            >\r\n              <el-option label=\"Chinese\" value=\"zh-CN\"></el-option>\r\n              <el-option label=\"English\" value=\"en-US\"></el-option>\r\n              <!-- You can add more language options as needed -->\r\n            </el-select>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"consultationError || recognitionError\" class=\"error-message\">\r\n          {{ consultationError || recognitionError }}\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n  <div v-else>\r\n    <h1>Please log in</h1>\r\n    <el-button type=\"primary\" @click=\"goToLogin\">Go to Login</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, ref, nextTick, onMounted, watch } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport {\r\n  Platform,\r\n  DocumentCopy,\r\n  Setting,\r\n  Monitor,\r\n  ChatDotRound,\r\n  Food,\r\n  Basketball,\r\n  Mute,\r\n  VolumeUp,\r\n  Microphone,\r\n} from \"@element-plus/icons-vue\";\r\nimport {\r\n  ElMessage,\r\n  ElSlider,\r\n  ElSelect,\r\n  ElOption,\r\n  ElButton,\r\n} from \"element-plus\";\r\nimport axios from \"axios\";\r\n\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst isLoggedIn = computed(() => store.getters.isLoggedIn);\r\nconst userInfo = computed(() => store.getters.userInfo);\r\n\r\nconst goToLogin = () => {\r\n  router.push(\"/\");\r\n};\r\n\r\nconst userQuestion = ref(\"\");\r\nconst conversationHistory = ref([]);\r\nconst consulting = ref(false);\r\nconst consultationError = ref(null);\r\nconst messagesList = ref(null);\r\n\r\nconst aiConsultationApiUrl = ref(\r\n  \"http://localhost:3060/api/homecare2/ai-consultation\"\r\n);\r\n\r\n// --- Speech Playback related state and variables ---\r\nconst synth = window.speechSynthesis;\r\nconst voices = ref([]);\r\nconst selectedVoice = ref(null);\r\nconst isSpeaking = ref(false);\r\n\r\n// Removed speech rate variable\r\n// const speechRate = ref(1); // Default speech rate\r\nconst speechVolume = ref(1); // Default volume\r\n\r\nlet currentUtterance = null; // Variable to store the current SpeechSynthesisUtterance object\r\n\r\n// Mute related variables\r\nconst isMuted = ref(false); // Whether muted\r\nconst lastVolume = ref(1); // Volume before muting\r\n\r\n// --- Speech Recognition related state and variables ---\r\nconst recognition = ref(null); // Stores the SpeechRecognition object\r\nconst isListening = ref(false); // Flag indicating if listening\r\nconst transcript = ref(\"\"); // Stores the recognized text\r\nconst recognitionError = ref(null); // Stores speech recognition error information\r\n\r\n// Added: Selected speech recognition language\r\nconst selectedRecognitionLang = ref(\"zh-CN\"); // Default Chinese\r\n\r\n// --- Speech Playback related functions ---\r\nconst loadVoices = () => {\r\n  voices.value = synth.getVoices();\r\n  // If voices are already fetched, try to select a default Chinese voice\r\n  if (voices.value.length > 0) {\r\n    selectedVoice.value =\r\n      voices.value.find((voice) => voice.lang === \"zh-CN\") || voices.value[0];\r\n  }\r\n};\r\n\r\nconst speakText = (text) => {\r\n  if (!synth || isSpeaking.value) {\r\n    return;\r\n  }\r\n\r\n  // Before starting a new playback, stop speech recognition if it's active\r\n  if (isListening.value) {\r\n    stopSpeechRecognition();\r\n  }\r\n\r\n  const utterance = new SpeechSynthesisUtterance(text);\r\n  utterance.voice = selectedVoice.value; // Set the voice\r\n  utterance.pitch = 1; // Pitch (0 to 2)\r\n  utterance.rate = 1; // Set speech rate to a fixed value of 1\r\n  utterance.volume = speechVolume.value; // Use the volume variable\r\n\r\n  // Store the current utterance object\r\n  currentUtterance = utterance;\r\n\r\n  utterance.onstart = () => {\r\n    isSpeaking.value = true;\r\n  };\r\n\r\n  utterance.onend = () => {\r\n    isSpeaking.value = false;\r\n    currentUtterance = null; // Clear currentUtterance after speaking ends\r\n  };\r\n\r\n  utterance.onerror = (event) => {\r\n    console.error(\"Speech synthesis error:\", event);\r\n    // Check if the error was caused by cancel(), if so, don't show an error message\r\n    if (event.error !== \"canceled\") {\r\n      ElMessage.error(\r\n        \"Speech playback failed, please check browser settings or try again.\"\r\n      );\r\n    }\r\n    isSpeaking.value = false;\r\n    currentUtterance = null;\r\n  };\r\n\r\n  synth.speak(utterance);\r\n};\r\n\r\nconst stopSpeaking = () => {\r\n  if (synth && isSpeaking.value) {\r\n    if (currentUtterance) {\r\n      currentUtterance.onerror = null; // Remove onerror listener before canceling to avoid triggering error due to cancel\r\n    }\r\n    synth.cancel();\r\n    isSpeaking.value = false;\r\n    currentUtterance = null;\r\n  }\r\n};\r\n\r\nconst toggleMute = () => {\r\n  if (isMuted.value) {\r\n    speechVolume.value = lastVolume.value;\r\n    isMuted.value = false;\r\n  } else {\r\n    lastVolume.value = speechVolume.value;\r\n    speechVolume.value = 0;\r\n    isMuted.value = true;\r\n    stopSpeaking(); // Stop current playback when muted\r\n  }\r\n};\r\n\r\nconst handleVolumeChange = (value) => {\r\n  // Use value because we need to determine if muted based on the slider value\r\n  if (value > 0) {\r\n    isMuted.value = false;\r\n    lastVolume.value = value;\r\n  } else {\r\n    isMuted.value = true;\r\n  }\r\n\r\n  // If currently speaking, stop and restart with the new volume\r\n  if (isSpeaking.value && currentUtterance) {\r\n    const textToSpeak = currentUtterance.text;\r\n    stopSpeaking();\r\n    setTimeout(() => {\r\n      speakText(textToSpeak);\r\n    }, 200); // Delay restarting to give the system time to process the cancel operation\r\n  }\r\n};\r\n\r\n// Removed handleRateChange function\r\n// const handleRateChange = (_value) => { ... };\r\n\r\n// --- Speech Recognition related functions ---\r\nconst initSpeechRecognition = () => {\r\n  const SpeechRecognition =\r\n    window.SpeechRecognition || window.webkitSpeechRecognition;\r\n\r\n  if (!SpeechRecognition) {\r\n    recognitionError.value =\r\n      \"Your browser does not support speech recognition.\";\r\n    ElMessage.warning(recognitionError.value);\r\n    return;\r\n  }\r\n\r\n  // If there is already a recognition instance, stop and clear it first\r\n  if (recognition.value) {\r\n    recognition.value.stop();\r\n    recognition.value = null;\r\n  }\r\n\r\n  recognition.value = new SpeechRecognition();\r\n  recognition.value.lang = selectedRecognitionLang.value; // Use the selected language\r\n  recognition.value.continuous = false; // Set to non-continuous recognition\r\n  recognition.value.interimResults = true; // Allow getting interim results\r\n\r\n  recognition.value.onresult = (event) => {\r\n    let finalTranscript = \"\";\r\n    let interimTranscript = \"\";\r\n\r\n    for (let i = event.resultIndex; i < event.results.length; ++i) {\r\n      const result = event.results[i];\r\n      if (result.isFinal) {\r\n        finalTranscript += result[0].transcript;\r\n      } else {\r\n        interimTranscript += result[0].transcript;\r\n      }\r\n    }\r\n    // Update input box content in real-time\r\n    userQuestion.value = finalTranscript || interimTranscript;\r\n  };\r\n\r\n  recognition.value.onerror = (event) => {\r\n    console.error(\"Speech recognition error:\", event.error);\r\n    // Check if the error was caused by stop(), if so, don't show an error message\r\n    if (event.error !== \"aborted\") {\r\n      recognitionError.value = `Speech recognition error: ${event.error}`;\r\n      ElMessage.error(recognitionError.value);\r\n    }\r\n    isListening.value = false;\r\n  };\r\n\r\n  recognition.value.onend = () => {\r\n    isListening.value = false;\r\n    console.log(\"Speech recognition ended.\");\r\n    // If there is a final recognition result and the user hasn't manually stopped recording, automatically send\r\n    // Use userQuestion.value to check if there is a final recognition result\r\n    if (userQuestion.value.trim() && !consulting.value) {\r\n      startAiConsultation();\r\n    }\r\n  };\r\n\r\n  recognition.value.onstart = () => {\r\n    isListening.value = true;\r\n    console.log(\"Speech recognition started.\");\r\n    recognitionError.value = null;\r\n  };\r\n};\r\n\r\nconst startSpeechRecognition = () => {\r\n  if (!recognition.value) {\r\n    ElMessage.warning(\"Speech recognition feature is not available.\");\r\n    return;\r\n  }\r\n  if (isListening.value) {\r\n    stopSpeechRecognition();\r\n  } else {\r\n    // --- Added logic: Stop speech playback before starting speech recognition ---\r\n    if (isSpeaking.value) {\r\n      stopSpeaking();\r\n    }\r\n    // --------------------------------------------------------------------------\r\n\r\n    transcript.value = \"\";\r\n    userQuestion.value = \"\"; // Clear input box\r\n    recognition.value.start();\r\n  }\r\n};\r\n\r\nconst stopSpeechRecognition = () => {\r\n  if (recognition.value && isListening.value) {\r\n    recognition.value.stop();\r\n    isListening.value = false;\r\n  }\r\n};\r\n\r\n// Listen for voiceschanged event, fetch voices again after they are loaded\r\nif (synth) {\r\n  synth.onvoiceschanged = loadVoices;\r\n}\r\n\r\n// Watch for voices changes, try to select a default voice after voices are loaded\r\nwatch(\r\n  voices,\r\n  (newVoices) => {\r\n    if (newVoices.length > 0 && !selectedVoice.value) {\r\n      selectedVoice.value =\r\n        newVoices.find((voice) => voice.lang === \"zh-CN\") || newVoices[0];\r\n    }\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\n// Added: Watch for changes in selected recognition language and reinitialize speech recognition\r\nwatch(selectedRecognitionLang, (newLang, oldLang) => {\r\n  if (newLang !== oldLang) {\r\n    initSpeechRecognition();\r\n  }\r\n});\r\n\r\n// Removed watch for speechVolume and speechRate\r\n// watch(speechVolume, (newVolume) => { ... });\r\n// watch(speechRate, (newRate) => { ... });\r\n\r\nconst startAiConsultation = async () => {\r\n  // Before sending the request, ensure userQuestion has a value\r\n  if (!userQuestion.value.trim() || consulting.value) {\r\n    return;\r\n  }\r\n\r\n  const question = userQuestion.value;\r\n  userQuestion.value = \"\";\r\n\r\n  conversationHistory.value.push({ role: \"user\", content: question });\r\n  scrollToBottom();\r\n\r\n  consulting.value = true;\r\n  consultationError.value = null;\r\n\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.post(\r\n      aiConsultationApiUrl.value,\r\n      {\r\n        question: question,\r\n      },\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n\r\n    if (response.data.success) {\r\n      const aiResponse = response.data.response;\r\n      conversationHistory.value.push({\r\n        role: \"assistant\",\r\n        content: aiResponse,\r\n      });\r\n      scrollToBottom();\r\n      // Check if muted before speaking\r\n      if (!isMuted.value) {\r\n        speakText(aiResponse);\r\n      }\r\n    } else {\r\n      consultationError.value =\r\n        response.data.message || \"AI consultation failed.\";\r\n      ElMessage.error(consultationError.value);\r\n      conversationHistory.value.push({\r\n        role: \"error\",\r\n        content: consultationError.value,\r\n      });\r\n      scrollToBottom();\r\n    }\r\n  } catch (error) {\r\n    console.error(\"An error occurred during AI consultation:\", error);\r\n    let errorMessage =\r\n      \"A network error occurred during AI consultation, please try again later.\";\r\n    if (error.response && error.response.data && error.response.data.message) {\r\n      errorMessage = error.response.data.message;\r\n    }\r\n    consultationError.value = errorMessage;\r\n    ElMessage.error(consultationError.value);\r\n    conversationHistory.value.push({\r\n      role: \"error\",\r\n      content: consultationError.value,\r\n    });\r\n    scrollToBottom();\r\n  } finally {\r\n    consulting.value = false;\r\n  }\r\n};\r\n\r\nconst scrollToBottom = () => {\r\n  nextTick(() => {\r\n    if (messagesList.value) {\r\n      messagesList.value.scrollTop = messagesList.value.scrollHeight;\r\n    }\r\n  });\r\n};\r\n\r\nonMounted(() => {\r\n  if (synth) {\r\n    loadVoices();\r\n  } else {\r\n    ElMessage.warning(\"Your browser does not support speech playback.\");\r\n  }\r\n  initSpeechRecognition(); // Initialize speech recognition\r\n});\r\n\r\n// This is a trick to let ESLint know that Mute, VolumeUp, Microphone are used\r\n// They will be removed by Tree Shaking in production\r\n// eslint-disable-next-line no-unused-vars\r\nconst _icons = { Mute, VolumeUp, Microphone };\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  min-height: 100vh;\r\n  background-color: #f0f2f5;\r\n}\r\n\r\n.side {\r\n  width: 220px;\r\n  background-color: #001529;\r\n  border-right: none;\r\n  transition: width 0.28s;\r\n  overflow-x: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: fixed;\r\n  height: 100vh;\r\n  z-index: 10;\r\n}\r\n\r\n.sTitle {\r\n  color: #fff;\r\n  padding: 20px;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  text-align: center;\r\n}\r\n\r\n.menuWrap {\r\n  height: calc(100vh - 180px);\r\n  overflow: auto;\r\n}\r\n\r\n.el-menu {\r\n  border-right: none;\r\n  background-color: #001529;\r\n  flex: 1;\r\n}\r\n\r\n.el-menu-item,\r\n.el-sub-menu__title {\r\n  color: rgba(255, 255, 255, 0.65);\r\n}\r\n\r\n.el-menu-item:hover,\r\n.el-sub-menu__title:hover {\r\n  background-color: #000c17;\r\n  color: #fff;\r\n}\r\n\r\n.el-menu-item.is-active {\r\n  background-color: #1890ff;\r\n  color: #fff;\r\n}\r\n\r\n.el-sub-menu.is-active .el-sub-menu__title {\r\n  color: #fff;\r\n}\r\n\r\n.el-menu--inline {\r\n  background-color: #000c17 !important;\r\n}\r\n\r\n.el-menu--inline .el-menu-item {\r\n  background-color: #000c17 !important;\r\n  color: rgba(255, 255, 255, 0.65);\r\n}\r\n\r\n.el-menu--inline .el-menu-item:hover {\r\n  background-color: #001529 !important;\r\n  color: #fff;\r\n}\r\n\r\n.el-menu--inline .el-menu-item.is-active {\r\n  background-color: #1890ff !important;\r\n  color: #fff;\r\n}\r\n\r\n.el-menu-vertical-demo:not(.el-menu--collapse) {\r\n  width: 220px;\r\n  min-height: 100%;\r\n}\r\n\r\n.el-menu-item .el-icon,\r\n.el-sub-menu__title .el-icon {\r\n  vertical-align: middle;\r\n  margin-right: 10px;\r\n  width: 24px;\r\n  text-align: center;\r\n  font-size: 18px;\r\n}\r\n\r\n.el-sub-menu .el-menu-item {\r\n  min-width: 220px;\r\n  padding-left: 48px !important;\r\n}\r\n\r\n.main {\r\n  flex: 1;\r\n  padding: 24px;\r\n  overflow-y: auto;\r\n  margin-left: 220px;\r\n}\r\n\r\n.pHeader {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.hTitle h1 {\r\n  margin: 0;\r\n  font-size: 22px;\r\n  color: #303133;\r\n  font-weight: 600;\r\n}\r\n\r\n.sub-title {\r\n  color: #606266;\r\n  font-size: 14px;\r\n  margin-top: 4px;\r\n}\r\n\r\n.el-card {\r\n  margin-bottom: 24px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-weight: 600;\r\n  color: #303133;\r\n  font-size: 16px;\r\n}\r\n\r\n.uInfo {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20px;\r\n  color: #fff;\r\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n}\r\n\r\n.uInfo span {\r\n  margin-left: 10px;\r\n  font-size: 16px;\r\n}\r\n\r\n.ai-consultation-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.chat-area {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 500px;\r\n  border: 1px solid #ebeef5;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\n.messages-list {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 15px;\r\n}\r\n\r\n.message-item {\r\n  margin-bottom: 10px;\r\n  display: flex;\r\n}\r\n\r\n.message-item.user {\r\n  justify-content: flex-end;\r\n}\r\n\r\n.message-item.assistant {\r\n  justify-content: flex-start;\r\n}\r\n\r\n.message-item.error {\r\n  justify-content: center;\r\n}\r\n\r\n.message-content {\r\n  max-width: 70%;\r\n  padding: 10px 15px;\r\n  border-radius: 8px;\r\n  word-break: break-word;\r\n}\r\n\r\n.message-item.user .message-content {\r\n  background-color: #409eff;\r\n  color: #fff;\r\n}\r\n\r\n.message-item.assistant .message-content {\r\n  background-color: #f4f4f5;\r\n  color: #303133;\r\n}\r\n\r\n.message-item.error .message-content {\r\n  background-color: #fef0f0;\r\n  color: #f56c6c;\r\n  border: 1px solid #fde2e2;\r\n}\r\n\r\n.input-area {\r\n  display: flex;\r\n  padding: 15px;\r\n  border-top: 1px solid #ebeef5;\r\n  gap: 10px;\r\n}\r\n\r\n.input-area .el-button {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.loading-message {\r\n  text-align: center;\r\n  color: #409eff;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.error-message {\r\n  color: #f56c6c;\r\n  text-align: center;\r\n  padding: 15px;\r\n  border: 1px solid #f56c6c;\r\n  border-radius: 4px;\r\n  margin-top: 15px;\r\n}\r\n\r\n.speech-controls {\r\n  margin-top: 20px;\r\n  padding-top: 15px;\r\n  border-top: 1px solid #ebeef5;\r\n  display: flex;\r\n  gap: 20px;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.control-item {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.control-item span {\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n\r\n/* Add left margin to buttons */\r\n.card-header .el-button {\r\n  margin-left: 10px;\r\n}\r\n</style>\r\n","import script from \"./AIConsultationPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AIConsultationPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AIConsultationPage.vue?vue&type=style&index=0&id=dcf41d56&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-dcf41d56\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div v-if=\"isLoggedIn\" class=\"page\">\r\n      <!-- Left Sidebar -->\r\n      <el-aside width=\"220px\" class=\"side\">\r\n        <!-- System Name -->\r\n        <div class=\"sTitle\">Smart Home Elderly Care System</div>\r\n\r\n        <div class=\"menuWrap\">\r\n          <el-menu\r\n            default-active=\"/diet-management\"\r\n            class=\"el-menu-1\"\r\n            :router=\"true\"\r\n          >\r\n            <el-menu-item index=\"/home\">\r\n              <el-icon><Platform /></el-icon>\r\n              <span>Dashboard</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"/health-monitoring\">\r\n              <el-icon><Monitor /></el-icon>\r\n              <span>Health monitoring</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"/health-knowledge\">\r\n              <el-icon><DocumentCopy /></el-icon>\r\n              <span>Health Knowledge</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"/user-settings\">\r\n              <el-icon><Setting /></el-icon>\r\n              <span>User Settings</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"/ai-consultation\">\r\n              <el-icon><ChatDotRound /></el-icon>\r\n              <span>AI Consultation</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"/diet-management\">\r\n              <el-icon><Food /></el-icon>\r\n              <span>Diet Management</span>\r\n            </el-menu-item>\r\n            <el-menu-item index=\"/sport-management\">\r\n              <el-icon><Basketball /></el-icon>\r\n              <span>Sports Management</span>\r\n            </el-menu-item>\r\n          </el-menu>\r\n        </div>\r\n\r\n        <!-- User Info (Bottom) -->\r\n        <div class=\"uInfo\" v-if=\"userInfo\">\r\n          <el-avatar :size=\"40\" :src=\"userInfo.avatar\"></el-avatar>\r\n          <span>{{ userInfo.username }}</span>\r\n        </div>\r\n      </el-aside>\r\n\r\n      <!-- Main Content (Combined Cooking & Ordering Page) -->\r\n      <div class=\"main\">\r\n        <!-- Page Title -->\r\n        <div class=\"pHeader\">\r\n          <div class=\"hTitle\">\r\n            <h1>Cooking & Ordering Services</h1>\r\n            <span class=\"sub-title\"\r\n              >Manage your meals with AI recommendations and canteen\r\n              orders</span\r\n            >\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Payment Result Alert -->\r\n        <el-alert\r\n          v-if=\"paymentResult\"\r\n          :title=\"paymentResult.title\"\r\n          :type=\"paymentResult.type\"\r\n          :description=\"paymentResult.description\"\r\n          show-icon\r\n          closable\r\n          @close=\"clearPaymentResult\"\r\n          style=\"margin-bottom: 20px\"\r\n        ></el-alert>\r\n\r\n        <!-- Self Cooking (Kimi Recommendation) Card -->\r\n        <el-card class=\"self-cooking-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">Self Cooking - Get AI Recommendations</div>\r\n          </template>\r\n\r\n          <div class=\"cooking-input-area\">\r\n            <el-input\r\n              v-model=\"userDemand\"\r\n              :rows=\"3\"\r\n              type=\"textarea\"\r\n              placeholder=\"Enter your cooking needs, e.g., 'Today I want to eat something light' or 'I have chicken and potatoes at home'...\"\r\n              @keyup.enter=\"getCookingRecommendation\"\r\n              :disabled=\"cookingLoading\"\r\n            />\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"getCookingRecommendation\"\r\n              :loading=\"cookingLoading\"\r\n              :disabled=\"!userDemand.trim() || cookingLoading\"\r\n            >\r\n              Get Recommendation\r\n            </el-button>\r\n          </div>\r\n\r\n          <div v-if=\"cookingLoading\" class=\"loading-area\">\r\n            <el-skeleton :rows=\"3\" animated />\r\n          </div>\r\n          <div v-else-if=\"recommendation\" class=\"recommendation-area\">\r\n            <h2>Recommended Menu and Steps:</h2>\r\n            <div v-html=\"formattedRecommendation\"></div>\r\n          </div>\r\n          <el-alert\r\n            v-else-if=\"cookingError\"\r\n            :title=\"cookingError\"\r\n            type=\"error\"\r\n            show-icon\r\n          ></el-alert>\r\n        </el-card>\r\n\r\n        <!-- Canteen Ordering Card -->\r\n        <el-card class=\"canteen-ordering-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">Canteen Ordering</div>\r\n          </template>\r\n\r\n          <!-- Menu display -->\r\n          <div class=\"menu-section\">\r\n            <h3>Menu</h3>\r\n            <div v-if=\"menuLoading\">\r\n              <el-skeleton :rows=\"4\" animated />\r\n            </div>\r\n            <el-alert\r\n              v-else-if=\"menuError\"\r\n              :title=\"menuError\"\r\n              type=\"error\"\r\n              show-icon\r\n            ></el-alert>\r\n            <div v-else class=\"dish-list\">\r\n              <el-card\r\n                v-for=\"dish in menu\"\r\n                :key=\"dish.id\"\r\n                class=\"dish-card\"\r\n                shadow=\"hover\"\r\n                @click=\"openPurchaseDialog(dish)\"\r\n              >\r\n                <img\r\n                  :src=\"dish.image_url\"\r\n                  class=\"dish-image\"\r\n                  alt=\"Dish Image\"\r\n                />\r\n                <div class=\"dish-info\">\r\n                  <h4>{{ dish.name }}</h4>\r\n                  <p>{{ dish.description }}</p>\r\n                  <div class=\"dish-price\">\r\n                    ¥{{\r\n                      dish.price != null && !isNaN(parseFloat(dish.price))\r\n                        ? parseFloat(dish.price).toFixed(2)\r\n                        : \"N/A\"\r\n                    }}\r\n                  </div>\r\n                </div>\r\n              </el-card>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- shopping cart -->\r\n          <el-card class=\"cart-section\" shadow=\"never\">\r\n            <!-- Use shadow=\"never\" for nested card -->\r\n            <template #header>\r\n              <div class=\"card-header\">Shopping Cart</div>\r\n            </template>\r\n            <div class=\"table-container\">\r\n              <!-- Added a container -->\r\n              <el-table :data=\"cartItems\" style=\"width: 100%\">\r\n                <el-table-column\r\n                  prop=\"name\"\r\n                  label=\"Dish Name\"\r\n                ></el-table-column>\r\n                <el-table-column label=\"Quantity\" width=\"150\">\r\n                  <template #default=\"scope\">\r\n                    <el-input-number\r\n                      v-model=\"scope.row.quantity\"\r\n                      :min=\"1\"\r\n                      size=\"small\"\r\n                    ></el-input-number>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"Price\" width=\"100\">\r\n                  <template #default=\"scope\">\r\n                    ¥{{\r\n                      scope.row.price != null &&\r\n                      !isNaN(parseFloat(scope.row.price))\r\n                        ? parseFloat(scope.row.price).toFixed(2)\r\n                        : \"N/A\"\r\n                    }}\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"Actions\" width=\"100\">\r\n                  <template #default=\"scope\">\r\n                    <el-button\r\n                      type=\"danger\"\r\n                      size=\"small\"\r\n                      @click=\"removeCartItem(scope.row)\"\r\n                      >Remove</el-button\r\n                    >\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n            </div>\r\n            <!-- End of container -->\r\n            <div class=\"cart-summary\">Total: ¥{{ cartTotal.toFixed(2) }}</div>\r\n          </el-card>\r\n\r\n          <!-- Delivery information and ordering -->\r\n          <el-card class=\"order-section\" shadow=\"never\">\r\n            <!-- Use shadow=\"never\" for nested card -->\r\n            <template #header>\r\n              <div class=\"card-header\">Delivery Information</div>\r\n            </template>\r\n            <el-form :model=\"orderForm\" label-width=\"120px\">\r\n              <el-form-item label=\"Delivery Address\">\r\n                <el-input v-model=\"orderForm.deliveryAddress\"></el-input>\r\n              </el-form-item>\r\n              <!-- Add other delivery info fields as needed -->\r\n            </el-form>\r\n\r\n            <div class=\"order-actions\">\r\n              <el-button\r\n                type=\"success\"\r\n                @click=\"createOrder\"\r\n                :disabled=\"\r\n                  cartItems.length === 0 ||\r\n                  !orderForm.deliveryAddress ||\r\n                  orderLoading\r\n                \"\r\n                :loading=\"orderLoading\"\r\n              >\r\n                Place Order (¥{{ cartTotal.toFixed(2) }})\r\n              </el-button>\r\n            </div>\r\n          </el-card>\r\n\r\n          <el-card v-if=\"paymentInfo\" class=\"payment-card\" shadow=\"never\">\r\n            <template #header>\r\n              <div class=\"card-header\">\r\n                Order Placed - Opening Payment Window\r\n              </div>\r\n            </template>\r\n            <p>Order ID: {{ paymentInfo.orderId }}</p>\r\n            <p>\r\n              Total Amount: ¥{{\r\n                paymentInfo.totalAmount\r\n                  ? paymentInfo.totalAmount.toFixed(2)\r\n                  : \"N/A\"\r\n              }}\r\n            </p>\r\n            <p>Please check the new window for Alipay payment.</p>\r\n\r\n            <el-alert\r\n              v-if=\"orderError\"\r\n              :title=\"orderError\"\r\n              type=\"error\"\r\n              show-icon\r\n              style=\"margin-top: 15px\"\r\n            ></el-alert>\r\n          </el-card>\r\n          <el-alert\r\n            v-else-if=\"orderError\"\r\n            :title=\"orderError\"\r\n            type=\"error\"\r\n            show-icon\r\n            style=\"margin-top: 15px\"\r\n          ></el-alert>\r\n        </el-card>\r\n\r\n        <!-- Historical Orders Card -->\r\n        <el-card class=\"historical-orders-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">Historical Orders</div>\r\n          </template>\r\n\r\n          <div v-if=\"historicalOrdersLoading\">\r\n            <el-skeleton :rows=\"5\" animated />\r\n          </div>\r\n          <el-alert\r\n            v-else-if=\"historicalOrdersError\"\r\n            :title=\"historicalOrdersError\"\r\n            type=\"error\"\r\n            show-icon\r\n          ></el-alert>\r\n          <div v-else class=\"table-container\">\r\n            <!-- Added a container -->\r\n            <el-table :data=\"historicalOrders\" style=\"width: 100%\">\r\n              <el-table-column\r\n                prop=\"order_id\"\r\n                label=\"Order ID\"\r\n                width=\"180\"\r\n              ></el-table-column>\r\n              <el-table-column label=\"Items\">\r\n                <template #default=\"scope\">\r\n                  <div v-for=\"item in scope.row.items\" :key=\"item.dish_id\">\r\n                    {{ item.dish_name }} x {{ item.quantity }} (¥{{\r\n                      item.price ? parseFloat(item.price).toFixed(2) : \"N/A\"\r\n                    }})\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column\r\n                prop=\"total_amount\"\r\n                label=\"Total Amount\"\r\n                width=\"120\"\r\n              >\r\n                <template #default=\"scope\">\r\n                  ¥{{\r\n                    scope.row.total_amount\r\n                      ? parseFloat(scope.row.total_amount).toFixed(2)\r\n                      : \"N/A\"\r\n                  }}\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column\r\n                prop=\"status\"\r\n                label=\"Status\"\r\n                width=\"100\"\r\n              ></el-table-column>\r\n              <el-table-column\r\n                prop=\"delivery_address\"\r\n                label=\"Delivery Address\"\r\n                width=\"180\"\r\n              ></el-table-column>\r\n              <el-table-column\r\n                prop=\"created_at\"\r\n                label=\"Order Time\"\r\n                width=\"180\"\r\n              ></el-table-column>\r\n              <el-table-column label=\"Actions\" width=\"100\">\r\n                <template #default=\"scope\">\r\n                  <el-button\r\n                    type=\"danger\"\r\n                    size=\"small\"\r\n                    @click=\"confirmDeleteOrder(scope.row)\"\r\n                    :disabled=\"scope.row.status !== 'pending_payment'\"\r\n                    width=\"180\"\r\n                  >\r\n                    Delete\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </div>\r\n          <!-- End of container -->\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n    <div v-else>\r\n      <h1>Please log in</h1>\r\n      <el-button type=\"primary\" @click=\"goToLogin\">Go to Login</el-button>\r\n    </div>\r\n\r\n    <!-- Purchase Dialog -->\r\n    <el-dialog\r\n      v-model=\"purchaseDialogVisible\"\r\n      title=\"Add to Cart\"\r\n      width=\"30%\"\r\n      center\r\n    >\r\n      <div v-if=\"selectedDish\">\r\n        <h3>{{ selectedDish.name }}</h3>\r\n        <p>{{ selectedDish.description }}</p>\r\n        <div class=\"dish-price\">\r\n          Price: ¥{{\r\n            selectedDish.price != null && !isNaN(parseFloat(selectedDish.price))\r\n              ? parseFloat(selectedDish.price).toFixed(2)\r\n              : \"N/A\"\r\n          }}\r\n        </div>\r\n        <div class=\"quantity-control\">\r\n          <span>Quantity:</span>\r\n          <el-input-number\r\n            v-model=\"selectedDish.quantity\"\r\n            :min=\"1\"\r\n            size=\"small\"\r\n          ></el-input-number>\r\n        </div>\r\n      </div>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"purchaseDialogVisible = false\">Cancel</el-button>\r\n          <el-button type=\"primary\" @click=\"confirmAddToCart\"\r\n            >Add to Cart</el-button\r\n          >\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, nextTick } from \"vue\"; // Import nextTick\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport {\r\n  Platform,\r\n  DocumentCopy,\r\n  Setting,\r\n  Monitor,\r\n  ChatDotRound,\r\n  Food,\r\n  Basketball,\r\n} from \"@element-plus/icons-vue\";\r\nimport {\r\n  ElMessage,\r\n  ElDialog,\r\n  ElInputNumber,\r\n  ElAlert,\r\n  ElTable,\r\n  ElTableColumn,\r\n  ElMessageBox,\r\n} from \"element-plus\";\r\nimport axios from \"axios\";\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst isLoggedIn = computed(() => store.getters.isLoggedIn);\r\nconst userInfo = computed(() => store.getters.userInfo);\r\n\r\nconst goToLogin = () => {\r\n  router.push(\"/\");\r\n};\r\n\r\n// --- Payment Result State ---\r\nconst paymentResult = ref(null);\r\n\r\n// --- Self Cooking State and Logic ---\r\nconst userDemand = ref(\"\");\r\nconst recommendation = ref(null);\r\nconst cookingLoading = ref(false);\r\nconst cookingError = ref(null);\r\n\r\nconst formattedRecommendation = computed(() => {\r\n  if (recommendation.value) {\r\n    return recommendation.value.replace(/\\n/g, \"<br>\");\r\n  }\r\n  return \"\";\r\n});\r\n\r\nconst getCookingRecommendation = async () => {\r\n  if (!userDemand.value.trim() || cookingLoading.value) {\r\n    return;\r\n  }\r\n\r\n  const question = userDemand.value;\r\n  cookingLoading.value = true;\r\n  cookingError.value = null;\r\n  recommendation.value = null;\r\n\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.post(\r\n      \"http://localhost:3060/api/homecare2/ai-consultation\",\r\n      {\r\n        question: question,\r\n      },\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    if (response.data.success) {\r\n      recommendation.value = response.data.response;\r\n    } else {\r\n      cookingError.value =\r\n        response.data.message || \"Failed to get recommendation\";\r\n      ElMessage.error(cookingError.value);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error fetching cooking recommendation:\", err);\r\n    cookingError.value = \"Network error, please try again later.\";\r\n    ElMessage.error(cookingError.value);\r\n  } finally {\r\n    cookingLoading.value = false;\r\n  }\r\n};\r\n\r\n// --- Canteen Ordering State and Logic ---\r\nconst menu = ref([]);\r\nconst menuLoading = ref(false);\r\nconst menuError = ref(null);\r\n\r\nconst cartItems = ref([]);\r\n\r\nconst orderForm = ref({\r\n  deliveryAddress: \"\",\r\n});\r\nconst orderLoading = ref(false);\r\nconst orderError = ref(null);\r\nconst paymentInfo = ref(null);\r\n\r\n// --- Historical Orders State and Logic ---\r\nconst historicalOrders = ref([]);\r\nconst historicalOrdersLoading = ref(false);\r\nconst historicalOrdersError = ref(null);\r\n\r\n// --- Purchase Dialog State and Logic ---\r\nconst purchaseDialogVisible = ref(false);\r\nconst selectedDish = ref(null);\r\n\r\nconst cartTotal = computed(() => {\r\n  return cartItems.value.reduce(\r\n    (sum, item) => sum + (item.price || 0) * (item.quantity || 0),\r\n    0\r\n  );\r\n});\r\n\r\nonMounted(() => {\r\n  fetchMenu();\r\n  fetchHistoricalOrders();\r\n  checkPaymentReturn();\r\n});\r\n\r\nconst fetchMenu = async () => {\r\n  menuLoading.value = true;\r\n  menuError.value = null;\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    if (!token) {\r\n      menuError.value = \"Please log in to view the menu.\";\r\n      ElMessage.warning(menuError.value);\r\n      menuLoading.value = false;\r\n      return;\r\n    }\r\n\r\n    const response = await axios.get(\r\n      \"http://localhost:3060/api/homecare2/dishes\",\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    if (response.data.success) {\r\n      nextTick(() => {\r\n        menu.value = response.data.dishes.map((dish) => ({\r\n          ...dish,\r\n          id: dish.dish_id,\r\n          name: dish.name,\r\n          price: parseFloat(dish.price),\r\n          description: dish.description,\r\n          category: dish.category,\r\n          image_url: dish.image_url,\r\n        }));\r\n      });\r\n    } else {\r\n      menuError.value = response.data.message || \"Failed to get menu\";\r\n      ElMessage.error(menuError.value);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error fetching menu:\", err);\r\n    if (err.response && err.response.status === 401) {\r\n      menuError.value = \"Authentication required. Please log in.\";\r\n      ElMessage.error(menuError.value);\r\n    } else {\r\n      menuError.value = \"Network error, please try again later.\";\r\n      ElMessage.error(menuError.value);\r\n    }\r\n  } finally {\r\n    menuLoading.value = false;\r\n  }\r\n};\r\n\r\nconst fetchHistoricalOrders = async () => {\r\n  historicalOrdersLoading.value = true;\r\n  historicalOrdersError.value = null;\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    if (!token) {\r\n      historicalOrdersError.value = \"Please log in to view historical orders.\";\r\n      ElMessage.warning(historicalOrdersError.value);\r\n      historicalOrdersLoading.value = false;\r\n      return;\r\n    }\r\n\r\n    const response = await axios.get(\r\n      \"http://localhost:3060/api/homecare2/history\",\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    if (response.data.success) {\r\n      nextTick(() => {\r\n        historicalOrders.value = response.data.orders;\r\n      });\r\n    } else {\r\n      historicalOrdersError.value =\r\n        response.data.message || \"Failed to get historical orders\";\r\n      ElMessage.error(historicalOrdersError.value);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error fetching historical orders:\", err);\r\n    if (err.response && err.response.status === 401) {\r\n      historicalOrdersError.value = \"Authentication required. Please log in.\";\r\n      ElMessage.error(historicalOrdersError.value);\r\n    } else {\r\n      historicalOrdersError.value = \"Network error, please try again later.\";\r\n      ElMessage.error(historicalOrdersError.value);\r\n    }\r\n  } finally {\r\n    historicalOrdersLoading.value = false;\r\n  }\r\n};\r\n\r\nconst openPurchaseDialog = (dish) => {\r\n  selectedDish.value = { ...dish, quantity: 1 };\r\n  purchaseDialogVisible.value = true;\r\n};\r\n\r\nconst confirmAddToCart = () => {\r\n  if (!selectedDish.value || selectedDish.value.quantity <= 0) {\r\n    ElMessage.warning(\"Please select a valid quantity.\");\r\n    return;\r\n  }\r\n\r\n  const existingItem = cartItems.value.find(\r\n    (item) => item.id === selectedDish.value.id\r\n  );\r\n\r\n  if (existingItem) {\r\n    existingItem.quantity += selectedDish.value.quantity;\r\n  } else {\r\n    cartItems.value.push({\r\n      id: selectedDish.value.id,\r\n      name: selectedDish.value.name,\r\n      price: selectedDish.value.price,\r\n      quantity: selectedDish.value.quantity,\r\n    });\r\n  }\r\n\r\n  ElMessage.success(`${selectedDish.value.name} added to cart.`);\r\n  purchaseDialogVisible.value = false;\r\n  selectedDish.value = null;\r\n};\r\n\r\nconst removeCartItem = (itemToRemove) => {\r\n  cartItems.value = cartItems.value.filter(\r\n    (item) => item.id !== itemToRemove.id\r\n  );\r\n  ElMessage.success(`${itemToRemove.name} removed from cart.`);\r\n};\r\n\r\nconst createOrder = async () => {\r\n  if (cartItems.value.length === 0) {\r\n    ElMessage.warning(\"Cart is empty, please select some dishes.\");\r\n    return;\r\n  }\r\n  if (!orderForm.value.deliveryAddress) {\r\n    ElMessage.warning(\"Please enter a delivery address.\");\r\n    return;\r\n  }\r\n\r\n  orderLoading.value = true;\r\n  orderError.value = null;\r\n  paymentInfo.value = null;\r\n\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.post(\r\n      \"http://localhost:3060/api/homecare2/orders\",\r\n      {\r\n        items: cartItems.value.map((item) => ({\r\n          dishId: item.id,\r\n          quantity: item.quantity,\r\n        })),\r\n        deliveryAddress: orderForm.value.deliveryAddress,\r\n      },\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    if (response.data.success) {\r\n      ElMessage.success(\r\n        \"Order created successfully, opening payment window...\"\r\n      );\r\n      paymentInfo.value = {\r\n        orderId: response.data.orderId,\r\n        totalAmount: response.data.totalAmount,\r\n      };\r\n      cartItems.value = [];\r\n      orderForm.value.deliveryAddress = \"\";\r\n\r\n      openPaymentWindow(response.data.paymentInfo);\r\n      fetchHistoricalOrders(); // Refresh historical orders after creating a new one\r\n    } else {\r\n      orderError.value = response.data.message || \"Order creation failed.\";\r\n      ElMessage.error(orderError.value);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error creating order:\", err);\r\n    let errorMessage = \"Network error, please try again later.\";\r\n    if (err.response && err.response.data && err.response.data.message) {\r\n      errorMessage = err.response.data.message;\r\n    }\r\n    orderError.value = errorMessage;\r\n    ElMessage.error(errorMessage);\r\n  } finally {\r\n    orderLoading.value = false;\r\n  }\r\n};\r\n\r\nconst openPaymentWindow = (htmlFormString) => {\r\n  if (!htmlFormString) {\r\n    ElMessage.error(\"Could not get payment information, please try again.\");\r\n    return;\r\n  }\r\n\r\n  const newWindow = window.open(\"\", \"_blank\");\r\n\r\n  if (!newWindow) {\r\n    ElMessage.error(\r\n      \"Could not open payment window, please check browser settings (e.g., pop-up blocker).\"\r\n    );\r\n    return;\r\n  }\r\n\r\n  newWindow.document.write(htmlFormString);\r\n  newWindow.document.close();\r\n};\r\n\r\nconst checkPaymentReturn = async () => {\r\n  const queryParams = route.query;\r\n  const orderId = queryParams.out_trade_no;\r\n\r\n  if (orderId) {\r\n    console.log(\"Detected payment return from Alipay. Order ID:\", orderId);\r\n\r\n    router.replace({ query: {} });\r\n\r\n    paymentResult.value = {\r\n      title: \"Payment Processing\",\r\n      type: \"info\",\r\n      description: `The system has detected that the order ${orderId} payment has been success. Please double check your order history for the final status.`,\r\n    };\r\n\r\n    setTimeout(() => {\r\n      fetchHistoricalOrders();\r\n    }, 3000);\r\n  }\r\n};\r\n\r\nconst clearPaymentResult = () => {\r\n  paymentResult.value = null;\r\n};\r\n\r\n// --- Delete Order Logic ---\r\nconst confirmDeleteOrder = (order) => {\r\n  // Only allow deletion if the order status is 'Pending Payment'\r\n  if (order.status !== \"pending_payment\") {\r\n    ElMessage.warning(\r\n      'Only orders with status \"Pending Payment\" can be deleted.'\r\n    );\r\n    return;\r\n  }\r\n\r\n  ElMessageBox.confirm(\r\n    `Are you sure you want to delete order ${order.order_id}?`,\r\n    \"Warning\",\r\n    {\r\n      confirmButtonText: \"Delete\",\r\n      cancelButtonText: \"Cancel\",\r\n      type: \"warning\",\r\n    }\r\n  )\r\n    .then(() => {\r\n      deleteOrder(order.order_id);\r\n    })\r\n    .catch(() => {\r\n      ElMessage({\r\n        type: \"info\",\r\n        message: \"Delete canceled\",\r\n      });\r\n    });\r\n};\r\n\r\nconst deleteOrder = async (orderId) => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.delete(\r\n      `http://localhost:3060/api/homecare2/orders/${orderId}`,\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    if (response.data.success) {\r\n      ElMessage.success(`Order ${orderId} deleted successfully.`);\r\n      fetchHistoricalOrders();\r\n    } else {\r\n      ElMessage.error(response.data.message || \"Failed to delete order.\");\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error deleting order:\", err);\r\n    let errorMessage = \"Network error, please try again later.\";\r\n    if (err.response && err.response.data && err.response.data.message) {\r\n      errorMessage = err.response.data.message;\r\n    }\r\n    ElMessage.error(errorMessage);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  min-height: 100vh;\r\n  background-color: #f0f2f5;\r\n}\r\n\r\n.side {\r\n  width: 220px;\r\n  background-color: #001529;\r\n  border-right: none;\r\n  transition: width 0.28s;\r\n  overflow-x: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: fixed;\r\n  height: 100vh;\r\n  z-index: 10;\r\n}\r\n\r\n.sTitle {\r\n  color: #fff;\r\n  padding: 20px;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  text-align: center;\r\n}\r\n\r\n.menuWrap {\r\n  height: calc(100vh - 180px);\r\n  overflow: auto;\r\n}\r\n\r\n.el-menu {\r\n  border-right: none;\r\n  background-color: #001529;\r\n  flex: 1;\r\n}\r\n\r\n.el-menu-item,\r\n.el-sub-menu__title {\r\n  color: rgba(255, 255, 255, 0.65);\r\n}\r\n\r\n.el-menu-item:hover,\r\n.el-sub-menu__title:hover {\r\n  background-color: #000c17;\r\n  color: #fff;\r\n}\r\n\r\n.el-menu-item.is-active {\r\n  background-color: #1890ff;\r\n  color: #fff;\r\n}\r\n\r\n.el-sub-menu.is-active .el-sub-menu__title {\r\n  color: #fff;\r\n}\r\n\r\n.el-menu--inline {\r\n  background-color: #000c17 !important;\r\n}\r\n\r\n.el-menu--inline .el-menu-item:hover {\r\n  background-color: #002a4d !important; /* Slightly lighter hover */\r\n  color: #fff;\r\n}\r\n\r\n.el-menu-vertical-demo:not(.el-menu--collapse) {\r\n  width: 220px;\r\n  min-height: 100%;\r\n}\r\n\r\n.el-menu-item .el-icon,\r\n.el-sub-menu__title .el-icon {\r\n  vertical-align: middle;\r\n  margin-right: 10px;\r\n  width: 24px;\r\n  text-align: center;\r\n  font-size: 18px;\r\n}\r\n\r\n.el-sub-menu .el-menu-item {\r\n  min-width: 220px;\r\n  padding-left: 48px !important;\r\n}\r\n\r\n.main {\r\n  flex: 1;\r\n  padding: 24px;\r\n  overflow-y: auto;\r\n  margin-left: 220px; /* Adjust margin to account for fixed sidebar */\r\n}\r\n\r\n.pHeader {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.hTitle h1 {\r\n  margin: 0;\r\n  font-size: 22px;\r\n  color: #303133;\r\n  font-weight: 600;\r\n}\r\n\r\n.sub-title {\r\n  color: #606266;\r\n  font-size: 14px;\r\n  margin-top: 4px;\r\n}\r\n\r\n.el-card {\r\n  margin-bottom: 24px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-weight: 600; /* Keep card header text bold */\r\n  color: #303133;\r\n  font-size: 16px;\r\n}\r\n\r\n.uInfo {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20px;\r\n  color: #fff;\r\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n}\r\n\r\n.uInfo span {\r\n  margin-left: 10px;\r\n  font-size: 16px;\r\n}\r\n\r\n.cooking-input-area {\r\n  display: flex;\r\n  gap: 15px;\r\n  align-items: flex-start;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.cooking-input-area .el-textarea {\r\n  flex-grow: 1;\r\n}\r\n\r\n.cooking-input-area .el-button {\r\n  flex-shrink: 0;\r\n  height: 80px; /* Adjust button height to match textarea roughly */\r\n}\r\n\r\n.loading-area {\r\n  margin-top: 20px;\r\n}\r\n\r\n.recommendation-area {\r\n  margin-top: 20px;\r\n  padding: 15px;\r\n  border: 1px solid #ebeef5;\r\n  border-radius: 4px;\r\n  background-color: #fff;\r\n}\r\n\r\n.recommendation-area h2 {\r\n  margin-top: 0;\r\n  margin-bottom: 10px;\r\n  font-size: 18px;\r\n  color: #303133;\r\n}\r\n\r\n.recommendation-area div {\r\n  line-height: 1.6;\r\n}\r\n\r\n.el-alert {\r\n  margin-top: 20px;\r\n}\r\n\r\n.menu-section,\r\n.cart-section,\r\n.order-section,\r\n.payment-card,\r\n.historical-orders-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.dish-list {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\r\n  gap: 15px;\r\n}\r\n\r\n.dish-card {\r\n  cursor: pointer;\r\n}\r\n\r\n.dish-card img {\r\n  width: 100%;\r\n  height: 120px;\r\n  object-fit: cover;\r\n  border-bottom: 1px solid #ebeef5;\r\n}\r\n\r\n.dish-info {\r\n  padding: 10px;\r\n}\r\n\r\n.dish-info h4 {\r\n  margin-top: 0;\r\n  margin-bottom: 5px;\r\n  font-size: 15px;\r\n}\r\n\r\n.dish-info p {\r\n  font-size: 11px;\r\n  color: #606266;\r\n  margin-bottom: 10px;\r\n  height: 28px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.dish-price {\r\n  font-size: 13px;\r\n  color: #f56c6c;\r\n  font-weight: bold;\r\n}\r\n\r\n.cart-summary {\r\n  margin-top: 15px;\r\n  text-align: right;\r\n  font-size: 15px;\r\n  font-weight: bold;\r\n  padding-top: 15px;\r\n  border-top: 1px solid #ebeef5;\r\n}\r\n\r\n.order-actions {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n\r\n.payment-card {\r\n  border: 1px solid #409eff;\r\n  background-color: #ecf5ff;\r\n}\r\n\r\nh1 {\r\n  text-align: center;\r\n  margin-top: 50px;\r\n}\r\n\r\n.quantity-control {\r\n  margin-top: 15px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.quantity-control span {\r\n  font-size: 14px;\r\n}\r\n</style>\r\n","import script from \"./DietManagementPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DietManagementPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./DietManagementPage.vue?vue&type=style&index=0&id=e868cca2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e868cca2\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <el-aside width=\"220px\" class=\"side\">\r\n      <!-- System Name -->\r\n      <div class=\"sTitle\">Smart Home Elderly Care System</div>\r\n\r\n      <div class=\"menuWrap\">\r\n        <el-menu\r\n          default-active=\"/sport-management\"\r\n          class=\"el-menu-1\"\r\n          :router=\"true\"\r\n        >\r\n          <el-menu-item index=\"/home\">\r\n            <el-icon><Platform /></el-icon>\r\n            <span>Dashboard</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/health-monitoring\">\r\n            <el-icon><Monitor /></el-icon>\r\n            <span>Health monitoring</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/health-knowledge\">\r\n            <el-icon><DocumentCopy /></el-icon>\r\n            <span>Health Knowledge</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/user-settings\">\r\n            <el-icon><Setting /></el-icon>\r\n            <span>User Settings</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/ai-consultation\">\r\n            <el-icon><ChatDotRound /></el-icon>\r\n            <span>AI Consultation</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/diet-management\">\r\n            <el-icon><Food /></el-icon>\r\n            <span>Diet Management</span>\r\n          </el-menu-item>\r\n          <el-menu-item index=\"/sport-management\">\r\n            <el-icon><Basketball /></el-icon>\r\n            <span>Sports Management</span>\r\n          </el-menu-item>\r\n        </el-menu>\r\n      </div>\r\n\r\n      <!-- User Info (Bottom) -->\r\n      <div class=\"uInfo\" v-if=\"userInfo\">\r\n        <el-avatar :size=\"40\" :src=\"userInfo.avatar\"></el-avatar>\r\n        <span>{{ userInfo.username }}</span>\r\n      </div>\r\n    </el-aside>\r\n\r\n    <!-- Main Content -->\r\n    <div class=\"main\">\r\n      <!-- Page Title -->\r\n      <div class=\"pHeader\">\r\n        <div class=\"hTitle\">\r\n          <h1>Sports Management</h1>\r\n          <span class=\"sub-title\"\r\n            >Track your workouts and book coaching sessions</span\r\n          >\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Exercise Check-in Card -->\r\n      <el-card class=\"check-in-card\">\r\n        <template #header>\r\n          <div class=\"card-header\">Exercise Check-in</div>\r\n        </template>\r\n        <p>Record your daily exercise activities.</p>\r\n        <el-form :model=\"checkInForm\" label-width=\"150px\">\r\n          <!-- Adjusted label-width -->\r\n          <el-form-item label=\"Exercise Type\">\r\n            <el-select\r\n              v-model=\"checkInForm.exerciseType\"\r\n              placeholder=\"Select exercise type\"\r\n            >\r\n              <el-option label=\"Walking\" value=\"walking\"></el-option>\r\n              <el-option label=\"Running\" value=\"running\"></el-option>\r\n              <el-option label=\"Cycling\" value=\"cycling\"></el-option>\r\n              <el-option label=\"Swimming\" value=\"swimming\"></el-option>\r\n              <el-option label=\"Yoga\" value=\"yoga\"></el-option>\r\n              <el-option label=\"Other\" value=\"other\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"Duration (minutes)\">\r\n            <el-input-number\r\n              v-model=\"checkInForm.duration\"\r\n              :min=\"1\"\r\n            ></el-input-number>\r\n          </el-form-item>\r\n          <el-form-item label=\"Notes\">\r\n            <el-input\r\n              v-model=\"checkInForm.notes\"\r\n              type=\"textarea\"\r\n              :rows=\"2\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"handleCheckIn\"\r\n              :loading=\"checkInLoading\"\r\n              >Check In</el-button\r\n            >\r\n          </el-form-item>\r\n        </el-form>\r\n\r\n        <el-alert\r\n          v-if=\"checkInResult\"\r\n          :title=\"checkInResult.title\"\r\n          :type=\"checkInResult.type\"\r\n          show-icon\r\n          closable\r\n          @close=\"checkInResult = null\"\r\n          style=\"margin-top: 15px\"\r\n        ></el-alert>\r\n      </el-card>\r\n\r\n      <!-- Exercise History Card -->\r\n      <el-card class=\"exercise-history-card\">\r\n        <template #header>\r\n          <div class=\"card-header\">Exercise History</div>\r\n        </template>\r\n\r\n        <div v-if=\"exerciseHistoryLoading\">\r\n          <el-skeleton :rows=\"5\" animated />\r\n        </div>\r\n        <el-alert\r\n          v-else-if=\"exerciseHistoryError\"\r\n          :title=\"exerciseHistoryError\"\r\n          type=\"error\"\r\n          show-icon\r\n        ></el-alert>\r\n        <div v-else class=\"table-container\">\r\n          <el-table :data=\"exerciseHistory\" style=\"width: 100%\">\r\n            <el-table-column\r\n              prop=\"exercise_type\"\r\n              label=\"Exercise Type\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n              prop=\"duration\"\r\n              label=\"Duration (minutes)\"\r\n              width=\"150\"\r\n            ></el-table-column>\r\n            <el-table-column prop=\"notes\" label=\"Notes\"></el-table-column>\r\n            <el-table-column\r\n              prop=\"checkin_time\"\r\n              label=\"Check-in Time\"\r\n              width=\"180\"\r\n            ></el-table-column>\r\n          </el-table>\r\n        </div>\r\n      </el-card>\r\n\r\n      <!-- Coach Booking Card -->\r\n      <el-card class=\"coach-booking-card\">\r\n        <template #header>\r\n          <div class=\"card-header\">Book a Coach</div>\r\n        </template>\r\n        <p>Find and book a personal coach.</p>\r\n\r\n        <!-- Coach List -->\r\n        <div v-if=\"coachesLoading\">\r\n          <el-skeleton :rows=\"3\" animated />\r\n        </div>\r\n        <el-alert\r\n          v-else-if=\"coachesError\"\r\n          :title=\"coachesError\"\r\n          type=\"error\"\r\n          show-icon\r\n        ></el-alert>\r\n        <div v-else class=\"coach-list\">\r\n          <el-card\r\n            v-for=\"coach in coaches\"\r\n            :key=\"coach.coach_id\"\r\n            class=\"coach-card\"\r\n            shadow=\"hover\"\r\n            @click=\"openBookingDialog(coach)\"\r\n          >\r\n            <img\r\n              :src=\"coach.image_url\"\r\n              class=\"coach-avatar\"\r\n              alt=\"Coach Avatar\"\r\n            />\r\n            <div class=\"coach-info\">\r\n              <h4>{{ coach.name }}</h4>\r\n              <p>{{ coach.specialty }}</p>\r\n              <el-tag size=\"small\">{{ coach.availability }}</el-tag>\r\n            </div>\r\n          </el-card>\r\n        </div>\r\n      </el-card>\r\n\r\n      <!-- Coach Booking History Card -->\r\n      <el-card class=\"booking-history-card\">\r\n        <template #header>\r\n          <div class=\"card-header\">Coach Booking History</div>\r\n        </template>\r\n\r\n        <div v-if=\"bookingHistoryLoading\">\r\n          <el-skeleton :rows=\"5\" animated />\r\n        </div>\r\n        <el-alert\r\n          v-else-if=\"bookingHistoryError\"\r\n          :title=\"bookingHistoryError\"\r\n          type=\"error\"\r\n          show-icon\r\n        ></el-alert>\r\n        <div v-else class=\"table-container\">\r\n          <el-table :data=\"bookingHistory\" style=\"width: 100%\">\r\n            <el-table-column\r\n              prop=\"coach_name\"\r\n              label=\"Coach Name\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n              prop=\"coach_specialty\"\r\n              label=\"Specialty\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n              prop=\"booking_date\"\r\n              label=\"Date\"\r\n              width=\"120\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n              prop=\"booking_time\"\r\n              label=\"Time\"\r\n              width=\"100\"\r\n            ></el-table-column>\r\n            <el-table-column prop=\"notes\" label=\"Notes\"></el-table-column>\r\n            <el-table-column\r\n              prop=\"status\"\r\n              label=\"Status\"\r\n              width=\"100\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n              prop=\"created_at\"\r\n              label=\"Booking Time\"\r\n              width=\"180\"\r\n            ></el-table-column>\r\n          </el-table>\r\n        </div>\r\n      </el-card>\r\n\r\n      <!-- Coach Booking Dialog -->\r\n      <el-dialog\r\n        v-model=\"bookingDialogVisible\"\r\n        title=\"Book Coach\"\r\n        width=\"40%\"\r\n        center\r\n      >\r\n        <div v-if=\"selectedCoach\">\r\n          <h3>Booking Session with {{ selectedCoach.name }}</h3>\r\n          <el-form :model=\"bookingForm\" label-width=\"120px\">\r\n            <el-form-item label=\"Date\">\r\n              <el-date-picker\r\n                v-model=\"bookingForm.date\"\r\n                type=\"date\"\r\n                placeholder=\"Select date\"\r\n              ></el-date-picker>\r\n            </el-form-item>\r\n            <el-form-item label=\"Time\">\r\n              <el-time-select\r\n                v-model=\"bookingForm.time\"\r\n                start=\"09:00\"\r\n                step=\"00:30\"\r\n                end=\"21:00\"\r\n                placeholder=\"Select time\"\r\n              >\r\n              </el-time-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"Notes\">\r\n              <el-input\r\n                v-model=\"bookingForm.notes\"\r\n                type=\"textarea\"\r\n                :rows=\"2\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n        <template #footer>\r\n          <span class=\"dialog-footer\">\r\n            <el-button @click=\"bookingDialogVisible = false\">Cancel</el-button>\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"confirmBooking\"\r\n              :loading=\"bookingLoading\"\r\n              >Confirm Booking</el-button\r\n            >\r\n          </span>\r\n        </template>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, nextTick } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Platform,\r\n  DocumentCopy,\r\n  Setting,\r\n  Monitor,\r\n  ChatDotRound,\r\n  Food,\r\n  Basketball,\r\n} from \"@element-plus/icons-vue\";\r\n\r\nconst store = useStore();\r\n\r\nconst userInfo = computed(() => store.getters.userInfo);\r\n\r\n// --- Exercise Check-in State and Logic ---\r\nconst checkInForm = ref({\r\n  exerciseType: \"\",\r\n  duration: 30,\r\n  notes: \"\",\r\n});\r\nconst checkInLoading = ref(false);\r\nconst checkInResult = ref(null);\r\n\r\nconst handleCheckIn = async () => {\r\n  if (!checkInForm.value.exerciseType || !checkInForm.value.duration) {\r\n    ElMessage.warning(\"Please select exercise type and duration.\");\r\n    return;\r\n  }\r\n\r\n  checkInLoading.value = true;\r\n  checkInResult.value = null;\r\n\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.post(\r\n      \"http://localhost:3060/api/homecare2/checkin\",\r\n      checkInForm.value,\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    if (response.data.success) {\r\n      checkInResult.value = {\r\n        title: \"Check-in successful!\",\r\n        type: \"success\",\r\n      };\r\n      checkInForm.value = { exerciseType: \"\", duration: 30, notes: \"\" };\r\n      fetchExerciseHistory();\r\n    } else {\r\n      checkInResult.value = {\r\n        title: response.data.message || \"Check-in failed.\",\r\n        type: \"error\",\r\n      };\r\n      ElMessage.error(checkInResult.value.title);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error during check-in:\", err);\r\n    checkInResult.value = {\r\n      title: \"Network error, please try again later.\",\r\n      type: \"error\",\r\n    };\r\n    ElMessage.error(checkInResult.value.title);\r\n  } finally {\r\n    checkInLoading.value = false;\r\n  }\r\n};\r\n\r\n// --- Exercise History State and Logic ---\r\nconst exerciseHistory = ref([]);\r\nconst exerciseHistoryLoading = ref(false);\r\nconst exerciseHistoryError = ref(null);\r\n\r\nconst fetchExerciseHistory = async () => {\r\n  exerciseHistoryLoading.value = true;\r\n  exerciseHistoryError.value = null;\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.get(\r\n      \"http://localhost:3060/api/homecare2/sports/history\",\r\n      {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      }\r\n    );\r\n    if (response.data.success) {\r\n      nextTick(() => {\r\n        exerciseHistory.value = response.data.exerciseHistory;\r\n      });\r\n    } else {\r\n      exerciseHistoryError.value =\r\n        response.data.message || \"Failed to fetch exercise history.\";\r\n      ElMessage.error(exerciseHistoryError.value);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error fetching exercise history:\", err);\r\n    exerciseHistoryError.value =\r\n      \"Network error, failed to load exercise history.\";\r\n    ElMessage.error(exerciseHistoryError.value);\r\n  } finally {\r\n    exerciseHistoryLoading.value = false;\r\n  }\r\n};\r\n\r\n// --- Coach Booking State and Logic ---\r\nconst coaches = ref([]);\r\nconst coachesLoading = ref(false);\r\nconst coachesError = ref(null);\r\n\r\nconst selectedCoach = ref(null);\r\nconst bookingDialogVisible = ref(false);\r\nconst bookingForm = ref({\r\n  date: \"\",\r\n  time: \"\",\r\n  notes: \"\",\r\n});\r\nconst bookingLoading = ref(false);\r\n\r\n// Function to fetch coaches from the backend\r\nconst fetchCoaches = async () => {\r\n  coachesLoading.value = true;\r\n  coachesError.value = null;\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.get(\r\n      \"http://localhost:3060/api/homecare2/coaches\",\r\n      {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      }\r\n    );\r\n    if (response.data.success) {\r\n      coaches.value = response.data.coaches;\r\n    } else {\r\n      coachesError.value = response.data.message || \"Failed to fetch coaches.\";\r\n      ElMessage.error(coachesError.value);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error fetching coaches:\", err);\r\n    coachesError.value = \"Network error, failed to load coaches.\";\r\n    ElMessage.error(coachesError.value);\r\n  } finally {\r\n    coachesLoading.value = false;\r\n  }\r\n};\r\n\r\nconst openBookingDialog = (coach) => {\r\n  selectedCoach.value = coach;\r\n  bookingDialogVisible.value = true;\r\n  // Reset booking form\r\n  bookingForm.value = { date: \"\", time: \"\", notes: \"\" };\r\n};\r\n\r\nconst confirmBooking = async () => {\r\n  if (\r\n    !selectedCoach.value ||\r\n    !bookingForm.value.date ||\r\n    !bookingForm.value.time\r\n  ) {\r\n    ElMessage.warning(\"Please select a coach, date, and time.\");\r\n    return;\r\n  }\r\n\r\n  bookingLoading.value = true;\r\n\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.post(\r\n      \"http://localhost:3060/api/homecare2/book-coach\",\r\n      {\r\n        coachId: selectedCoach.value.coach_id,\r\n        date: bookingForm.value.date,\r\n        time: bookingForm.value.time,\r\n        notes: bookingForm.value.notes,\r\n      },\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    if (response.data.success) {\r\n      ElMessage.success(\"Coach booked successfully!\");\r\n      bookingDialogVisible.value = false;\r\n      fetchBookingHistory();\r\n    } else {\r\n      ElMessage.error(response.data.message || \"Failed to book coach.\");\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error during coach booking:\", err);\r\n    let errorMessage = \"Network error, please try again later.\";\r\n    if (err.response && err.response.data && err.response.data.message) {\r\n      errorMessage = err.response.data.message;\r\n    }\r\n    ElMessage.error(errorMessage);\r\n  } finally {\r\n    bookingLoading.value = false;\r\n  }\r\n};\r\n\r\n// --- Coach Booking History State and Logic ---\r\nconst bookingHistory = ref([]);\r\nconst bookingHistoryLoading = ref(false);\r\nconst bookingHistoryError = ref(null);\r\n\r\nconst fetchBookingHistory = async () => {\r\n  bookingHistoryLoading.value = true;\r\n  bookingHistoryError.value = null;\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await axios.get(\r\n      \"http://localhost:3060/api/homecare2/booking-history\",\r\n      {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      }\r\n    );\r\n    if (response.data.success) {\r\n      nextTick(() => {\r\n        bookingHistory.value = response.data.bookingHistory;\r\n      });\r\n    } else {\r\n      bookingHistoryError.value =\r\n        response.data.message || \"Failed to fetch booking history.\";\r\n      ElMessage.error(bookingHistoryError.value);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error fetching booking history:\", err);\r\n    bookingHistoryError.value =\r\n      \"Network error, failed to load booking history.\";\r\n    ElMessage.error(bookingHistoryError.value);\r\n  } finally {\r\n    bookingHistoryLoading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchCoaches();\r\n  fetchExerciseHistory();\r\n  fetchBookingHistory();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  min-height: 100vh;\r\n  background-color: #f0f2f5;\r\n}\r\n\r\n.side {\r\n  width: 220px;\r\n  background-color: #001529;\r\n  border-right: none;\r\n  transition: width 0.28s;\r\n  overflow-x: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: fixed;\r\n  height: 100vh;\r\n  z-index: 10;\r\n}\r\n\r\n.sTitle {\r\n  color: #fff;\r\n  padding: 20px;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  text-align: center;\r\n}\r\n\r\n.menuWrap {\r\n  height: calc(100vh - 180px);\r\n  overflow: auto;\r\n}\r\n\r\n.el-menu {\r\n  border-right: none;\r\n  background-color: #001529;\r\n  flex: 1;\r\n}\r\n\r\n.el-menu-item,\r\n.el-sub-menu__title {\r\n  color: rgba(255, 255, 255, 0.65);\r\n}\r\n\r\n.el-menu-item:hover,\r\n.el-sub-menu__title:hover {\r\n  background-color: #000c17;\r\n  color: #fff;\r\n}\r\n\r\n.el-menu-item.is-active {\r\n  background-color: #1890ff;\r\n  color: #fff;\r\n}\r\n\r\n.el-sub-menu.is-active .el-sub-menu__title {\r\n  color: #fff;\r\n}\r\n\r\n.el-menu--inline {\r\n  background-color: #000c17 !important;\r\n}\r\n\r\n.el-menu--inline .el-menu-item:hover {\r\n  background-color: #002a4d !important;\r\n  color: #fff;\r\n}\r\n\r\n.el-menu-vertical-demo:not(.el-menu--collapse) {\r\n  width: 220px;\r\n  min-height: 100%;\r\n}\r\n\r\n.el-menu-item .el-icon,\r\n.el-sub-menu__title .el-icon {\r\n  vertical-align: middle;\r\n  margin-right: 10px;\r\n  width: 24px;\r\n  text-align: center;\r\n  font-size: 18px;\r\n}\r\n\r\n.el-sub-menu .el-menu-item {\r\n  min-width: 220px;\r\n  padding-left: 48px !important;\r\n}\r\n\r\n.main {\r\n  flex: 1;\r\n  padding: 24px;\r\n  overflow-y: auto;\r\n  margin-left: 220px;\r\n}\r\n\r\n.pHeader {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.hTitle h1 {\r\n  margin: 0;\r\n  font-size: 22px;\r\n  color: #303133;\r\n  font-weight: 600;\r\n}\r\n\r\n.sub-title {\r\n  color: #606266;\r\n  font-size: 14px;\r\n  margin-top: 4px;\r\n}\r\n\r\n.el-card {\r\n  margin-bottom: 24px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-weight: 600;\r\n  color: #303133;\r\n  font-size: 16px;\r\n}\r\n\r\n.uInfo {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20px;\r\n  color: #fff;\r\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n}\r\n\r\n.uInfo span {\r\n  margin-left: 10px;\r\n  font-size: 16px;\r\n}\r\n\r\n.sport-management-page .el-card {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.check-in-card .el-form,\r\n.coach-booking-card .el-form {\r\n  margin-top: 15px;\r\n}\r\n\r\n.coach-list {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n  gap: 20px;\r\n  margin-top: 15px;\r\n}\r\n\r\n.coach-card {\r\n  cursor: pointer;\r\n  padding: 15px;\r\n  text-align: center;\r\n  background-color: #fff;\r\n  border: 1px solid #ebeef5;\r\n  border-radius: 4px;\r\n}\r\n\r\n.coach-avatar {\r\n  width: 80px;\r\n  height: 80px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n  margin-bottom: 10px;\r\n  border: 2px solid #409eff;\r\n}\r\n\r\n.coach-info h4 {\r\n  margin: 0 0 5px 0;\r\n  font-size: 16px;\r\n  color: #303133;\r\n}\r\n\r\n.coach-info p {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.coach-info .el-tag {\r\n  margin-top: 5px;\r\n}\r\n\r\n.dialog-footer {\r\n  text-align: right;\r\n}\r\n\r\n.el-form-item__label {\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n\r\n.table-container {\r\n  margin-top: 15px;\r\n}\r\n</style>\r\n","import script from \"./SportManagementPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./SportManagementPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./SportManagementPage.vue?vue&type=style&index=0&id=b89af61a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b89af61a\"]])\n\nexport default __exports__","import { createStore } from 'vuex'\r\n\r\nexport default createStore({\r\n  state: {\r\n    isLoggedIn: false,\r\n    userInfo: null,\r\n    token: null\r\n  },\r\n  mutations: {\r\n    setLoginStatus(state, status) {\r\n      state.isLoggedIn = status\r\n    },\r\n    setUserInfo(state, userInfo) {\r\n      state.userInfo = userInfo\r\n    },\r\n    setToken(state, token) {\r\n      state.token = token\r\n    },\r\n    clearUserInfo(state) {\r\n      state.userInfo = null\r\n      state.token = null\r\n    }\r\n  },\r\n  actions: {\r\n    login({ commit }, { userInfo, token }) {\r\n      commit('setLoginStatus', true)\r\n      commit('setUserInfo', userInfo)\r\n      commit('setToken', token)\r\n      localStorage.setItem('token', token) // 存储 Token\r\n    },\r\n    logout({ commit }) {\r\n      commit('setLoginStatus', false)\r\n      commit('clearUserInfo')\r\n      localStorage.removeItem('token') // 移除 Token\r\n    },\r\n    checkLoginStatus({ commit }) {\r\n      const token = localStorage.getItem('token')\r\n      if (token) {\r\n        commit('setLoginStatus', true)\r\n        commit('setToken', token)\r\n      }\r\n    }\r\n  },\r\n  getters: {\r\n    isLoggedIn: state => state.isLoggedIn,\r\n    userInfo: state => state.userInfo,\r\n    token: state => state.token\r\n  }\r\n})","import { createRouter, createWebHistory } from \"vue-router\";\r\nimport HomePage from \"./components/HomePage.vue\";\r\nimport LoginPage from \"./components/LoginPage.vue\";\r\nimport HealthMonitoringPage from \"./components/HealthMonitoringPage.vue\";\r\nimport HealthKnowledgePage from \"./components/HealthKnowledgePage.vue\";\r\nimport HealthKnowledgeDetail from \"./components/HealthKnowledgeDetail.vue\";\r\nimport UserSettingsPage from \"./components/UserSettingsPage.vue\";\r\nimport AIconsultationPage from \"./components/AIConsultationPage.vue\";\r\nimport DietManagementPage from \"./components/DietManagementPage.vue\";\r\nimport SportManagementPage from \"./components/SportManagementPage.vue\";\r\nimport store from \"./store\";\r\n\r\nconst routes = [\r\n  {\r\n    path: \"/\",\r\n    name: \"LoginPage\",\r\n    component: LoginPage,\r\n  },\r\n  {\r\n    path: \"/home\",\r\n    name: \"HomePage\",\r\n    component: HomePage,\r\n    meta: { requiresAuth: true },\r\n  },\r\n  {\r\n    path: \"/health-monitoring\",\r\n    name: \"HealthMonitoringPage\",\r\n    component: HealthMonitoringPage,\r\n    meta: { requiresAuth: true },\r\n  },\r\n  {\r\n    path: \"/health-knowledge\",\r\n    name: \"HealthKnowledgePage\",\r\n    component: HealthKnowledgePage,\r\n    meta: { requiresAuth: true },\r\n  },\r\n  {\r\n    path: \"/health-knowledge-detail/:health_knowledge_id\",\r\n    name: \"HealthKnowledgeDetail\",\r\n    component: HealthKnowledgeDetail,\r\n    meta: { requiresAuth: true },\r\n  },\r\n  {\r\n    path: \"/user-settings\",\r\n    name: \"UserSettingsPage\",\r\n    component: UserSettingsPage,\r\n    meta: { requiresAuth: true },\r\n  },\r\n  {\r\n    path: \"/ai-consultation\",\r\n    name: \"AIconsultationPage\",\r\n    component: AIconsultationPage,\r\n    meta: { requiresAuth: true },\r\n  },\r\n  {\r\n    path: \"/diet-management\",\r\n    name: \"DietManagementPage\",\r\n    component: DietManagementPage,\r\n    meta: { requiresAuth: true },\r\n  },\r\n  {\r\n    path: \"/sport-management\",\r\n    name: \"SportManagementPage\",\r\n    component: SportManagementPage,\r\n    meta: { requiresAuth: true },\r\n  },\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(),\r\n  routes,\r\n});\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  store.dispatch(\"checkLoginStatus\"); // 检查登录状态\r\n  if (to.meta.requiresAuth && !store.getters.isLoggedIn) {\r\n    // 如果需要登录，且未登录，则跳转到登录页面\r\n    next(\"/\");\r\n  } else {\r\n    next();\r\n  }\r\n});\r\n\r\nexport default router;\r\n","import { createApp } from 'vue'\nimport App from './App.vue'\nimport ElementPlus from 'element-plus';\nimport 'element-plus/dist/index.css'\nimport router from './router';\nimport store from './store'\nimport './assets/global.css'\n\nconst app = createApp(App)\n\napp.use(ElementPlus)\napp.use(router);\napp.mount('#app')\napp.use(store)","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkelederlyside\"] = self[\"webpackChunkelederlyside\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(8590); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","_createElementBlock","_hoisted_1","_createVNode","_component_router_view","script","__exports__","render","router","useRouter","store","useStore","isLoggedIn","computed","getters","userInfo","goToLogin","push","style","class","_component_el_card","header","_withCtx","_cache","_createElementVNode","default","_hoisted_2","src","_imports_0","alt","_ctx","currentForm","_createBlock","_component_el_form","key","onSubmit","_withModifiers","login","_component_el_form_item","label","_component_el_input","modelValue","form","username","$event","placeholder","append","_component_el_icon","_component_User","_","password","type","_component_Lock","_component_el_button","onClick","loading","_createTextVNode","_toDisplayString","_hoisted_3","_component_el_link","underline","_createCommentVNode","_component_RegisterForm","onBackToLogin","_component_ForgotPasswordForm","model","registerForm","ref","prop","email","phone","_component_el_select","user_type","_component_el_option","value","submitForm","emit","defineComponent","name","components","ElForm","ElFormItem","ElInput","ElButton","ElLink","emits","setup","props","reactive","async","response","axios","post","console","log","data","ElMessage","message","error","User","Lock","RegisterForm","ForgotPasswordForm","token","user","role","dispatch","success","errorMessage","uploadBloodPressureUrl","uploadBloodSugarUrl","historyDataUrl","aiAnalysisUrl","bloodPressureData","bloodSugarData","uploadSuccess","uploading","uploadProgress","bloodPressureHistoryData","bloodSugarHistoryData","aiAnalysisResult","aiAnalysisLoading","aiAnalysisError","video","canvas","bloodPressureChart","bloodSugarChart","handleUploadSuccess","takePicture","context","getContext","drawImage","imageDataURL","toDataURL","uploadImage","url","localStorage","getItem","fetch","method","headers","Authorization","body","JSON","stringify","image","json","fetchHistoryData","filter","item","map","time","systolic","diastolic","pulse","formattedTime","Date","toLocaleDateString","toLocaleTimeString","bloodSugar","fetchAIAnalysis","length","analysis","status","formattedAnalysis","text","analysisIndex","indexOf","suggestionsIndex","analysisPart","substring","trim","replace","renderBloodPressureChart","clear","echarts","document","getElementById","sortedData","sort","a","b","dates","toLocaleString","systolicValues","diastolicValues","pulseValues","option","title","left","tooltip","trigger","legend","bottom","xAxis","axisLabel","rotate","interval","yAxis","series","setOption","renderBloodSugarChart","bloodSugarValues","watch","newData","onMounted","navigator","mediaDevices","getUserMedia","then","stream","srcObject","catch","knowledgeApiUrl","knowledgeList","fetchKnowledge","ok","statusText","Error","health_knowledge_id","contentSnippet","content","publish_time","err","goToDetail","path","route","useRoute","knowledge","formattedContent","synth","window","speechSynthesis","voices","selectedVoice","isSpeaking","speechVolume","currentUtterance","isMuted","lastVolume","loadVoices","getVoices","find","voice","lang","speakText","utterance","SpeechSynthesisUtterance","pitch","rate","volume","onstart","onend","onerror","event","speak","stopSpeaking","cancel","toggleMute","handleVolumeChange","textToSpeak","setTimeout","replayKnowledge","warning","onvoiceschanged","newVoices","immediate","bilibiliEmbedUrl","video_url","includes","bvidMatch","match","bvid","warn","fetchKnowledgeDetail","healthKnowledgeId","params","onBeforeUnmount","VolumeUp","profileApiUrl","updateUserApiUrl","profileForm","profileData","first_name","last_name","date_of_birth","gender","address","city","state","zip_code","emergency_contact_name","emergency_contact_phone","allergies","rules","required","validate","valid","commit","fetchProfileData","userId","Object","assign","userQuestion","conversationHistory","consulting","consultationError","messagesList","aiConsultationApiUrl","recognition","isListening","transcript","recognitionError","selectedRecognitionLang","stopSpeechRecognition","initSpeechRecognition","SpeechRecognition","webkitSpeechRecognition","stop","continuous","interimResults","onresult","finalTranscript","interimTranscript","i","resultIndex","results","result","isFinal","startAiConsultation","startSpeechRecognition","start","newLang","oldLang","question","scrollToBottom","aiResponse","nextTick","scrollTop","scrollHeight","Microphone","paymentResult","userDemand","recommendation","cookingLoading","cookingError","formattedRecommendation","getCookingRecommendation","menu","menuLoading","menuError","cartItems","orderForm","deliveryAddress","orderLoading","orderError","paymentInfo","historicalOrders","historicalOrdersLoading","historicalOrdersError","purchaseDialogVisible","selectedDish","cartTotal","reduce","sum","price","quantity","fetchMenu","fetchHistoricalOrders","checkPaymentReturn","get","dishes","dish","dish_id","parseFloat","description","category","image_url","orders","openPurchaseDialog","confirmAddToCart","existingItem","removeCartItem","itemToRemove","createOrder","items","dishId","orderId","totalAmount","openPaymentWindow","htmlFormString","newWindow","open","write","close","queryParams","query","out_trade_no","clearPaymentResult","confirmDeleteOrder","order","ElMessageBox","confirm","order_id","confirmButtonText","cancelButtonText","deleteOrder","delete","checkInForm","exerciseType","duration","notes","checkInLoading","checkInResult","handleCheckIn","fetchExerciseHistory","exerciseHistory","exerciseHistoryLoading","exerciseHistoryError","coaches","coachesLoading","coachesError","selectedCoach","bookingDialogVisible","bookingForm","date","bookingLoading","fetchCoaches","openBookingDialog","coach","confirmBooking","coachId","coach_id","fetchBookingHistory","bookingHistory","bookingHistoryLoading","bookingHistoryError","createStore","mutations","setLoginStatus","setUserInfo","setToken","clearUserInfo","actions","setItem","logout","removeItem","checkLoginStatus","routes","component","LoginPage","HomePage","meta","requiresAuth","HealthMonitoringPage","HealthKnowledgePage","HealthKnowledgeDetail","UserSettingsPage","AIconsultationPage","DietManagementPage","SportManagementPage","createRouter","history","createWebHistory","beforeEach","to","from","next","app","createApp","App","use","ElementPlus","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","every","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","this","Function","e","obj","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}